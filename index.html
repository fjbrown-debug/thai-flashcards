<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#6b4423">
    <title>Thai Vocabulary Flashcards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;600;700&family=Noto+Sans+Thai+Looped:wght@400;500;600;700&family=Sarabun:wght@400;500;600;700&family=Nunito:wght@400;500;600;700&family=Prompt:wght@400;500;600&family=Kanit:wght@400;500;600&display=swap" rel="stylesheet">
    <script>
        // Load theme immediately to prevent flash
        (function() {
            const savedTheme = localStorage.getItem('thaiFlashcardsTheme');
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>
    <style>
        :root {
            /* Light theme */
            --bg-primary: #fdfbf7;
            --bg-secondary: #f5ebe0;
            --bg-card: #ffffff;
            --bg-card-back: linear-gradient(135deg, #8b6f47 0%, #6b4423 100%);
            --text-primary: #6b4423;
            --text-secondary: #666666;
            --text-muted: #999999;
            --accent-primary: #d4a373;
            --accent-secondary: #8b6f47;
            --border-color: rgba(212, 163, 115, 0.3);
            --shadow-color: rgba(107, 68, 35, 0.12);
            --shadow-strong: rgba(107, 68, 35, 0.2);
            --card-border: rgba(139, 111, 71, 0.1);
            --btn-bg: #ffffff;
            --btn-nav-bg: #f5ebe0;
            --progress-bg: #e0e0e0;
            --modal-backdrop: rgba(0, 0, 0, 0.5);
            --success-color: #22c55e;
            --error-color: #ef4444;
            --glow-success: rgba(34, 197, 94, 0.4);
            --glow-error: rgba(239, 68, 68, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        /* Fixed Top Header Bar */
        .app-top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .app-top-bar-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .app-top-bar-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Main Menu Styles */
        .main-menu {
            min-height: 100vh;
            width: 100%;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
            padding-top: 60px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .main-menu-content {
            max-width: 400px;
            width: 100%;
            text-align: center;
            padding-top: 50px; /* Space for fixed header elements */
            padding-bottom: 30px;
        }

        .main-menu-header {
            margin-bottom: 32px;
        }

        .main-menu-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
        }

        .main-menu-icon img {
            width: 100%;
            height: 100%;
            border-radius: 20px;
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        .main-menu h1 {
            font-size: 2em;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .main-menu-subtitle {
            color: var(--text-secondary);
            font-size: 1em;
        }

        .main-menu-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 24px;
        }

        .main-menu-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 12px var(--shadow-color);
            border: 1px solid var(--border-color);
            text-align: left;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .main-menu-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--shadow-strong);
        }

        .main-menu-card:active {
            transform: scale(0.98);
        }

        .main-menu-card-icon {
            font-size: 2em;
            flex-shrink: 0;
        }

        .main-menu-card-title {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .main-menu-card-desc {
            font-size: 0.85em;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .main-menu-footer {
            margin-top: 16px;
        }

        .main-menu-skip {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 0.9em;
            cursor: pointer;
            padding: 8px 16px;
            transition: color 0.2s;
        }

        .main-menu-skip:hover {
            color: var(--accent-primary);
        }

        .back-to-menu {
            position: static;
            background: none;
            border: none;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            padding: 8px;
            transition: all 0.2s;
        }

        .back-to-menu:hover {
            color: var(--accent-primary);
        }

        .back-to-menu svg {
            width: 24px;
            height: 24px;
        }

        html {
            overflow-x: hidden;
            width: 100%;
            height: 100%;
        }

        body {
            font-family: 'Nunito', 'Sarabun', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            background-attachment: fixed;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            padding: 15px;
            touch-action: pan-y;
            overflow-x: hidden;
            overflow-y: auto;
            width: 100%;
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
            box-sizing: border-box;
            margin: 0;
        }

        .container {
            max-width: 600px;
            width: 100%;
            padding-top: 50px; /* Space for fixed header elements */
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 12px;
        }

        .header-icon {
            width: 64px;
            height: 64px;
            margin-bottom: 8px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
            border-radius: 12px;
        }
        
        .header-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        h1 {
            text-align: center;
            color: var(--text-primary);
            margin-bottom: 4px;
            font-size: clamp(1.8em, 6vw, 2.5em);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 12px;
            font-size: clamp(0.75em, 3vw, 0.9em);
            padding: 0 10px;
        }

        .list-selector-container {
            text-align: center;
            margin-bottom: 15px;
        }

        .list-selector {
            padding: 12px 20px;
            font-size: clamp(0.9em, 3.5vw, 1em);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--btn-bg);
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            max-width: 100%;
            font-family: inherit;
        }

        .list-selector:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(212, 163, 115, 0.2);
        }

        .top-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            justify-content: space-between;
        }

        .settings-btn, .stats-btn {
            padding: 10px 16px;
            background: var(--btn-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: clamp(0.85em, 3vw, 0.95em);
            font-weight: 500;
            transition: all 0.2s;
            flex: 1;
        }

        .settings-btn:active, .stats-btn:active {
            background: var(--bg-secondary);
            transform: scale(0.98);
        }

        .session-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .session-btn {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            background: var(--btn-bg);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-size: clamp(0.8em, 2.8vw, 0.9em);
        }

        .session-btn:active {
            transform: scale(0.95);
            background: var(--bg-secondary);
        }

        .session-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            border-color: transparent;
        }

        .session-btn.primary:disabled {
            background: var(--progress-bg);
            opacity: 0.5;
            cursor: not-allowed;
        }

        .session-btn.primary:disabled:active {
            transform: none;
        }

        .progress-container {
            margin-bottom: 15px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: clamp(0.8em, 3vw, 0.9em);
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--progress-bg);
            border-radius: 10px;
            overflow: visible;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            border-radius: 10px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 2px 8px rgba(212, 163, 115, 0.4);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, transparent 50%);
            border-radius: 10px;
        }

        .progress-milestones {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
            padding: 0 2px;
        }

        .milestone {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--progress-bg);
            transition: all 0.3s;
            position: relative;
        }

        .milestone.reached {
            background: var(--accent-primary);
            box-shadow: 0 0 8px var(--accent-primary);
            animation: milestonePulse 4s ease-in-out infinite;
        }

        @keyframes milestonePulse {
            0%, 100% { 
                box-shadow: 0 0 6px var(--accent-primary);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 12px var(--accent-primary), 0 0 20px var(--accent-primary);
                transform: scale(1.15);
            }
        }

        .milestone.reached::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border-radius: 50%;
            border: 2px solid var(--accent-primary);
            opacity: 0.5;
        }

        .card-container {
            perspective: 1000px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            border-radius: 24px;
        }

        .swipe-bar {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
            border-radius: 24px;
            opacity: 0;
            transition: opacity 0.15s ease;
            pointer-events: none;
            z-index: 5;
        }

        .swipe-bar.left {
            background: linear-gradient(90deg, rgba(239, 68, 68, 0.95) 0%, rgba(239, 68, 68, 0) 50%);
        }

        .swipe-bar.right {
            background: linear-gradient(-90deg, rgba(34, 197, 94, 0.95) 0%, rgba(34, 197, 94, 0) 50%);
        }

        .swipe-bar.visible {
            opacity: 1;
        }

        .swipe-hint {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3em;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            pointer-events: none;
            z-index: 10;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .swipe-hint.left {
            left: 25px;
            color: white;
        }

        .swipe-hint.right {
            right: 25px;
            color: white;
        }

        .swipe-hint.visible {
            opacity: 1;
        }

        .swipe-hint.visible.left {
            transform: translateY(-50%) scale(1.2);
        }

        .swipe-hint.visible.right {
            transform: translateY(-50%) scale(1.2);
        }

        .card {
            width: 100%;
            min-height: clamp(280px, 50vh, 400px);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            touch-action: none;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.swiping {
            transition: none;
        }

        /* Success/error feedback animations */
        .card.success-flash .card-face {
            animation: successPulse 0.4s ease;
        }

        .card.error-flash .card-face {
            animation: errorPulse 0.4s ease;
        }

        @keyframes successPulse {
            0%, 100% { box-shadow: 0 20px 60px var(--shadow-color); }
            50% { box-shadow: 0 0 40px var(--glow-success), 0 20px 60px var(--shadow-color); }
        }

        @keyframes errorPulse {
            0%, 100% { box-shadow: 0 20px 60px var(--shadow-color); }
            50% { box-shadow: 0 0 40px var(--glow-error), 0 20px 60px var(--shadow-color); }
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            min-height: clamp(280px, 50vh, 400px);
            backface-visibility: hidden;
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: clamp(20px, 8vw, 40px);
            box-shadow: 0 20px 60px var(--shadow-color), 0 8px 20px var(--shadow-color);
            transition: box-shadow 0.3s ease;
            overflow: hidden;
        }

        .card-front {
            background: var(--bg-card);
            border: 1px solid var(--card-border);
        }

        .card-back {
            background: var(--bg-card-back);
            transform: rotateY(180deg);
            position: relative;
            overflow: hidden;
        }

        .card-back::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
            pointer-events: none;
        }

        .card-text {
            font-size: clamp(2em, 8vw, 3.5em);
            font-weight: 600;
            color: var(--text-primary);
            word-break: keep-all;
            overflow-wrap: normal;
            max-width: 100%;
            line-height: 1.4;
            text-align: center;
            padding: 0 10px;
            font-family: 'Sarabun', 'Nunito', sans-serif;
            min-height: 1.4em;
        }

        .card-text.medium { font-size: clamp(1.5em, 6vw, 2.2em); }
        .card-text.small { font-size: clamp(1.2em, 5vw, 1.6em); }
        .card-text.tiny { font-size: clamp(1em, 4vw, 1.2em); }
        .card-text.xtiny { font-size: clamp(0.9em, 3.5vw, 1em); }

        .card-back .card-text {
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .controls {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        button {
            padding: clamp(12px, 3vw, 15px) clamp(16px, 4vw, 20px);
            border: none;
            border-radius: 14px;
            font-size: clamp(0.9em, 3.5vw, 1em);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            touch-action: manipulation;
            font-family: inherit;
        }

        button:active:not(:disabled) {
            transform: scale(0.95);
        }

        button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn-nav { 
            background: var(--btn-nav-bg); 
            color: var(--text-primary); 
        }
        
        .btn-flip { 
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%); 
            color: white;
            box-shadow: 0 4px 15px rgba(212, 163, 115, 0.3);
        }
        
        .btn-action { 
            background: var(--btn-bg); 
            color: var(--text-primary); 
            border: 2px solid var(--border-color); 
        }

        .action-controls {
            display: flex;
            gap: 8px;
        }

        .sentence-example {
            margin-top: 15px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 14px;
            border: 1px solid var(--border-color);
            display: none;
        }

        .sentence-example.show {
            display: block;
        }

        .sentence-example-btn {
            background: var(--btn-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }

        .sentence-example-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .sentence-carousel {
            position: relative;
            overflow: hidden;
        }

        .sentence-carousel-inner {
            display: flex;
            transition: transform 0.3s ease;
        }

        .sentence-slide {
            min-width: 100%;
            flex-shrink: 0;
        }

        .sentence-thai {
            font-size: 1.3em;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .sentence-roman {
            font-size: 0.95em;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-style: italic;
        }

        .sentence-english {
            font-size: 1em;
            color: var(--text-secondary);
        }

        .sentence-word-highlight {
            color: var(--primary-color);
            font-weight: 600;
        }

        .sentence-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 12px;
        }

        .sentence-nav-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--btn-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sentence-nav-btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .sentence-nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .sentence-dots {
            display: flex;
            gap: 6px;
        }

        .sentence-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .sentence-dot.active {
            background: var(--primary-color);
            transform: scale(1.2);
        }

        .sentence-speak-btn {
            padding: 8px 12px;
            background: var(--btn-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s ease;
            line-height: 1;
        }

        .sentence-speak-btn:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .sentence-unavailable {
            text-align: center;
            color: var(--text-muted);
            font-style: italic;
            padding: 10px;
        }

        .score-display {
            text-align: center;
            margin-bottom: 15px;
            font-size: clamp(1em, 3.5vw, 1.1em);
            color: var(--text-secondary);
            background: var(--btn-bg);
            padding: 12px 16px;
            border-radius: 14px;
            border: 1px solid var(--border-color);
        }

        .score-number { font-weight: 700; font-size: 1.3em; }
        .score-correct { color: var(--success-color); }
        .score-incorrect { color: var(--error-color); }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-backdrop);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 15px;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            overflow: hidden;
        }

        .modal.open { display: flex; }

        .modal-content {
            background: var(--bg-card);
            border-radius: 24px;
            padding: clamp(16px, 4vw, 30px);
            max-width: 500px;
            width: 100%;
            max-height: calc(100vh - 30px);
            max-height: calc(100dvh - 30px);
            overflow-y: auto;
            overflow-x: hidden;
            box-shadow: 0 25px 80px var(--shadow-strong);
            border: 1px solid var(--border-color);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: var(--text-primary);
            font-size: clamp(1.3em, 5vw, 1.6em);
            font-weight: 700;
        }

        .close-btn {
            background: var(--btn-nav-bg);
            border: none;
            font-size: 1.2em;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px 12px;
            flex: none;
            border-radius: 10px;
            transition: all 0.2s;
        }

        .close-btn:active {
            transform: scale(0.9);
            background: var(--bg-secondary);
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: clamp(1em, 4vw, 1.1em);
            font-weight: 600;
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input-label {
            display: block;
            padding: 12px 16px;
            background: var(--btn-bg);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            font-size: clamp(0.9em, 3.5vw, 1em);
            transition: all 0.2s;
        }

        .file-input-label:active {
            background: var(--bg-secondary);
        }

        #csvFileInput { position: absolute; left: -9999px; }

        .import-info {
            margin-top: 8px;
            font-size: clamp(0.75em, 3vw, 0.85em);
            color: var(--text-muted);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .stat-box {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 14px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-size: clamp(1.5em, 6vw, 2em);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: clamp(0.8em, 3vw, 0.9em);
            color: var(--text-secondary);
        }

        .list-stat-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 14px;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
        }

        .list-stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .list-stat-name { font-weight: 600; color: var(--text-primary); font-size: 1em; }
        .list-stat-percent { font-size: 1.3em; font-weight: 700; color: var(--success-color); }

        .list-stat-bar {
            width: 100%;
            height: 8px;
            background: var(--progress-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .list-stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color) 0%, #22c55e 100%);
            transition: width 0.3s ease;
        }

        .list-stat-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .stat-detail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-detail-value { font-weight: 600; color: var(--text-primary); }

        .mode-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border-color);
            background: var(--btn-bg);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: clamp(0.85em, 3vw, 0.95em);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            border-color: transparent;
        }

        .mode-btn:active { transform: scale(0.95); }

        .view-mode-toggle {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            padding: 4px;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .view-mode-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            background: transparent;
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: clamp(0.8em, 2.8vw, 0.85em);
        }

        .view-mode-btn.active {
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .view-mode-btn:active { transform: scale(0.95); }

        /* Options Button */
        .options-btn {
            background: var(--btn-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 10px 14px;
            font-size: 1.2em;
            cursor: pointer;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .options-btn:active { transform: scale(0.95); }
        
        .main-menu-settings {
            position: static;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            padding: 8px;
            color: var(--text-secondary);
            transition: color 0.2s;
        }
        
        .main-menu-settings:hover {
            color: var(--accent-primary);
        }

        /* Options Modal */
        .options-modal-content {
            max-width: 400px;
        }

        .menu-section {
            margin-bottom: 16px;
        }

        .menu-section-title {
            font-size: 0.75em;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            padding-left: 4px;
        }

        .menu-btn {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-secondary);
            border: none;
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.95em;
            font-weight: 500;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
        }

        .menu-btn:hover {
            background: var(--bg-card);
        }

        .menu-btn:active {
            transform: scale(0.98);
        }

        .menu-btn-danger {
            color: #dc2626;
        }

        .menu-btn-danger:hover {
            background: rgba(220, 38, 38, 0.1);
        }

        [data-theme="dark"] .menu-btn-danger {
            color: #f87171;
        }

        [data-theme="dark"] .menu-btn-danger:hover {
            background: rgba(248, 113, 113, 0.1);
        }

        .option-group {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .menu-section .option-group:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .menu-section .option-group:first-of-type {
            padding-top: 0;
        }

        .option-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .option-hint {
            font-size: 0.8em;
            color: var(--text-muted);
            margin-top: 8px;
        }

        .option-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .option-row .option-label {
            margin-bottom: 0;
        }

        .option-toggle-group {
            display: flex;
            gap: 6px;
            background: var(--bg-secondary);
            padding: 4px;
            border-radius: 10px;
        }

        .option-toggle-btn {
            flex: 1;
            padding: 10px 12px;
            border: none;
            background: transparent;
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85em;
        }

        .option-toggle-btn.active {
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .option-toggle-btn:active { transform: scale(0.95); }

        /* Mixed List Size Controls */
        .mixed-list-size-row {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .mixed-list-size-input {
            width: 80px;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1em;
            font-weight: 600;
            text-align: center;
        }

        .mixed-list-size-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .btn-reshuffle {
            flex: 1;
            padding: 10px 16px;
            border: none;
            background: var(--accent-primary);
            color: white;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .btn-reshuffle:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .btn-reshuffle:active {
            transform: scale(0.98);
        }

        .option-hint {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 6px;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--progress-bg);
            transition: 0.3s;
            border-radius: 28px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch input:checked + .toggle-slider {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Mastery Indicator */
        .mastery-indicator {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 10;
            opacity: 0.9;
        }

        .card.flipped .mastery-indicator {
            visibility: hidden;
        }

        .mastery-new {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .mastery-learning {
            background: #fef3c7;
            color: #92400e;
        }

        [data-theme="dark"] .mastery-learning {
            background: #422006;
            color: #fbbf24;
        }

        .mastery-mastered {
            background: #d1fae5;
            color: #065f46;
        }

        [data-theme="dark"] .mastery-mastered {
            background: #064e3b;
            color: #34d399;
        }

        .mastery-struggling {
            background: #fee2e2;
            color: #991b1b;
        }

        [data-theme="dark"] .mastery-struggling {
            background: #450a0a;
            color: #f87171;
        }

        /* Vocab List Modal */
        .vocab-list-modal-content {
            max-width: 500px;
            width: 100%;
            max-height: 85vh;
            max-height: 85dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .vocab-list-controls {
            flex-shrink: 0;
            padding-bottom: 5px;
        }

        .vocab-list-controls .list-selector {
            width: 100%;
        }

        .vocab-list-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 10px 0;
            -webkit-overflow-scrolling: touch;
            min-height: 0;
        }

        .vocab-list-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-bottom: 1px solid var(--border-color);
            gap: 12px;
            flex-wrap: wrap;
        }

        .vocab-list-item:last-child {
            border-bottom: none;
        }

        .vocab-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .vocab-status.new {
            background: var(--text-muted);
        }

        .vocab-status.learning {
            background: #f59e0b;
        }

        .vocab-status.mastered {
            background: #10b981;
        }

        .vocab-status.struggling {
            background: #ef4444;
        }

        .vocab-thai {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-primary);
            min-width: 60px;
            flex-shrink: 0;
        }

        .vocab-english {
            flex: 1;
            color: var(--text-secondary);
            font-size: 0.9em;
            min-width: 100px;
        }

        .vocab-roman {
            color: var(--text-muted);
            font-size: 0.8em;
            font-style: italic;
            width: 100%;
            padding-left: 22px;
            margin-top: -4px;
        }

        /* App Mode Toggle */
        .app-mode-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .app-mode-btn {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--btn-bg);
            color: var(--text-primary);
        }

        .app-mode-btn:hover {
            border-color: var(--accent-primary);
        }

        .app-mode-btn:active {
            background: var(--bg-secondary);
            transform: scale(0.98);
        }

        .app-mode-btn.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        /* Grammar Section */
        .grammar-section {
            padding: 10px 15px;
            padding-top: 60px;
            max-width: 600px;
            margin: 0 auto;
        }

        .grammar-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .grammar-header h2 {
            color: var(--text-primary);
            margin: 0 0 5px 0;
            font-size: 1.4em;
        }

        .grammar-subtitle {
            color: var(--text-muted);
            font-size: 0.9em;
            margin: 0;
        }

        .grammar-lessons-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .grammar-lesson-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .grammar-lesson-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .grammar-lesson-card.completed {
            border-color: #10b981;
        }

        .lesson-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .lesson-card-title {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .lesson-card-thai {
            font-size: 1.2em;
            color: var(--accent-primary);
        }

        .lesson-card-desc {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .lesson-card-example {
            background: var(--progress-bg);
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.85em;
        }

        .lesson-card-example .thai {
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .lesson-card-example .english {
            color: var(--text-muted);
            font-style: italic;
        }

        .lesson-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
            gap: 12px;
        }

        .lesson-card-status {
            font-size: 0.8em;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .lesson-card-status.completed {
            color: #10b981;
            font-weight: 600;
        }

        .lesson-card-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: var(--accent-primary);
            color: white;
            flex-shrink: 0;
            white-space: nowrap;
        }

        .lesson-card-btn:hover {
            transform: scale(1.05);
        }

        .lesson-card-btn.completed {
            background: #10b981;
        }

        [data-theme="dark"] .lesson-card-status.completed {
            color: #34d399;
        }

        /* Lesson View */
        .grammar-lesson-view {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .grammar-back-btn {
            background: var(--btn-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--accent-primary);
            font-size: 0.95em;
            cursor: pointer;
            padding: 10px 16px;
            margin-bottom: 15px;
            display: inline-block;
            transition: all 0.2s;
        }
        
        .grammar-back-btn:hover {
            background: var(--accent-primary);
            color: white;
        }
        
        .grammar-back-btn:active {
            transform: scale(0.98);
        }

        .lesson-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px;
            min-height: 350px;
        }

        .lesson-step {
            display: none;
        }

        .lesson-step.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .lesson-step-title {
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .lesson-structure {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
        }

        .lesson-structure-thai {
            font-size: 1.8em;
            color: var(--accent-primary);
            margin-bottom: 8px;
        }

        .lesson-structure-roman {
            font-size: 1em;
            color: var(--text-muted);
            font-style: italic;
            margin-bottom: 8px;
        }

        .lesson-structure-english {
            font-size: 1.1em;
            color: var(--text-secondary);
        }

        .lesson-explanation {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 0.95em;
        }
        
        .lesson-explanation p {
            margin: 0 0 12px 0;
        }
        
        .lesson-explanation p:last-child {
            margin-bottom: 0;
        }
        
        .lesson-explanation strong {
            color: var(--text-primary);
        }
        
        .lesson-explanation em {
            font-style: italic;
            color: var(--primary-color);
        }

        .lesson-examples {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .example-card {
            background: var(--progress-bg);
            border-radius: 12px;
            padding: 16px;
        }

        .example-thai {
            font-size: 1.15em;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .example-thai .highlight {
            color: var(--accent-primary);
            font-weight: 600;
        }

        .example-roman {
            font-size: 0.85em;
            color: var(--text-muted);
            font-style: italic;
            margin-bottom: 6px;
        }

        .example-english {
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        /* Practice Section */
        .practice-prompt {
            text-align: center;
            margin-bottom: 20px;
        }

        .practice-prompt-english {
            font-size: 1.1em;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .practice-prompt-hint {
            font-size: 0.85em;
            color: var(--text-muted);
        }

        .practice-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .practice-option {
            background: var(--progress-bg);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 14px 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .practice-option:hover {
            border-color: var(--accent-primary);
        }

        .practice-option.selected {
            border-color: var(--accent-primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .practice-option.correct {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .practice-option.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .practice-feedback {
            text-align: center;
            padding: 16px;
            margin-top: 16px;
            border-radius: 12px;
            display: none;
        }

        .practice-feedback.show {
            display: block;
        }

        .practice-feedback.correct {
            background: rgba(16, 185, 129, 0.1);
            color: #065f46;
        }

        .practice-feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: #991b1b;
        }

        [data-theme="dark"] .practice-feedback.correct {
            color: #34d399;
        }

        [data-theme="dark"] .practice-feedback.incorrect {
            color: #fca5a5;
        }

        .practice-check-btn {
            width: 100%;
            margin-top: 16px;
            padding: 14px;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
        }

        .practice-check-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Sentence Builder */
        .sentence-builder {
            margin-top: 16px;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 16px;
            background: var(--progress-bg);
            border-radius: 12px;
            min-height: 50px;
            margin-bottom: 12px;
        }

        .word-chip {
            background: var(--card-bg);
            padding: 8px 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1em;
            border: 2px solid transparent;
        }

        .word-chip:hover {
            border-color: var(--accent-primary);
        }

        .word-chip.used {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .sentence-target {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 16px;
            background: var(--card-bg);
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            min-height: 60px;
            align-items: center;
        }

        .sentence-target .word-chip {
            background: var(--accent-primary);
            color: white;
        }

        .sentence-placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .lesson-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .lesson-progress {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Practice Mode Styles */
        .grammar-practice-view {
            animation: fadeIn 0.3s ease;
        }

        .practice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .practice-title {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .practice-score {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-primary);
            background: var(--progress-bg);
            padding: 8px 16px;
            border-radius: 20px;
        }

        .practice-mode-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: var(--progress-bg);
            padding: 4px;
            border-radius: 12px;
        }

        .practice-mode-btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            color: var(--text-muted);
        }

        .practice-mode-btn.active {
            background: var(--card-bg);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .practice-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px;
            min-height: 300px;
        }

        .practice-question {
            text-align: center;
            margin-bottom: 24px;
        }

        .practice-english {
            font-size: 1.1em;
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-style: italic;
        }

        .practice-sentence {
            font-size: 1.5em;
            color: var(--text-primary);
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .practice-sentence .blank {
            display: inline-block;
            min-width: 80px;
            height: 40px;
            border-bottom: 3px solid var(--accent-primary);
            margin: 0 4px;
            vertical-align: bottom;
            position: relative;
        }

        .practice-sentence .blank.filled {
            border-bottom-color: var(--accent-primary);
            cursor: pointer;
        }

        .practice-sentence .blank.correct {
            border-bottom-color: #10b981;
        }

        .practice-sentence .blank.incorrect {
            border-bottom-color: #ef4444;
        }

        .practice-sentence .blank .filled-word {
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-primary);
            color: var(--bg-primary);
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.8em;
            white-space: nowrap;
            font-weight: 600;
        }

        .practice-sentence .blank.filled .filled-word {
            background: var(--accent-primary);
        }

        .practice-sentence .blank.correct .filled-word {
            background: #10b981;
            color: white;
        }

        .practice-sentence .blank.incorrect .filled-word {
            background: #ef4444;
            color: white;
        }

        .practice-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .practice-word-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .practice-word-option {
            background: var(--progress-bg);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .practice-word-option:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .practice-word-option.selected {
            background: var(--accent-primary);
            color: white;
        }

        .practice-word-option.used {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .practice-word-option.correct {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .practice-word-option.wrong {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        /* Sentence Builder Practice */
        .build-target {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 20px;
            background: var(--progress-bg);
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            min-height: 70px;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            transition: all 0.2s;
        }

        .build-target.correct {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .build-target.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .build-target .build-word {
            background: var(--accent-primary);
            color: white;
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .build-target .build-word:hover {
            opacity: 0.8;
        }

        .build-placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .build-word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .build-word-chip {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .build-word-chip:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .build-word-chip.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .practice-result {
            text-align: center;
            padding: 16px;
            margin-top: 20px;
            border-radius: 12px;
            font-weight: 600;
        }

        .practice-result.correct {
            background: rgba(16, 185, 129, 0.15);
            color: #065f46;
        }

        .practice-result.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: #991b1b;
        }

        [data-theme="dark"] .practice-result.correct {
            color: #34d399;
        }

        [data-theme="dark"] .practice-result.incorrect {
            color: #fca5a5;
        }

        /* Alphabet Section Styles */
        .alphabet-section {
            padding: 10px 15px;
            padding-top: 60px;
            max-width: 600px;
            margin: 0 auto;
        }

        .alphabet-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .alphabet-header h2 {
            color: var(--text-primary);
            margin: 0 0 5px 0;
            font-size: 1.4em;
        }

        .alphabet-subtitle {
            color: var(--text-muted);
            font-size: 0.9em;
            margin: 0;
        }

        .alphabet-modes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .alphabet-mode-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .alphabet-mode-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .alphabet-mode-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .alphabet-mode-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .alphabet-mode-desc {
            font-size: 0.8em;
            color: var(--text-muted);
        }

        .alphabet-progress-overview {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px 20px;
            text-align: center;
        }

        .alphabet-progress-overview h3 {
            color: var(--text-primary);
            font-size: 1em;
            margin: 0 0 12px 0;
        }

        .alphabet-progress-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .alphabet-stat {
            display: flex;
            align-items: baseline;
            gap: 4px;
        }

        .alphabet-stat-num {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .alphabet-stat-label {
            font-size: 0.9em;
            color: var(--text-muted);
        }

        .alphabet-practice-view {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .alphabet-practice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .alphabet-practice-mode {
            font-weight: 600;
            color: var(--text-primary);
        }

        .alphabet-practice-score {
            font-weight: 600;
            color: var(--accent-primary);
        }

        .alphabet-practice-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            min-height: 350px;
        }

        .alphabet-question {
            text-align: center;
            margin-bottom: 24px;
        }

        .alphabet-question-letter {
            font-size: 5em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .alphabet-question-prompt {
            font-size: 1em;
            color: var(--text-muted);
        }

        .alphabet-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .alphabet-option {
            padding: 16px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .alphabet-option:hover {
            border-color: var(--accent-primary);
            background: var(--bg-card);
        }

        .alphabet-option.selected {
            border-color: var(--accent-primary);
            background: var(--bg-card);
        }

        .alphabet-option.correct {
            border-color: var(--success-color);
            background: var(--glow-success);
        }

        .alphabet-option.incorrect {
            border-color: var(--error-color);
            background: var(--glow-error);
        }

        .alphabet-option.correct-answer {
            border-color: var(--success-color);
            border-width: 3px;
            background: var(--glow-success);
        }

        .alphabet-option-main {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .alphabet-option-sub {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .alphabet-feedback {
            text-align: center;
            margin-top: 16px;
            padding: 12px;
            border-radius: 12px;
        }

        .alphabet-feedback.correct {
            background: var(--glow-success);
            color: var(--success-color);
        }

        .alphabet-feedback.incorrect {
            background: var(--glow-error);
            color: var(--error-color);
        }

        .alphabet-feedback-detail {
            margin-top: 8px;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        /* Class sorting specific styles */
        .class-options {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .class-option {
            flex: 1;
            max-width: 100px;
            padding: 16px 12px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .class-option.low {
            background: rgba(34, 197, 94, 0.15);
            color: #16a34a;
        }

        .class-option.mid {
            background: rgba(59, 130, 246, 0.15);
            color: #2563eb;
        }

        .class-option.high {
            background: rgba(249, 115, 22, 0.15);
            color: #ea580c;
        }

        .class-option:hover, .class-option.selected {
            transform: scale(1.05);
            border-color: currentColor;
        }

        .class-option.correct {
            border-color: var(--success-color);
            box-shadow: 0 0 20px var(--glow-success);
        }

        .class-option.incorrect {
            border-color: var(--error-color);
            opacity: 0.6;
        }

        .class-option-label {
            font-weight: 700;
            font-size: 1.1em;
        }

        /* Class Sorting View Styles */
        .class-sorting-view {
            display: flex;
            flex-direction: column;
            gap: 16px;
            height: 100%;
        }

        .sorting-card-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 180px;
        }

        .sorting-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 24px 40px;
            text-align: center;
            box-shadow: 0 4px 20px var(--shadow-color);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .sorting-card.correct-animation {
            transform: scale(0.8);
            opacity: 0;
        }

        .sorting-card.wrong-animation {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }

        .sorting-card-letter {
            font-size: 4em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .sorting-card-roman {
            font-size: 1em;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .sorting-instruction {
            margin-top: 12px;
            font-size: 0.9em;
            color: var(--text-muted);
        }

        .class-bins {
            display: flex;
            gap: 10px;
            padding: 0 10px;
        }

        .class-bin {
            flex: 1;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 3px solid transparent;
            min-height: 120px;
        }

        .class-bin:hover {
            transform: translateY(-2px);
        }

        .class-bin:active {
            transform: scale(0.98);
        }

        .class-bin.low {
            border-color: rgba(34, 197, 94, 0.3);
            background: rgba(34, 197, 94, 0.08);
        }

        .class-bin.mid {
            border-color: rgba(59, 130, 246, 0.3);
            background: rgba(59, 130, 246, 0.08);
        }

        .class-bin.high {
            border-color: rgba(249, 115, 22, 0.3);
            background: rgba(249, 115, 22, 0.08);
        }

        .class-bin.pulse-correct {
            animation: pulse-green 0.4s ease;
        }

        .class-bin.pulse-incorrect {
            animation: pulse-red 0.4s ease;
        }

        @keyframes pulse-green {
            0%, 100% { box-shadow: none; }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.6); }
        }

        @keyframes pulse-red {
            0%, 100% { box-shadow: none; }
            50% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.6); }
        }

        .class-bin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .class-bin-header-right {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .class-bin-label {
            font-weight: 700;
            font-size: 0.9em;
        }

        .class-bin.low .class-bin-label { color: #16a34a; }
        .class-bin.mid .class-bin-label { color: #2563eb; }
        .class-bin.high .class-bin-label { color: #ea580c; }

        .class-bin-count {
            background: var(--bg-secondary);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.85em;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .class-bin-view-btn {
            background: none;
            border: none;
            padding: 4px;
            cursor: pointer;
            font-size: 0.9em;
            opacity: 0.4;
            transition: opacity 0.2s;
            line-height: 1;
        }

        .class-bin-view-btn:hover {
            opacity: 1;
        }

        .class-bin-letters {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            font-size: 1.1em;
            color: var(--text-primary);
            max-height: 60px;
            overflow: hidden;
        }

        .class-bin-expanded {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            z-index: 100;
            padding: 20px;
            overflow-y: auto;
        }

        .class-bin-expanded-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .class-bin-expanded-header span {
            font-size: 1.3em;
            font-weight: 700;
            color: var(--text-primary);
        }

        .class-bin-expanded-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }

        .expanded-letter-item {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px 8px;
            text-align: center;
        }

        .expanded-letter-thai {
            font-size: 2em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .expanded-letter-roman {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .sorting-complete {
            text-align: center;
            padding: 40px 20px;
        }

        .sorting-complete h3 {
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .sorting-complete p {
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        /* Alphabet Chart Styles */
        .alphabet-chart-content {
            margin-top: 16px;
        }

        .alphabet-chart-section {
            margin-bottom: 24px;
        }

        .alphabet-chart-section h3 {
            color: var(--text-primary);
            font-size: 1.1em;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .alphabet-chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 8px;
        }

        .alphabet-chart-item {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 10px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .alphabet-chart-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .alphabet-chart-item.tappable:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .alphabet-chart-item.low {
            border-left-color: #22c55e;
        }

        .alphabet-chart-item.mid {
            border-left-color: #3b82f6;
        }

        .alphabet-chart-item.high {
            border-left-color: #f97316;
        }

        .chart-item-thai {
            font-size: 1.8em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-item-roman {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .chart-legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .chart-legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .chart-legend-color.low { background: #22c55e; }
        .chart-legend-color.mid { background: #3b82f6; }
        .chart-legend-color.high { background: #f97316; }

        /* Chart Explainer and Summary */
        .chart-explainer {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .chart-explainer h3 {
            color: var(--text-primary);
            font-size: 1.1em;
            margin: 0 0 8px 0;
        }

        .chart-explainer p {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin: 0 0 12px 0;
            line-height: 1.5;
        }

        .class-summary {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .class-summary-item {
            padding: 10px 12px;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .class-summary-item.mid { border-color: #3b82f6; background: rgba(59, 130, 246, 0.1); }
        .class-summary-item.high { border-color: #f97316; background: rgba(249, 115, 22, 0.1); }
        .class-summary-item.low { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); }

        .class-summary-item strong {
            display: block;
            color: var(--text-primary);
            font-size: 0.9em;
            margin-bottom: 4px;
        }

        .class-summary-item span {
            display: block;
            font-size: 1.1em;
            color: var(--text-primary);
            letter-spacing: 2px;
        }

        .class-summary-item small {
            display: block;
            color: var(--text-muted);
            font-size: 0.8em;
            margin-top: 4px;
        }

        /* Vowel Grid */
        .vowel-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .vowel-pair-label {
            grid-column: 1 / -1;
            font-size: 0.8em;
            color: var(--text-muted);
            text-align: center;
            padding: 8px 0 4px 0;
            border-top: 1px solid var(--border-color);
            margin-top: 8px;
        }

        .vowel-pair-label:first-child {
            border-top: none;
            margin-top: 0;
        }

        .vowel-item {
            background: var(--bg-card);
            border-radius: 8px;
            padding: 10px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .vowel-item.tappable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .vowel-item.tappable:active {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .vowel-thai {
            display: block;
            font-size: 1.4em;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .vowel-sound {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        /* Tone Marks Grid */
        .tone-marks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
        }

        .tone-mark-item {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }

        .tone-mark-thai {
            display: block;
            font-size: 2em;
            color: var(--accent-primary);
            margin-bottom: 6px;
        }

        .tone-mark-name {
            display: block;
            font-size: 0.8em;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .tone-mark-effect {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        /* Font Styles View */
        .font-styles-view {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .font-styles-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .font-styles-header h3 {
            color: var(--text-primary);
            margin: 0;
        }

        .font-styles-modes {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .font-mode-btn {
            padding: 10px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95em;
        }

        .font-mode-btn.active {
            border-color: var(--accent-primary);
            background: var(--accent-primary);
            color: white;
        }

        .font-compare-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        @media (max-width: 500px) {
            .font-compare-info {
                grid-template-columns: 1fr;
            }
        }

        .font-info-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
        }

        .font-info-card h4 {
            color: var(--text-primary);
            margin: 0 0 8px 0;
            font-size: 1em;
        }

        .font-info-card p {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin: 0 0 12px 0;
            line-height: 1.4;
        }

        .font-sample {
            text-align: center;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .font-compare-chart {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 8px;
        }

        .font-compare-item {
            background: var(--bg-card);
            border-radius: 8px;
            padding: 12px 8px;
            text-align: center;
        }

        .font-compare-traditional {
            font-family: 'Noto Sans Thai Looped', 'Sarabun', serif;
            font-size: 1.6em;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .font-compare-modern {
            font-family: 'Noto Sans Thai', sans-serif;
            font-size: 1.4em;
            color: var(--accent-primary);
        }

        .font-compare-roman {
            font-size: 0.7em;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Font Match Game */
        .font-match-score {
            text-align: center;
            margin-bottom: 20px;
            color: var(--text-secondary);
        }

        .font-match-prompt {
            text-align: center;
            margin-bottom: 24px;
        }

        .font-match-prompt p {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .font-match-letter {
            font-size: 4em;
            color: var(--text-primary);
            padding: 20px;
            background: var(--bg-card);
            border-radius: 16px;
            display: inline-block;
            min-width: 100px;
        }

        .font-match-choices {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .font-match-choice {
            font-family: 'Noto Sans Thai', sans-serif;
            font-size: 2em;
            padding: 16px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
        }

        .font-match-choice:hover {
            border-color: var(--accent-primary);
            transform: scale(1.05);
        }

        .font-match-choice.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--success-color);
        }

        .font-match-choice.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error-color);
        }

        .font-match-choice.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        .font-match-feedback {
            text-align: center;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .font-match-feedback.correct {
            background: rgba(34, 197, 94, 0.15);
            color: var(--success-color);
        }

        .font-match-feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error-color);
        }

        /* Two-Column Font Matching Game */
        .font-matching-view {
            padding: 20px;
            padding-top: 60px;
            max-width: 500px;
            margin: 0 auto;
        }

        .font-matching-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .font-matching-header h3 {
            color: var(--text-primary);
            font-size: 1.4em;
        }

        .font-matching-score {
            text-align: center;
            font-size: 1.1em;
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-weight: 500;
        }

        .font-matching-game {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: flex-start;
        }

        .font-matching-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100px;
        }

        .font-matching-item {
            padding: 14px 10px;
            background: var(--bg-card);
            border: 3px solid var(--border-color);
            border-radius: 12px;
            text-align: center;
            font-size: 2.2em;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .font-matching-item.left {
            font-family: 'Noto Sans Thai Looped', serif;
        }

        .font-matching-item.right {
            font-family: 'Noto Sans Thai', sans-serif;
        }

        .font-matching-item:hover:not(.matched):not(.selected) {
            border-color: var(--accent-primary);
            transform: scale(1.05);
        }

        .font-matching-item.selected {
            border-color: var(--accent-primary);
            background: rgba(212, 163, 115, 0.2);
            box-shadow: 0 0 0 3px rgba(212, 163, 115, 0.3);
        }

        .font-matching-item.matched {
            border-color: var(--success-color);
            background: rgba(34, 197, 94, 0.15);
            cursor: default;
            opacity: 0.7;
        }

        .font-matching-item.wrong {
            animation: wrongShake 0.4s ease-out;
            border-color: var(--error-color);
            background: rgba(239, 68, 68, 0.15);
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-8px); }
            40% { transform: translateX(8px); }
            60% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
        }

        .font-matching-result {
            text-align: center;
            padding: 30px;
            margin-top: 20px;
        }

        .font-matching-result-icon {
            font-size: 3em;
            margin-bottom: 16px;
        }

        .font-matching-result-text {
            font-size: 1.3em;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        /* Writing Practice Section */
        .writing-section {
            padding: 20px;
            padding-top: 60px;
            max-width: 600px;
            margin: 0 auto;
        }

        .writing-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .writing-header h2 {
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .writing-settings {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .writing-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .writing-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px var(--shadow-color);
            margin-bottom: 20px;
        }

        .writing-prompt {
            text-align: center;
            margin-bottom: 20px;
        }

        .writing-english {
            font-size: 1.5em;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .writing-romanization {
            font-size: 1.1em;
            color: var(--accent-primary);
            font-style: italic;
        }

        .writing-input-container {
            margin-bottom: 16px;
        }

        .writing-input {
            width: 100%;
            padding: 16px;
            font-size: 1.5em;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s;
        }

        .writing-input:focus {
            border-color: var(--accent-primary);
        }

        .writing-input.correct {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .writing-input.incorrect {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .writing-feedback {
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: none;
        }

        .writing-feedback.show {
            display: block;
        }

        .writing-feedback.correct {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        .writing-feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .writing-answer {
            font-size: 1.3em;
            margin-top: 8px;
        }

        .writing-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .writing-btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .writing-btn-check {
            background: var(--accent-primary);
            color: white;
        }

        .writing-btn-skip {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .writing-btn-next {
            background: #22c55e;
            color: white;
        }

        .writing-score {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .writing-list-selector {
            margin-bottom: 20px;
        }

        /* Writing Mode Tabs */
        .writing-mode-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .writing-mode-tab {
            padding: 10px 20px;
            border: 2px solid var(--border-color);
            background: var(--bg-card);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .writing-mode-tab:hover {
            border-color: var(--accent-primary);
        }

        .writing-mode-tab.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        /* Word Builder Section */
        .wordbuilder-section {
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }

        .wordbuilder-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .wordbuilder-header h2 {
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .wordbuilder-levels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .wordbuilder-level-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .wordbuilder-level-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .wordbuilder-level-card.active {
            border-color: var(--accent-primary);
            background: rgba(212, 163, 115, 0.15);
        }

        .wordbuilder-level-icon {
            font-size: 1.8em;
            margin-bottom: 6px;
        }

        .wordbuilder-level-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .wordbuilder-level-desc {
            font-size: 0.75em;
            color: var(--text-muted);
        }

        .wordbuilder-game-area {
            display: none;
        }

        .wordbuilder-game-area.active {
            display: block;
        }

        .wordbuilder-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 8px 12px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .wordbuilder-progress-text {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .wordbuilder-score {
            font-weight: 600;
            color: var(--accent-primary);
        }

        .wordbuilder-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 16px var(--shadow-color);
            margin-bottom: 20px;
        }

        .wordbuilder-target {
            text-align: center;
            margin-bottom: 24px;
        }

        .wordbuilder-english {
            font-size: 1.3em;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .wordbuilder-romanization {
            font-size: 1em;
            color: var(--text-muted);
            font-style: italic;
        }

        .wordbuilder-display {
            text-align: center;
            margin-bottom: 24px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wordbuilder-built-word {
            font-family: 'Sarabun', sans-serif;
            font-size: 2.5em;
            color: var(--text-primary);
            letter-spacing: 2px;
            padding: 12px 24px;
            background: var(--bg-secondary);
            border-radius: 12px;
            min-width: 120px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wordbuilder-built-word.correct {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-color);
        }

        .wordbuilder-built-word.incorrect {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-color);
        }

        .wordbuilder-step-info {
            text-align: center;
            margin-bottom: 16px;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .wordbuilder-choices {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .wordbuilder-choice {
            font-family: 'Sarabun', sans-serif;
            font-size: 1.6em;
            padding: 12px 16px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
            min-width: 60px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 0 0 calc(33.33% - 10px);
            max-width: calc(33.33% - 10px);
        }

        @media (max-width: 400px) {
            .wordbuilder-choice {
                flex: 0 0 calc(33.33% - 8px);
                max-width: calc(33.33% - 8px);
                font-size: 1.4em;
                padding: 10px 12px;
                min-width: 50px;
                min-height: 50px;
            }
        }

        .wordbuilder-choice:hover {
            border-color: var(--accent-primary);
            transform: scale(1.05);
        }

        .wordbuilder-choice:active {
            transform: scale(0.98);
        }

        .wordbuilder-choice.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .wordbuilder-choice.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error-color);
            color: var(--error-color);
        }

        .wordbuilder-choice.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        .wordbuilder-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
        }

        .wordbuilder-btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .wordbuilder-btn-next {
            background: var(--accent-primary);
            color: white;
            display: none;
        }

        .wordbuilder-btn-next:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .wordbuilder-btn-skip {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        .wordbuilder-btn-skip:hover {
            background: var(--border-color);
        }

        .wordbuilder-complete {
            text-align: center;
            padding: 40px 20px;
            display: none;
        }

        .wordbuilder-complete.show {
            display: block;
        }

        .wordbuilder-complete-icon {
            font-size: 4em;
            margin-bottom: 16px;
        }

        .wordbuilder-complete-title {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .wordbuilder-complete-score {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        .wordbuilder-btn-restart {
            background: var(--accent-primary);
            color: white;
            padding: 14px 32px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
        }

        .wordbuilder-start-btn {
            width: 100%;
            background: var(--accent-primary);
            color: white;
            padding: 14px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 16px;
        }

        .wordbuilder-start-btn:hover {
            opacity: 0.9;
        }

        .wordbuilder-level-badge {
            background: var(--bg-secondary);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .wordbuilder-built {
            font-family: 'Sarabun', sans-serif;
            font-size: 2.5em;
            color: var(--text-primary);
            min-height: 50px;
            display: inline;
        }

        .wordbuilder-cursor {
            font-size: 2.5em;
            color: var(--accent-primary);
            animation: blink 1s infinite;
            display: inline;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .wordbuilder-feedback {
            text-align: center;
            padding: 16px;
            border-radius: 12px;
            margin-top: 16px;
        }

        .wordbuilder-feedback.correct {
            background: rgba(34, 197, 94, 0.15);
            color: var(--success-color);
        }

        .wordbuilder-feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error-color);
        }

        .wordbuilder-feedback-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .wordbuilder-feedback-text {
            font-size: 1.1em;
            font-weight: 500;
        }

        .wordbuilder-back-btn {
            display: block;
            width: 100%;
            text-align: center;
            margin-top: 20px;
            padding: 12px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.95em;
        }

        .wordbuilder-back-btn:hover {
            color: var(--text-primary);
        }

        /* Reading Practice Section */
        .reading-section {
            padding: 20px;
            padding-top: 60px;
            max-width: 700px;
            margin: 0 auto;
        }

        .reading-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .reading-header h2 {
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .reading-levels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .reading-level-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .reading-level-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .reading-level-card.active {
            border-color: var(--accent-primary);
            background: rgba(74, 144, 226, 0.1);
        }

        .reading-level-icon {
            font-size: 1.8em;
            margin-bottom: 6px;
        }

        .reading-level-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95em;
        }

        .reading-level-desc {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .reading-story-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .reading-story-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reading-story-card:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .reading-story-icon {
            font-size: 1.5em;
        }

        .reading-story-info {
            flex: 1;
        }

        .reading-story-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .reading-story-subtitle {
            font-size: 0.85em;
            color: var(--text-muted);
        }

        .reading-story-arrow {
            color: var(--text-muted);
        }

        /* Story View */
        .reading-story-container {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        .reading-story-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .reading-story-title-main {
            font-size: 1.4em;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .reading-story-title-english {
            font-size: 0.95em;
            color: var(--text-muted);
        }

        .reading-options {
            margin: 12px 0;
            padding: 8px 12px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }
        
        .reading-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9em;
            color: var(--text-secondary);
        }
        
        .reading-toggle input {
            width: 16px;
            height: 16px;
            accent-color: var(--accent-primary);
        }

        .reading-story-text {
            font-size: 1.25em;
            line-height: 2.2;
            color: var(--text-primary);
        }
        
        .reading-story-text.with-romanization {
            line-height: 1.8;
        }
        
        .reading-sentence-block {
            display: inline-flex;
            flex-direction: column;
            align-items: flex-start;
            margin: 8px 4px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 8px;
            transition: background 0.2s;
            vertical-align: top;
        }
        
        .reading-sentence-block:hover {
            background: rgba(74, 144, 226, 0.1);
        }
        
        .reading-sentence-block:hover .reading-sentence {
            background: none;
        }
        
        .reading-roman-line {
            font-size: 0.7em;
            color: var(--text-muted);
            margin-bottom: 2px;
            line-height: 1.3;
        }

        .reading-sentence {
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .reading-sentence:hover {
            background: rgba(74, 144, 226, 0.1);
        }

        .reading-sentence.active,
        .reading-sentence-block.active {
            background: rgba(74, 144, 226, 0.15);
        }

        .reading-translation-box {
            background: var(--bg-secondary);
            border-left: 3px solid var(--accent-primary);
            padding: 12px 16px;
            margin: 16px 0;
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .reading-translation-box.show {
            display: block;
        }

        .reading-translation-thai {
            font-size: 1.1em;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .reading-translation-roman {
            font-size: 0.9em;
            color: var(--accent-primary);
            font-style: italic;
            margin-bottom: 6px;
        }

        .reading-translation-english {
            font-size: 0.95em;
            color: var(--text-secondary);
        }

        .reading-help-text {
            text-align: center;
            font-size: 0.85em;
            color: var(--text-muted);
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .reading-controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .reading-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .reading-story-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .reading-back-btn {
            padding: 12px 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .reading-back-btn:hover {
            background: var(--bg-card);
        }
        
        .reading-complete-btn {
            padding: 12px 24px;
            background: var(--accent-primary);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .reading-complete-btn:hover {
            opacity: 0.9;
            transform: scale(1.02);
        }
        
        .reading-story-card.completed {
            opacity: 0.7;
        }
        
        .reading-story-card.completed .reading-story-icon {
            filter: grayscale(0.5);
        }
        
        .reading-story-status {
            font-size: 0.75em;
            color: var(--success-color);
            margin-top: 4px;
        }

        .reading-btn-reveal {
            display: block;
            width: 100%;
            margin-top: 16px;
            padding: 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .reading-btn-reveal:hover {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .reading-btn-reveal.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .reading-full-translation {
            margin-top: 20px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border-left: 4px solid var(--accent-primary);
        }

        .reading-full-translation h4 {
            color: var(--text-primary);
            margin-bottom: 12px;
            font-size: 1em;
        }

        .reading-full-translation #fullTranslationText {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 0.95em;
        }
        /* Tone Rules Table */
        .tone-rules-table {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
        }

        .tone-rules-header, .tone-rules-row {
            display: grid;
            grid-template-columns: 70px repeat(5, 1fr);
            text-align: center;
        }

        .tone-rules-header {
            background: var(--bg-secondary);
            font-weight: 600;
            font-size: 0.85em;
            color: var(--text-primary);
        }

        .tone-rules-header > div, .tone-rules-row > div {
            padding: 10px 6px;
            border-bottom: 1px solid var(--border-color);
        }

        .tone-rules-row > div {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .tone-rules-row:last-child > div {
            border-bottom: none;
        }

        .tone-rules-row.mid > div:first-child { color: #3b82f6; }
        .tone-rules-row.high > div:first-child { color: #f97316; }
        .tone-rules-row.low > div:first-child { color: #22c55e; }

        /* Alphabet Flashcard Styles */
        .alphabet-flashcard-view {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .alphabet-flashcard-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 280px;
            margin: 0 auto;
            width: 100%;
            max-width: 320px;
        }

        .alphabet-card {
            width: 100%;
            max-width: 280px;
            height: 260px;
            background: var(--card-bg);
            border-radius: 24px;
            cursor: pointer;
            box-shadow: 0 8px 40px var(--shadow-color);
            transition: transform 0.15s ease-out;
            perspective: 1000px;
            transform-style: preserve-3d;
            position: relative;
        }

        .alphabet-card.flipped {
            transform: rotateY(180deg);
        }

        .alphabet-card-front, .alphabet-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 24px;
            padding: 20px;
        }

        .alphabet-card-back {
            transform: rotateY(180deg);
            background: var(--card-bg);
        }

        .alphabet-card-letter {
            font-size: 7em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .alphabet-card-letter-small {
            font-size: 3.5em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 8px;
        }

        .alphabet-card-roman {
            font-size: 1.1em;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .alphabet-card-class {
            font-size: 0.85em;
            font-weight: 600;
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 8px;
        }

        .alphabet-card-class.low { background: rgba(34, 197, 94, 0.2); color: #16a34a; }
        .alphabet-card-class.mid { background: rgba(59, 130, 246, 0.2); color: #2563eb; }
        .alphabet-card-class.high { background: rgba(249, 115, 22, 0.2); color: #ea580c; }

        .alphabet-card-example {
            font-size: 0.9em;
            color: var(--text-muted);
        }

        .alphabet-flashcard-nav {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        /* Alphabet Audio Button */
        .alpha-audio-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--bg-secondary);
            border: none;
            cursor: pointer;
            z-index: 20;
            padding: 8px;
            opacity: 0.5;
            transition: all 0.2s;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }

        .alpha-audio-btn:hover { 
            opacity: 0.8; 
        }
        
        .alpha-audio-btn:active { 
            transform: scale(1.1); 
        }

        .sorting-audio-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--bg-secondary);
            border: none;
            cursor: pointer;
            z-index: 5;
            padding: 8px;
            opacity: 0.5;
            transition: all 0.2s;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }

        .sorting-audio-btn:hover { 
            opacity: 0.8; 
        }
        
        .sorting-audio-btn:active { 
            transform: scale(1.1); 
        }

        .sorting-card {
            position: relative;
        }

        .quiz-audio-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            background: var(--bg-secondary);
            border: none;
            cursor: pointer;
            padding: 6px;
            opacity: 0.5;
            transition: all 0.2s;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            margin-left: 10px;
            color: var(--text-primary);
        }

        .quiz-audio-btn:hover { 
            opacity: 0.8; 
        }
        
        .quiz-audio-btn:active { 
            transform: scale(1.1); 
        }

        .expanded-letter-audio {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--bg-secondary);
            border: none;
            cursor: pointer;
            padding: 4px;
            opacity: 0.5;
            transition: all 0.2s;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }

        .expanded-letter-audio:hover { 
            opacity: 0.8; 
        }
        
        .expanded-letter-audio:active { 
            transform: scale(1.1); 
        }

        .expanded-letter-item {
            position: relative;
        }

        /* Clock Practice Styles */
        .clock-practice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
            padding: 20px;
        }
        
        .analog-clock {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 4px solid var(--accent-primary);
            position: relative;
            box-shadow: 0 4px 20px var(--shadow-color);
            margin: 0 auto;
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
        
        .analog-clock.clock-correct-glow {
            border-color: var(--success-color);
            box-shadow: 0 0 40px var(--glow-success), 0 0 80px var(--glow-success);
        }
        
        .analog-clock.clock-incorrect-glow {
            border-color: var(--error-color);
            box-shadow: 0 0 40px var(--glow-error), 0 0 80px var(--glow-error);
        }
        
        .clock-face {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: var(--accent-primary);
            border-radius: 50%;
            z-index: 10;
        }
        
        .clock-hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom center;
            border-radius: 4px;
        }
        
        .hour-hand {
            width: 4px;
            height: 50px;
            background: var(--text-primary);
            margin-left: -2px;
        }
        
        .minute-hand {
            width: 3px;
            height: 70px;
            background: var(--accent-primary);
            margin-left: -1.5px;
        }
        
        .clock-tick {
            position: absolute;
            top: 8px;
            left: 50%;
            width: 2px;
            height: 12px;
            background: var(--text-muted);
            transform-origin: center 82px;
        }
        
        .clock-tick.major {
            width: 3px;
            height: 16px;
            background: var(--text-primary);
            transform-origin: center 82px;
        }
        
        .clock-number {
            position: absolute;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .clock-practice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 16px;
        }
        
        .clock-period-indicator {
            text-align: center;
            padding: 6px 16px;
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .clock-time-display {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .clock-hint {
            color: var(--text-secondary);
            font-size: 0.95em;
            margin-bottom: 8px;
        }
        
        .clock-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            width: 100%;
            max-width: 350px;
        }
        
        .clock-option {
            padding: 16px 12px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .clock-option:hover {
            border-color: var(--accent-primary);
            background: var(--bg-card);
        }
        
        .clock-option.selected {
            border-color: var(--accent-primary);
            background: var(--bg-card);
        }
        
        .clock-option.correct {
            border-color: var(--success-color);
            background: var(--glow-success);
        }
        
        .clock-option.incorrect {
            border-color: var(--error-color);
            background: var(--glow-error);
        }
        
        .clock-option.correct-answer {
            border-color: var(--success-color);
            border-width: 3px;
        }
        
        .clock-option-thai {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .clock-option-roman {
            font-size: 0.85em;
            color: var(--text-secondary);
        }
        
        .clock-score {
            font-size: 0.95em;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .clock-feedback {
            text-align: center;
            padding: 12px 20px;
            border-radius: 12px;
            margin-top: 8px;
            font-weight: 500;
        }
        
        .clock-feedback.correct {
            background: rgba(16, 185, 129, 0.15);
            color: #065f46;
        }
        
        .clock-feedback.incorrect {
            background: rgba(239, 68, 68, 0.15);
            color: #991b1b;
        }
        
        [data-theme="dark"] .clock-feedback.correct {
            color: #34d399;
        }
        
        [data-theme="dark"] .clock-feedback.incorrect {
            color: #fca5a5;
        }
        
        .clock-hint {
            font-size: 0.85em;
            color: var(--text-muted);
            text-align: center;
            margin-top: 4px;
        }
        
        .clock-next-btn {
            margin-top: 16px;
        }
        
        .tap-to-continue {
            margin-top: 16px;
            font-size: 0.85em;
            color: var(--text-muted);
            text-align: center;
            animation: pulse-fade 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse-fade {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        .clock-practice-container.tap-to-advance {
            cursor: pointer;
        }
        
        /* Interactive Time Period List Styles */
        .time-periods-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .time-period-item {
            display: flex;
            flex-direction: column;
        }
        
        .time-period-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .time-period-row:hover {
            background: var(--bg-card);
        }
        
        .time-period-row.selected {
            background: var(--bg-card);
            border-radius: 10px 10px 0 0;
        }
        
        .time-period-row-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .time-period-row-emoji {
            font-size: 1.3em;
        }
        
        .time-period-row-hours {
            font-size: 0.95em;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .time-period-row-thai {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .time-period-detail {
            background: var(--bg-card);
            padding: 14px 16px;
            border-left: 4px solid;
            border-radius: 0 0 10px 10px;
            margin-top: -2px;
            animation: slideDown 0.2s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 300px; }
        }
        
        .time-period-pattern {
            font-size: 0.95em;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .time-period-examples {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .time-period-memory {
            font-size: 0.9em;
            color: var(--accent-primary);
            line-height: 1.5;
        }
        
        .time-period-note {
            margin-top: 10px;
            font-size: 0.9em;
            color: var(--error-color);
            font-weight: 500;
        }

        .practice-correct-answer {
            margin-top: 12px;
            font-size: 1.2em;
            color: var(--text-primary);
        }

        .practice-nav {
            margin-top: 20px;
            text-align: center;
            position: sticky;
            bottom: 10px;
            background: var(--bg-primary);
            padding: 10px 0;
        }

        .practice-nav .btn-action {
            min-width: 200px;
        }
        
        .practice-result.clickable {
            cursor: pointer;
        }
        
        .practice-result .tap-hint {
            font-size: 0.8em;
            opacity: 0.7;
            margin-top: 8px;
        }

        .practice-complete {
            text-align: center;
            padding: 40px 20px;
        }

        .practice-complete-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .practice-complete-title {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .practice-complete-score {
            font-size: 2em;
            color: var(--accent-primary);
            font-weight: 700;
            margin-bottom: 20px;
        }

        .practice-complete-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Romanization text */
        .romanization {
            font-size: 0.45em;
            color: var(--text-muted);
            margin-top: 8px;
            font-style: italic;
            font-family: 'Nunito', sans-serif;
            letter-spacing: 0.5px;
        }

        .card-back .romanization {
            color: rgba(255, 255, 255, 0.6);
        }

        .action-btn { width: 100%; margin-bottom: 10px; }

        .resume-modal-content { text-align: center; }

        .resume-modal-content p {
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-size: 1em;
            line-height: 1.5;
        }

        .resume-modal-content .session-info {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 14px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .resume-modal-content .session-info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .resume-modal-content .session-info-item:last-child { margin-bottom: 0; }
        .resume-modal-content .session-info-label { color: var(--text-secondary); }
        .resume-modal-content .session-info-value { font-weight: 600; color: var(--text-primary); }

        .resume-buttons { display: flex; gap: 10px; }
        .resume-buttons button { flex: 1; }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: var(--text-primary);
            color: var(--bg-primary);
            padding: 14px 28px;
            border-radius: 14px;
            font-size: 0.95em;
            font-weight: 500;
            z-index: 2000;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: none;
            box-shadow: 0 10px 40px var(--shadow-strong);
        }

        .toast.show { 
            opacity: 1; 
            transform: translateX(-50%) translateY(0);
        }

        /* Success/error toast variants */
        .toast.success {
            background: var(--success-color);
            color: white;
        }

        .toast.error {
            background: var(--error-color);
            color: white;
        }

        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .empty-state-icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .empty-state-title {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .empty-state-text {
            font-size: 0.95em;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--bg-secondary);
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 15;
            padding: 8px;
            opacity: 0.7;
            transition: all 0.2s;
            flex: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .favorite-btn:active { transform: scale(1.15); }
        .favorite-btn.active { 
            opacity: 1; 
            background: #fef3c7;
        }

        [data-theme="dark"] .favorite-btn.active {
            background: #3f3f46;
        }

        .audio-btn {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: var(--bg-secondary);
            border: none;
            font-size: 1.1em;
            cursor: pointer;
            z-index: 15;
            padding: 8px;
            opacity: 0.5;
            transition: all 0.2s;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-btn:hover { opacity: 0.8; }
        .audio-btn:active { transform: scale(1.1); }
        .audio-btn.speaking {
            opacity: 1;
            background: var(--accent-primary);
            animation: pulse-audio 0.8s ease-in-out infinite;
        }

        @keyframes pulse-audio {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 480px) {
            body { padding: 10px; }
            .container { padding: 0; }
            .theme-toggle {
                top: 48px;
                right: 10px;
                width: 32px;
                height: 32px;
                font-size: 1em;
            }
            .xp-header-display {
                top: 8px;
                right: 8px;
                padding: 3px 8px;
                font-size: 0.7em;
            }
            .main-menu-settings {
                top: 8px;
                left: 8px;
                padding: 8px 10px;
                font-size: 1em;
            }
            .back-to-menu {
                top: 8px;
                left: 52px;
                padding: 8px;
            }
            .back-to-menu svg {
                width: 24px;
                height: 24px;
            }
            .vocab-list-item {
                padding: 8px 10px;
                gap: 8px;
            }
            .vocab-thai {
                font-size: 1em;
                min-width: 50px;
            }
            .vocab-english {
                font-size: 0.85em;
                min-width: 80px;
            }
            .modal-content {
                padding: 15px;
                border-radius: 16px;
            }
            .modal-header h2 {
                font-size: 1.2em;
            }
        }

        @media (max-width: 360px) {
            body { padding: 8px; }
            .vocab-list-item {
                padding: 6px 8px;
                gap: 6px;
            }
            .vocab-thai {
                font-size: 0.95em;
            }
            .vocab-english {
                font-size: 0.8em;
            }
            .modal {
                padding: 10px;
            }
            .modal-content {
                padding: 12px;
                border-radius: 12px;
            }
        }

        @media (max-height: 600px) {
            .modal-content {
                max-height: calc(100vh - 20px);
                max-height: calc(100dvh - 20px);
            }
            .vocab-list-modal-content {
                max-height: calc(100vh - 20px);
                max-height: calc(100dvh - 20px);
            }
        }
        /* XP & Level System */
        .xp-header-display {
            display: flex;
            align-items: center;
            gap: 6px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 4px 10px;
            font-size: 0.75em;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .xp-header-display:hover {
            border-color: var(--accent-primary);
        }
        
        .xp-level {
            font-weight: 700;
            color: var(--accent-primary);
            min-width: 35px;
        }
        
        .xp-bar-container {
            width: 50px;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .xp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), #fbbf24);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .xp-text {
            color: var(--text-secondary);
            font-size: 0.85em;
            min-width: 55px;
            text-align: right;
        }
        
        .xp-streak {
            color: #f97316;
            font-weight: 600;
        }
        
        .xp-popup {
            position: fixed;
            top: 50px;
            right: 12px;
            background: linear-gradient(135deg, var(--accent-primary), #fbbf24);
            color: white;
            padding: 6px 14px;
            border-radius: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transform: translateY(-10px);
        }
        
        .xp-popup.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .xp-amount {
            font-size: 0.9em;
        }
        
        .xp-reason {
            font-size: 0.75em;
            opacity: 0.9;
        }
        
        .level-up-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .level-up-popup.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .level-up-content {
            background: var(--bg-primary);
            padding: 40px 50px;
            border-radius: 24px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 2px solid var(--border-color);
        }
        
        .level-up-popup.show .level-up-content {
            transform: scale(1);
        }
        
        .level-up-icon {
            font-size: 4em;
            margin-bottom: 10px;
        }
        
        .level-up-text {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .level-up-level {
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary), #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 10px 0 20px;
        }
        
        .level-up-close {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .level-up-close:hover {
            transform: scale(1.05);
        }
        
        /* XP Stats Modal */
        .xp-stats-modal .modal-content {
            max-width: 400px;
        }
        
        .xp-stats-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .xp-stats-level {
            font-size: 3em;
            font-weight: 700;
            color: var(--accent-primary);
        }
        
        .xp-stats-label {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .xp-progress-section {
            margin: 20px 0;
        }
        
        .xp-progress-bar {
            height: 12px;
            background: var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .xp-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), #fbbf24);
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .xp-progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: var(--text-secondary);
        }
        
        .xp-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }
        
        .xp-stat-box {
            background: var(--btn-bg);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }
        
        .xp-stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--accent-primary);
        }
        
        .xp-stat-label {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-top: 4px;
        }

    </style>
</head>
<body>
    <!-- Fixed Top Header Bar -->
    <div class="app-top-bar" id="appTopBar">
        <div class="app-top-bar-left">
            <button class="options-btn main-menu-settings" id="mainMenuSettingsBtn" onclick="optionsModal.classList.add('open')"></button>
            <button class="back-to-menu" id="backToMenu" title="Back" onclick="navigateBack()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5"></path>
                    <path d="M12 19l-7-7 7-7"></path>
                </svg>
            </button>
        </div>
        <div class="app-top-bar-right">
            <div class="xp-header-display" id="xpDisplay" onclick="showXPStatsModal()">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div class="main-menu" id="mainMenu">
        <div class="main-menu-content">
            <div class="main-menu-header">
                <div class="main-menu-icon"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAQABAADASIAAhEBAxEB/8QAHQABAAAHAQEAAAAAAAAAAAAAAAIDBAUGBwgBCf/EAFoQAQABAwIDBAMJBw8KBAYDAAABAgMEBREGEiEHMUFRE2FxCBQiMkKBkaGxM1JicnSywRUWIyQ1NjdTc3Wis8LR4SUmJ0NUY4KDkvAXRGRlRVWEk6PShZXx/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAECAwUGBAf/xAAzEQEAAgIBAwIFAgUEAgMAAAAAAQIDEQQFITESQRMiMlFxFDMjYYGR8AZCUqEksTTR8f/aAAwDAQACEQMRAD8A7FAVWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//2Q==" alt="Learn Thai" /></div>
                <h1>Learn Thai</h1>
                <p class="main-menu-subtitle">Master Thai vocabulary, grammar, and the alphabet</p>
            </div>
            
            <div class="main-menu-options">
                <div class="main-menu-card" onclick="startApp('flashcards')">
                    <div class="main-menu-card-icon"></div>
                    <div class="main-menu-card-title">Vocab Builder</div>
                    <div class="main-menu-card-desc">Learn 840+ words with spaced repetition flashcards</div>
                </div>
                
                <div class="main-menu-card" onclick="startApp('writing')">
                    <div class="main-menu-card-icon"></div>
                    <div class="main-menu-card-title">Spelling Practice</div>
                    <div class="main-menu-card-desc">Type Thai words from English prompts</div>
                </div>
                
                <div class="main-menu-card" onclick="startApp('reading')">
                    <div class="main-menu-card-icon"></div>
                    <div class="main-menu-card-title">Reading Practice</div>
                    <div class="main-menu-card-desc">Read stories at beginner to advanced levels</div>
                </div>
                
                <div class="main-menu-card" onclick="startApp('grammar')">
                    <div class="main-menu-card-icon"></div>
                    <div class="main-menu-card-title">Grammar & Culture</div>
                    <div class="main-menu-card-desc">21 interactive grammar and culture lessons</div>
                </div>
                
                <div class="main-menu-card" onclick="startApp('alphabet')">
                    <div class="main-menu-card-icon"></div>
                    <div class="main-menu-card-title">Alphabet Trainer</div>
                    <div class="main-menu-card-desc">Master 44 consonants with flashcards and games</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container" id="appContainer" style="display: none;">
        <div class="header">
            <div class="header-icon"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAQABAADASIAAhEBAxEB/8QAHQABAAAHAQEAAAAAAAAAAAAAAAIDBAUGBwgBCf/EAFoQAQABAwIDBAMJBw8KBAYDAAABAgMEBREGEiEHMUFRE2FxCBQiMkKBkaGxM1JicnSywRUWIyQ1NjdTc3Wis8LR4SUmJ0NUY4KDkvAXRGRlRVWEk6PShZXx/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAECAwUGBAf/xAAzEQEAAgIBAwIFAgUEAgMAAAAAAQIDEQQFITESQRMiMlFxFDMjYYGR8AZCUqEksTTR8f/aAAwDAQACEQMRAD8A7FAVWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//2Q==" alt="Learn Thai" /></div>
            <h1>Vocabulary Builder</h1>
        </div>
        <p class="subtitle">Tap to flip  Swipe right for   Swipe left for </p>

        <div class="list-selector-container">
            <select class="list-selector" id="listSelector">
                <option value="0">List 1: Core Vocabulary (200 words)</option>
            </select>
            <div id="listProgressDisplay" style="text-align: center; margin-top: 8px; font-size: 0.9em; color: var(--text-primary); font-weight: 500;"></div>
        </div>

        <div class="top-controls">
            <button class="options-btn" id="optionsBtn"></button>
        </div>

        <div class="mode-selector">
            <button class="mode-btn active" data-mode="all">All Cards</button>
            <button class="mode-btn" data-mode="review">To Review</button>
        </div>

        <div class="progress-container">
            <div class="progress-info">
                <span id="cardCounter">Card 1 of 200</span>
                <span id="progressPercent">1%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-milestones" id="progressMilestones">
                <div class="milestone" data-percent="0"></div>
                <div class="milestone" data-percent="25"></div>
                <div class="milestone" data-percent="50"></div>
                <div class="milestone" data-percent="75"></div>
                <div class="milestone" data-percent="100"></div>
            </div>
        </div>

        <div class="card-container">
            <button class="favorite-btn" id="favoriteBtn" title="Add to favorites"></button>
            <button class="audio-btn" id="audioBtn" title="Listen to pronunciation">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                </svg>
            </button>
            <div class="swipe-bar left" id="swipeBarLeft"></div>
            <div class="swipe-bar right" id="swipeBarRight"></div>
            <div class="swipe-hint left" id="swipeLeft"></div>
            <div class="swipe-hint right" id="swipeRight"></div>
            <div class="card" id="flashcard">
                <div class="card-face card-front">
                    <div class="mastery-indicator" id="masteryIndicator">New</div>
                    <div class="card-text" id="frontText"></div>
                    <div class="romanization" id="frontRomanization"></div>
                </div>
                <div class="card-face card-back">
                    <div class="card-text" id="backText"></div>
                    <div class="romanization" id="backRomanization"></div>
                </div>
            </div>
        </div>

        <div class="score-display">
            <span class="score-correct score-number" id="correctScore">0</span> correct  
            <span class="score-incorrect score-number" id="incorrectScore">0</span> incorrect
        </div>

        <div class="controls">
            <button class="btn-nav" id="prevBtn"> Prev</button>
            <button class="btn-flip" id="flipBtn">Flip</button>
            <button class="btn-nav" id="nextBtn">Next </button>
        </div>

        <div class="action-controls">
            <button class="btn-action" id="sentenceBtn"> Example</button>
        </div>

        <div class="sentence-example" id="sentenceExample">
            <div class="sentence-carousel" id="sentenceCarousel">
                <div class="sentence-carousel-inner" id="sentenceCarouselInner">
                    <!-- Slides populated by JS -->
                </div>
            </div>
            <div class="sentence-controls" id="sentenceControls">
                <button class="sentence-nav-btn" id="sentencePrevBtn"></button>
                <div class="sentence-dots" id="sentenceDots"></div>
                <button class="sentence-nav-btn" id="sentenceNextBtn"></button>
                <button class="sentence-speak-btn" id="sentenceSpeakBtn"></button>
            </div>
        </div>
    </div>

    <!-- Grammar Lessons Section -->
    <div class="grammar-section" id="grammarSection" style="display: none;">
        <div class="grammar-header">
            <h2>Grammar & Culture</h2>
            <p class="grammar-subtitle">Learn sentence structures through examples and practice</p>
        </div>
        
        <div class="grammar-lessons-list" id="grammarLessonsList">
            <!-- Lessons will be populated by JS -->
        </div>
            
            <!-- Active Lesson View -->
            <div class="grammar-lesson-view" id="grammarLessonView" style="display: none;">
                <button class="grammar-back-btn" id="grammarBackBtn" onclick="closeGrammarLesson()"> Back to Lessons</button>
                
                <div class="lesson-content" id="lessonContent">
                    <!-- Lesson content populated by JS -->
                </div>
                
                <div class="lesson-nav">
                    <button class="btn-nav" id="lessonPrevBtn" onclick="prevLessonStep()"> Previous</button>
                    <span class="lesson-progress" id="lessonProgress">1 / 4</span>
                    <button class="btn-nav" id="lessonNextBtn" onclick="nextLessonStep()">Next </button>
                </div>
            </div>
            
            <!-- Practice Mode View -->
            <div class="grammar-practice-view" id="grammarPracticeView" style="display: none;">
                <div class="practice-header">
                    <button class="grammar-back-btn" id="practiceBackBtn" onclick="closePractice()"> Back</button>
                    <div class="practice-title">Build Sentences</div>
                    <div class="practice-score" id="practiceScore">0 / 0</div>
                </div>
                
                <div class="practice-content" id="practiceContent">
                    <!-- Practice content populated by JS -->
                </div>
                
                <p class="tap-hint" id="practiceTapHint" style="display: none; text-align: center; color: var(--text-muted); margin-top: 16px;">Tap anywhere to continue</p>
            </div>
    </div>

    <!-- Alphabet Training Section -->
    <div class="alphabet-section" id="alphabetSection" style="display: none;">
        <div class="alphabet-header">
            <h2>Alphabet Trainer</h2>
            <p class="alphabet-subtitle">Learn Thai consonants, vowels, and tone rules</p>
        </div>
            
            <!-- Alphabet Mode Selection -->
            <div class="alphabet-modes" id="alphabetModes">
                <div class="alphabet-mode-card" onclick="startAlphabetMode('recognize')">
                    <div class="alphabet-mode-icon"></div>
                    <div class="alphabet-mode-title">Recognition</div>
                    <div class="alphabet-mode-desc">See letter  pick the sound</div>
                </div>
                <div class="alphabet-mode-card" onclick="startAlphabetFlashcards()">
                    <div class="alphabet-mode-icon"></div>
                    <div class="alphabet-mode-title">Flashcards</div>
                    <div class="alphabet-mode-desc">Swipe to learn letters</div>
                </div>
                <div class="alphabet-mode-card" onclick="startClassSorting()">
                    <div class="alphabet-mode-icon"></div>
                    <div class="alphabet-mode-title">Tone Class</div>
                    <div class="alphabet-mode-desc">Sort into Low/Mid/High</div>
                </div>
                <div class="alphabet-mode-card" onclick="startFontMatching()">
                    <div class="alphabet-mode-icon"></div>
                    <div class="alphabet-mode-title">Font Matching</div>
                    <div class="alphabet-mode-desc">Match traditional  modern</div>
                </div>
                <div class="alphabet-mode-card" onclick="showAlphabetChart()">
                    <div class="alphabet-mode-icon"></div>
                    <div class="alphabet-mode-title">Reference</div>
                    <div class="alphabet-mode-desc">View full alphabet chart</div>
                </div>
            </div>
            
            <!-- Alphabet Progress Overview -->
            <div class="alphabet-progress-overview" id="alphabetProgressOverview">
                <h3>Your Progress</h3>
                <div class="alphabet-progress-stats">
                    <div class="alphabet-stat">
                        <span class="alphabet-stat-num" id="consonantsMastered">0</span>
                        <span class="alphabet-stat-label">/ 44 Consonants</span>
                    </div>
                </div>
            </div>
            
            <!-- Alphabet Flashcard View -->
            <div class="alphabet-flashcard-view" id="alphabetFlashcardView" style="display: none;">
                <div class="alphabet-practice-header">
                    <button class="grammar-back-btn" id="alphabetFlashcardBackBtn"> Back</button>
                    <div class="alphabet-practice-mode">Flashcards</div>
                    <div class="alphabet-practice-score" id="alphabetFlashcardScore">0 / 44</div>
                </div>
                
                <p class="subtitle" style="margin: 10px 0;">Tap to flip  Swipe right for   Swipe left for </p>
                
                <div class="alphabet-flashcard-wrapper">
                    <div class="swipe-bar left" id="alphaSwipeBarLeft"></div>
                    <div class="swipe-bar right" id="alphaSwipeBarRight"></div>
                    <div class="swipe-hint left" id="alphaSwipeLeft"></div>
                    <div class="swipe-hint right" id="alphaSwipeRight"></div>
                    <div class="alphabet-card" id="alphabetCard">
                        <button class="alpha-audio-btn" id="alphaFlashcardAudioBtn" onclick="event.stopPropagation(); speakCurrentAlphabetCard()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                            </svg>
                        </button>
                        <div class="alphabet-card-front" id="alphabetCardFront">
                            <div class="alphabet-card-letter" id="alphabetCardLetter"></div>
                        </div>
                        <div class="alphabet-card-back" id="alphabetCardBack">
                            <div class="alphabet-card-letter-small" id="alphabetCardLetterBack"></div>
                            <div class="alphabet-card-roman" id="alphabetCardRoman">g gi</div>
                            <div class="alphabet-card-class" id="alphabetCardClass">Mid Class</div>
                            <div class="alphabet-card-example" id="alphabetCardExample"> (chicken)</div>
                        </div>
                    </div>
                </div>
                
                <div class="score-display">
                    <span class="score-correct score-number" id="alphaCorrectScore">0</span> correct  
                    <span class="score-incorrect score-number" id="alphaIncorrectScore">0</span> incorrect
                </div>
                
                <div class="alphabet-flashcard-nav">
                    <button class="btn-nav" onclick="prevAlphabetFlashcard()"> Prev</button>
                    <span id="alphabetFlashcardCounter">1 / 44</span>
                    <button class="btn-nav" onclick="nextAlphabetFlashcard()">Next </button>
                </div>
            </div>
            
            <!-- Alphabet Practice View -->
            <div class="alphabet-practice-view" id="alphabetPracticeView" style="display: none;">
                <div class="alphabet-practice-header">
                    <button class="grammar-back-btn" id="alphabetBackBtn"> Back</button>
                    <div class="alphabet-practice-mode" id="alphabetPracticeMode">Recognition</div>
                    <div class="alphabet-practice-score" id="alphabetScore">0 / 0</div>
                </div>
                
                <div class="alphabet-practice-content" id="alphabetPracticeContent">
                    <!-- Practice content populated by JS -->
                </div>
            </div>
            
            <!-- Class Sorting View -->
            <div class="class-sorting-view" id="classSortingView" style="display: none;">
                <div class="alphabet-practice-header">
                    <button class="grammar-back-btn" id="classSortingBackBtn"> Back</button>
                    <div class="alphabet-practice-mode">Sort by Class</div>
                    <div class="alphabet-practice-score" id="classSortingRemaining">44 left</div>
                </div>
                
                <div class="sorting-card-area">
                    <div class="sorting-card" id="sortingCard">
                        <button class="sorting-audio-btn" onclick="event.stopPropagation(); speakCurrentSortingCard()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                            </svg>
                        </button>
                        <div class="sorting-card-letter" id="sortingCardLetter"></div>
                        <div class="sorting-card-roman" id="sortingCardRoman">g gi</div>
                    </div>
                    <div class="sorting-instruction">Tap the correct class bin</div>
                </div>
                
                <div class="class-bins">
                    <div class="class-bin low" onclick="sortToClass('low')">
                        <div class="class-bin-header">
                            <span class="class-bin-label">Low</span>
                            <div class="class-bin-header-right">
                                <span class="class-bin-count" id="lowBinCount">0</span>
                                <button class="class-bin-view-btn" onclick="event.stopPropagation(); expandBin('low')" title="View sorted"></button>
                            </div>
                        </div>
                        <div class="class-bin-letters" id="lowBinLetters"></div>
                    </div>
                    <div class="class-bin mid" onclick="sortToClass('mid')">
                        <div class="class-bin-header">
                            <span class="class-bin-label">Mid</span>
                            <div class="class-bin-header-right">
                                <span class="class-bin-count" id="midBinCount">0</span>
                                <button class="class-bin-view-btn" onclick="event.stopPropagation(); expandBin('mid')" title="View sorted"></button>
                            </div>
                        </div>
                        <div class="class-bin-letters" id="midBinLetters"></div>
                    </div>
                    <div class="class-bin high" onclick="sortToClass('high')">
                        <div class="class-bin-header">
                            <span class="class-bin-label">High</span>
                            <div class="class-bin-header-right">
                                <span class="class-bin-count" id="highBinCount">0</span>
                                <button class="class-bin-view-btn" onclick="event.stopPropagation(); expandBin('high')" title="View sorted"></button>
                            </div>
                        </div>
                        <div class="class-bin-letters" id="highBinLetters"></div>
                    </div>
                </div>
                
                <div class="class-bin-expanded" id="classBinExpanded" style="display: none;">
                    <div class="class-bin-expanded-header">
                        <span id="expandedBinTitle">Low Class</span>
                        <button class="close-btn" onclick="closeExpandedBin()"></button>
                    </div>
                    <div class="class-bin-expanded-content" id="expandedBinContent"></div>
                </div>
            </div>
            
            <!-- Alphabet Chart View -->
            <div class="alphabet-chart-view" id="alphabetChartView" style="display: none;">
                <button class="grammar-back-btn" id="alphabetChartBackBtn"> Back</button>
                <div class="alphabet-chart-content" id="alphabetChartContent">
                    <!-- Chart populated by JS -->
                </div>
            </div>
            
            <!-- Font Styles View -->
            <div class="font-styles-view" id="fontStylesView" style="display: none;">
                <button class="grammar-back-btn" id="fontStylesBackBtn"> Back</button>
                
                <div class="font-styles-header">
                    <h3>Thai Font Styles</h3>
                    <p style="color: var(--text-muted); margin-top: 8px;">Learn to read traditional (/looped) vs modern (/loopless) Thai fonts</p>
                </div>
                
                <!-- Mode Selection -->
                <div class="font-styles-modes">
                    <button class="font-mode-btn active" data-mode="compare" onclick="switchFontMode('compare')"> Compare</button>
                    <button class="font-mode-btn" data-mode="match" onclick="switchFontMode('match')"> Match Game</button>
                </div>
                
                <!-- Compare Mode -->
                <div id="fontCompareMode">
                    <div class="font-compare-info">
                        <div class="font-info-card">
                            <h4 style="font-family: 'Noto Sans Thai Looped', serif;"> (Traditional/Looped)</h4>
                            <p>Classic Thai script with loops on consonants. Used in formal documents, books, and traditional contexts.</p>
                            <div class="font-sample" style="font-family: 'Noto Sans Thai Looped', serif; font-size: 2em;"></div>
                        </div>
                        <div class="font-info-card">
                            <h4 style="font-family: 'Noto Sans Thai', sans-serif;"> (Modern/Loopless)</h4>
                            <p>Modern minimalist style without loops. Common on signs, apps, websites, and casual text. Clean geometric shapes.</p>
                            <div class="font-sample" style="font-family: 'Noto Sans Thai', sans-serif; font-size: 2em;"></div>
                        </div>
                    </div>
                    
                    <h4 style="margin: 24px 0 16px; color: var(--text-primary);">Full Consonant Comparison</h4>
                    <div class="font-compare-chart" id="fontCompareChart">
                        <!-- Populated by JS -->
                    </div>
                </div>
                
                <!-- Match Game Mode -->
                <div id="fontMatchMode" style="display: none;">
                    <div class="font-match-score">
                        Score: <span id="fontMatchScore">0</span> / <span id="fontMatchTotal">0</span>
                    </div>
                    
                    <div class="font-match-prompt">
                        <p>Match the traditional letter to its modern form:</p>
                        <div class="font-match-letter" id="fontMatchLetter" style="font-family: 'Noto Sans Thai Looped', serif;"></div>
                    </div>
                    
                    <div class="font-match-choices" id="fontMatchChoices">
                        <!-- Choices populated by JS -->
                    </div>
                    
                    <div class="font-match-feedback" id="fontMatchFeedback" style="display: none;">
                        <div id="fontMatchFeedbackText"></div>
                    </div>
                </div>
            </div>
            
            <!-- Font Matching (Two Column) View -->
            <div class="font-matching-view" id="fontMatchingView" style="display: none;">
                <button class="grammar-back-btn" id="fontMatchingBackBtn"> Back</button>
                
                <div class="font-matching-header">
                    <h3> Font Matching</h3>
                    <p style="color: var(--text-muted); margin-top: 8px;">Match traditional (looped)  modern (loopless)</p>
                    <p id="fontMatchingBestDisplay" style="color: var(--accent-primary); margin-top: 4px; font-size: 0.9em;"></p>
                </div>
                
                <div class="font-matching-score">
                    Matched: <span id="fontMatchingScore">0</span> / <span id="fontMatchingTotal">6</span>
                </div>
                
                <div class="font-matching-game" id="fontMatchingGame">
                    <div class="font-matching-column" id="fontMatchingLeft">
                        <!-- Traditional letters -->
                    </div>
                    <div class="font-matching-column" id="fontMatchingRight">
                        <!-- Modern letters -->
                    </div>
                </div>
                
                <div class="font-matching-result" id="fontMatchingResult" style="display: none;">
                    <div class="font-matching-result-icon" id="fontMatchingResultIcon"></div>
                    <div class="font-matching-result-text" id="fontMatchingResultText">Great job!</div>
                    <button class="wordbuilder-btn" onclick="startFontMatching()">Play Again</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Spelling Practice Section -->
    <div class="writing-section" id="writingSection" style="display: none;">
        <div class="writing-header">
            <h2> Spelling Practice</h2>
            <p style="color: var(--text-muted);">Practice spelling Thai words</p>
        </div>
        
        <!-- Mode Toggle -->
        <div class="writing-mode-tabs">
            <button class="writing-mode-tab active" data-mode="wordBuilder" onclick="switchWritingMode('wordBuilder')"> Word Builder</button>
            <button class="writing-mode-tab" data-mode="freeType" onclick="switchWritingMode('freeType')"> Free Type</button>
        </div>
        
        <!-- Word Builder Mode (now first/default) -->
        <div id="wordBuilderMode">
            <!-- Level Selection -->
            <div id="wordBuilderLevelSelect">
                <div class="wordbuilder-levels">
                    <div class="wordbuilder-level-card active" data-level="beginner" onclick="selectWordBuilderLevel('beginner', this)">
                        <div class="wordbuilder-level-icon"></div>
                        <div class="wordbuilder-level-title">Beginner</div>
                        <div class="wordbuilder-level-desc">2-3 character words</div>
                    </div>
                    <div class="wordbuilder-level-card" data-level="intermediate" onclick="selectWordBuilderLevel('intermediate', this)">
                        <div class="wordbuilder-level-icon"></div>
                        <div class="wordbuilder-level-title">Intermediate</div>
                        <div class="wordbuilder-level-desc">4-5 character words</div>
                    </div>
                    <div class="wordbuilder-level-card" data-level="advanced" onclick="selectWordBuilderLevel('advanced', this)">
                        <div class="wordbuilder-level-icon"></div>
                        <div class="wordbuilder-level-title">Advanced</div>
                        <div class="wordbuilder-level-desc">6+ character words</div>
                    </div>
                </div>
                
                <div class="writing-settings" style="margin-bottom: 16px;">
                    <label class="writing-toggle">
                        <input type="checkbox" id="wbShowEnglish" checked>
                        <span>Show English</span>
                    </label>
                    <label class="writing-toggle">
                        <input type="checkbox" id="wbShowRomanization" checked>
                        <span>Show romanization</span>
                    </label>
                </div>
                
                <button class="wordbuilder-start-btn" onclick="startWordBuilder()">Start Practice </button>
            </div>
            
            <!-- Word Builder Game View -->
            <div id="wordBuilderGameView" style="display: none;">
                <div class="wordbuilder-progress">
                    <div class="wordbuilder-score">Score: <span id="wbCorrect">0</span> / <span id="wbTotal">0</span></div>
                    <div class="wordbuilder-level-badge" id="wbLevelBadge">Beginner</div>
                </div>
                
                <div class="wordbuilder-card">
                    <div class="wordbuilder-target">
                        <div class="wordbuilder-english" id="wbEnglish">hello</div>
                        <div class="wordbuilder-romanization" id="wbRomanization">s-wt-dii</div>
                    </div>
                    
                    <div class="wordbuilder-display">
                        <div class="wordbuilder-built" id="wbBuilt"></div>
                        <div class="wordbuilder-cursor">|</div>
                    </div>
                    
                    <div class="wordbuilder-step-info" id="wbStepInfo">
                        Choose the first character:
                    </div>
                    
                    <div class="wordbuilder-choices" id="wbChoices">
                        <!-- Choices populated by JS -->
                    </div>
                    
                    <div class="wordbuilder-feedback" id="wbFeedback" style="display: none;">
                        <div class="wordbuilder-feedback-icon" id="wbFeedbackIcon"></div>
                        <div class="wordbuilder-feedback-text" id="wbFeedbackText">Correct!</div>
                    </div>
                </div>
                
                <div class="wordbuilder-controls">
                    <button class="wordbuilder-btn" id="wbSkipBtn" onclick="skipWord()">Skip Word</button>
                    <button class="wordbuilder-btn" id="wbNextBtn" onclick="nextWordBuilderWord()" style="display: none;">Next Word </button>
                </div>
                
                <p class="tap-hint" id="wbTapHint" style="display: none; text-align: center; color: var(--text-muted); margin-top: 12px;">Tap anywhere to continue</p>
                
                <button class="wordbuilder-back-btn" onclick="backToWordBuilderLevels()"> Back to Levels</button>
            </div>
        </div>
        
        <!-- Free Type Mode -->
        <div id="freeTypeMode" style="display: none;">
            <!-- Level Selection for Free Type -->
            <div class="wordbuilder-levels" style="margin-bottom: 20px;">
                <div class="wordbuilder-level-card active" data-level="beginner" onclick="selectFreeTypeLevel('beginner', this)">
                    <div class="wordbuilder-level-icon"></div>
                    <div class="wordbuilder-level-title">Beginner</div>
                    <div class="wordbuilder-level-desc">Simple words</div>
                </div>
                <div class="wordbuilder-level-card" data-level="intermediate" onclick="selectFreeTypeLevel('intermediate', this)">
                    <div class="wordbuilder-level-icon"></div>
                    <div class="wordbuilder-level-title">Intermediate</div>
                    <div class="wordbuilder-level-desc">Common words</div>
                </div>
                <div class="wordbuilder-level-card" data-level="advanced" onclick="selectFreeTypeLevel('advanced', this)">
                    <div class="wordbuilder-level-icon"></div>
                    <div class="wordbuilder-level-title">Advanced</div>
                    <div class="wordbuilder-level-desc">Complex words</div>
                </div>
            </div>
            
            <div class="writing-settings">
                <label class="writing-toggle">
                    <input type="checkbox" id="freeTypeShowEnglish" checked onchange="updateFreeTypeDisplay()">
                    <span>Show English</span>
                </label>
                <label class="writing-toggle">
                    <input type="checkbox" id="freeTypeShowRomanization" checked onchange="updateFreeTypeDisplay()">
                    <span>Show romanization</span>
                </label>
            </div>
            
            <div class="writing-card">
                <div class="writing-prompt">
                    <div class="writing-english" id="writingEnglish">Loading...</div>
                    <div class="writing-romanization" id="writingRomanization"></div>
                </div>
                
                <div class="writing-input-container">
                    <input type="text" class="writing-input" id="writingInput" placeholder="..." autocomplete="off">
                </div>
                
                <div class="writing-feedback" id="writingFeedback">
                    <div id="writingFeedbackText"></div>
                    <div class="writing-answer" id="writingCorrectAnswer"></div>
                </div>
                
                <div class="writing-controls">
                    <button class="writing-btn writing-btn-skip" id="writingSkipBtn">Skip</button>
                    <button class="writing-btn writing-btn-check" id="writingCheckBtn">Check</button>
                    <button class="writing-btn writing-btn-next" id="writingNextBtn" style="display: none;">Next </button>
                </div>
            </div>
            
            <div class="writing-score">
                Score: <span id="writingCorrect">0</span> / <span id="writingTotal">0</span>
            </div>
        </div>
    </div>

    <!-- Reading Practice Section -->
    <div class="reading-section" id="readingSection" style="display: none;">
        <div class="reading-header">
            <h2> Reading Practice</h2>
            <p style="color: var(--text-muted);">Click any sentence to see its translation</p>
        </div>
        
        <div id="readingLevelSelect">
            <div class="reading-levels">
                <div class="reading-level-card active" data-level="beginner" onclick="selectReadingLevel('beginner', this)">
                    <div class="reading-level-icon"></div>
                    <div class="reading-level-title">Beginner</div>
                    <div class="reading-level-desc">Spaced words</div>
                </div>
                <div class="reading-level-card" data-level="intermediate" onclick="selectReadingLevel('intermediate', this)">
                    <div class="reading-level-icon"></div>
                    <div class="reading-level-title">Intermediate</div>
                    <div class="reading-level-desc">Spaced words</div>
                </div>
                <div class="reading-level-card" data-level="advanced" onclick="selectReadingLevel('advanced', this)">
                    <div class="reading-level-icon"></div>
                    <div class="reading-level-title">Advanced</div>
                    <div class="reading-level-desc">Natural text</div>
                </div>
            </div>
            
            <div class="reading-story-list" id="readingStoryList">
                <!-- Stories populated by JS -->
            </div>
        </div>
        
        <div id="readingStoryView" style="display: none;">
            <div class="reading-story-container">
                <div class="reading-story-header">
                    <div class="reading-story-title-main" id="storyTitleThai"></div>
                    <div class="reading-story-title-english" id="storyTitleEnglish"></div>
                </div>
                
                <div class="reading-options">
                    <label class="reading-toggle">
                        <input type="checkbox" id="showInlineRoman" onchange="toggleInlineRomanization()">
                        <span>Show romanization above Thai</span>
                    </label>
                </div>
                
                <div class="reading-story-text" id="readingStoryText">
                    <!-- Story text populated by JS -->
                </div>
                
                <div class="reading-translation-box" id="readingTranslationBox">
                    <div class="reading-translation-thai" id="transBoxThai"></div>
                    <div class="reading-translation-roman" id="transBoxRoman"></div>
                    <div class="reading-translation-english" id="transBoxEnglish"></div>
                </div>
                
                <div class="reading-help-text">
                     Click any sentence to see romanization and translation
                </div>
                
                <button class="reading-btn-reveal" id="revealStoryBtn" onclick="toggleRevealStory()"> Reveal Full Translation</button>
                
                <div class="reading-full-translation" id="readingFullTranslation" style="display: none;">
                    <h4>Full English Translation</h4>
                    <div id="fullTranslationText"></div>
                </div>
            </div>
            
            <div class="reading-story-actions">
                <button class="reading-back-btn" onclick="backToStoryList()"> Back to Stories</button>
                <button class="reading-complete-btn" id="markStoryCompleteBtn" onclick="markCurrentStoryComplete()"> Mark Complete</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-btn" id="closeSettings"></button>
            </div>
            <div class="modal-section">
                <h3>Import Flashcards</h3>
                <div class="file-input-wrapper">
                    <input type="file" id="csvFileInput" accept=".csv" />
                    <label for="csvFileInput" class="file-input-label"> Choose CSV File</label>
                </div>
                <div class="import-info">CSV format: First column = Thai, Second column = English (with header row)</div>
            </div>
            <div class="modal-section">
                <h3>Data Management</h3>
                <button class="btn-action action-btn" id="exportBtn" onclick="exportProgress()"> Export Progress</button>
                <button class="btn-action action-btn" id="resetBtn" onclick="resetProgress()"> Reset All Progress</button>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal" id="statsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Statistics</h2>
                <button class="close-btn" id="closeStats"></button>
            </div>
            <div class="modal-section">
                <h3>Current List Progress</h3>
                <div id="currentListStats"></div>
            </div>
            <div class="modal-section">
                <h3>All Lists</h3>
                <div id="allListsStats"></div>
            </div>
            <div class="modal-section">
                <h3>Session Stats</h3>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="sessionCorrect">0</div>
                        <div class="stat-label">Correct</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="sessionIncorrect">0</div>
                        <div class="stat-label">Incorrect</div>
                    </div>
                </div>
            </div>
            <div class="modal-section" style="font-size: 0.85em; color: var(--text-secondary); line-height: 1.5;">
                <strong>Learning Algorithm:</strong> A word is marked as "learned" after getting it correct 3 times in a row. If not reviewed within 7 days, it needs to be relearned.
            </div>
        </div>
    </div>
    
    <!-- XP Stats Modal -->
    <div class="modal xp-stats-modal" id="xpStatsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Progress</h2>
                <button class="close-btn" onclick="document.getElementById('xpStatsModal').classList.remove('open')"></button>
            </div>
            <div class="xp-stats-header">
                <div class="xp-stats-level" id="xpStatsLevel">1</div>
                <div class="xp-stats-label">Level</div>
            </div>
            <div class="xp-progress-section">
                <div class="xp-progress-text">
                    <span id="xpProgressCurrent">0 XP</span>
                    <span id="xpProgressNext">100 XP to next level</span>
                </div>
                <div class="xp-progress-bar">
                    <div class="xp-progress-fill" id="xpProgressFill" style="width: 0%"></div>
                </div>
            </div>
            <div class="xp-stats-grid">
                <div class="xp-stat-box">
                    <div class="xp-stat-value" id="xpStatTotal">0</div>
                    <div class="xp-stat-label">Total XP</div>
                </div>
                <div class="xp-stat-box">
                    <div class="xp-stat-value" id="xpStatToday">0</div>
                    <div class="xp-stat-label">Today's XP</div>
                </div>
                <div class="xp-stat-box">
                    <div class="xp-stat-value" id="xpStatStreak">0</div>
                    <div class="xp-stat-label"> Day Streak</div>
                </div>
                <div class="xp-stat-box">
                    <div class="xp-stat-value" id="xpStatBestStreak">0</div>
                    <div class="xp-stat-label">Best Streak</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Modal -->
    <div class="modal" id="resumeModal">
        <div class="modal-content resume-modal-content">
            <div class="modal-header" style="justify-content: center;">
                <h2>Session in Progress</h2>
            </div>
            <p>You have an unfinished session. Would you like to resume or start fresh?</p>
            <div class="session-info" id="sessionInfoDisplay">
                <div class="session-info-item">
                    <span class="session-info-label">List:</span>
                    <span class="session-info-value" id="resumeListName">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Progress:</span>
                    <span class="session-info-value" id="resumeProgress">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Correct:</span>
                    <span class="session-info-value score-correct" id="resumeCorrect">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Incorrect:</span>
                    <span class="session-info-value score-incorrect" id="resumeIncorrect">-</span>
                </div>
            </div>
            <div class="resume-buttons">
                <button class="btn-action" id="startFreshBtn" onclick="document.getElementById('resumeModal').classList.remove('open'); startFresh();">Start Fresh</button>
                <button class="btn-flip" id="resumeSessionBtn" onclick="document.getElementById('resumeModal').classList.remove('open'); resumeSession();">Resume</button>
            </div>
        </div>
    </div>

    <!-- Completion Modal -->
    <div class="modal" id="completionModal">
        <div class="modal-content resume-modal-content">
            <div class="modal-header">
                <h2> List Complete!</h2>
                <button class="close-btn" id="closeCompletion"></button>
            </div>
            <p>Great job! You've finished all the cards in this list.</p>
            <div class="session-info">
                <div class="session-info-item">
                    <span class="session-info-label">Cards reviewed:</span>
                    <span class="session-info-value" id="completionTotal">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Correct:</span>
                    <span class="session-info-value score-correct" id="completionCorrect">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Incorrect:</span>
                    <span class="session-info-value score-incorrect" id="completionIncorrect">-</span>
                </div>
                <div class="session-info-item">
                    <span class="session-info-label">Accuracy:</span>
                    <span class="session-info-value" id="completionAccuracy">-</span>
                </div>
            </div>
            <div class="resume-buttons" style="flex-direction: column; gap: 10px;">
                <button class="btn-flip" id="restartListBtn"> Start Again</button>
                <button class="btn-action" id="reviewHardestBtn"> Review Hardest Cards</button>
            </div>
        </div>
    </div>

    <!-- Options Panel -->
    <div class="modal" id="optionsModal">
        <div class="modal-content options-modal-content">
            <div class="modal-header">
                <h2>Menu</h2>
                <button class="close-btn" id="closeOptions"></button>
            </div>
            
            <!-- Study Settings Section -->
            <div class="menu-section">
                <div class="menu-section-title">Study Settings</div>
                
                <div class="option-group">
                    <div class="option-label">List Organization</div>
                    <div class="option-toggle-group">
                        <button class="option-toggle-btn active" data-view="themed">Themed</button>
                        <button class="option-toggle-btn" data-view="mixed">Mixed</button>
                    </div>
                </div>
                
                <div class="option-group" id="mixedListSizeGroup" style="display: none;">
                    <div class="option-label">Cards per Mixed List</div>
                    <div class="mixed-list-size-row">
                        <input type="number" id="mixedListSizeInput" class="mixed-list-size-input" min="10" max="500" value="200">
                        <button class="btn-reshuffle" id="reshuffleMixedBtn"> Reshuffle</button>
                    </div>
                    <div class="option-hint">Enter a number and click Reshuffle to reorganize mixed lists</div>
                </div>
                
                <div class="option-group">
                    <div class="option-label">Card Direction</div>
                    <div class="option-toggle-group">
                        <button class="option-toggle-btn active" data-direction="thai">Thai  English</button>
                        <button class="option-toggle-btn" data-direction="english">English  Thai</button>
                    </div>
                </div>
                
                <div class="option-group">
                    <div class="option-row">
                        <div class="option-label">Show Romanization</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="romanizationToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="option-group">
                    <div class="option-row">
                        <div class="option-label">Auto-play Audio</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoPlayToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions Section -->
            <div class="menu-section">
                <div class="menu-section-title">Quick Actions</div>
                
                <div class="option-group">
                    <button class="menu-btn" id="viewVocabListBtn"> View Vocabulary List</button>
                </div>
                
                <div class="option-group">
                    <button class="menu-btn" id="viewStatsBtn"> View Progress & Stats</button>
                </div>
                
                <div class="option-group">
                    <button class="menu-btn" id="importExportBtn"> Import / Export Data</button>
                </div>
                
                <div class="option-group">
                    <button type="button" class="menu-btn menu-btn-danger" id="restoreDefaultsBtn"> Restore Default Settings</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vocab List Modal -->
    <div class="modal" id="vocabListModal">
        <div class="modal-content vocab-list-modal-content">
            <div class="modal-header">
                <h2>Vocabulary List</h2>
                <button class="close-btn" id="closeVocabList"></button>
            </div>
            <div class="vocab-list-controls">
                <select id="vocabListFilter" class="list-selector" style="margin-bottom: 10px;">
                    <option value="all">All Words</option>
                    <option value="current">Current List</option>
                </select>
            </div>
            <div class="vocab-list-container" id="vocabListContainer"></div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- Reset Confirmation Modal -->
    <div class="modal" id="resetConfirmModal">
        <div class="modal-content" style="max-width: 340px; text-align: center;">
            <div style="font-size: 3em; margin-bottom: 16px;"></div>
            <h2 style="margin-bottom: 12px; color: #dc2626;">Complete Reset</h2>
            <p style="margin-bottom: 20px; color: var(--text-secondary); line-height: 1.5;">
                This will erase <strong>all</strong> learning progress, favorites, and settings.<br><br>
                <strong>This cannot be undone.</strong>
            </p>
            <div style="display: flex; gap: 12px;">
                <button class="btn-secondary" id="cancelResetBtn" style="flex: 1; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); font-weight: 600; cursor: pointer;">Cancel</button>
                <button class="btn-danger" id="confirmResetBtn" style="flex: 1; padding: 12px; border-radius: 8px; border: none; background: #dc2626; color: white; font-weight: 600; cursor: pointer;">Reset Everything</button>
            </div>
        </div>
    </div>

    <script>
        // App settings
        let showRomanization = localStorage.getItem('thaiFlashcardsRomanization') === 'true';
        let smartReviewMode = localStorage.getItem('thaiFlashcardsSmartReview') === 'true';
        
        // ============================================
        // XP & LEVELING SYSTEM
        // ============================================
        
        // XP rewards for different activities (reduced values)
        const XP_REWARDS = {
            // Flashcards - small amounts per card
            flashcardEasy: 2,
            flashcardMedium: 3,
            flashcardHard: 5,
            flashcardNewWord: 10,
            
            // Grammar
            grammarStepComplete: 5,
            grammarLessonComplete: 25,
            grammarPracticeCorrect: 3,
            
            // Reading
            readingStoryBeginner: 15,
            readingStoryIntermediate: 25,
            readingStoryAdvanced: 40,
            
            // Spelling
            wordBuilderCorrect: 4,
            freeTypeCorrect: 5,
            
            // Alphabet
            alphabetRecognitionCorrect: 2,
            alphabetFlashcardReview: 1,
            classSortingCorrect: 3,
            fontMatchCorrect: 3,
            fontMatchingGameComplete: 15,
            
            // Streaks
            dailyStreakBonus: 5, // multiplied by streak count (max 50)
            streakMilestone7: 25,
            streakMilestone30: 100,
            streakMilestone100: 250
        };
        
        // Level thresholds
        // Designed so level 2 is achievable in 1-2 sessions to give early motivation
        // Then progression slows down for sustained engagement
        function getXPForLevel(level) {
            if (level <= 1) return 0;
            if (level === 2) return 200;      // ~1-2 sessions (early win)
            if (level === 3) return 600;      // ~3-4 days
            if (level === 4) return 1200;     // ~1 week
            if (level === 5) return 2000;     // ~2 weeks
            // After level 5, exponential growth
            return Math.floor(2000 * Math.pow(1.4, level - 5));
        }
        
        // Calculate level from total XP
        function getLevelFromXP(totalXP) {
            let level = 1;
            while (getXPForLevel(level + 1) <= totalXP) {
                level++;
                // Safety cap at level 50
                if (level >= 50) break;
            }
            return level;
        }
        
        // Load XP data from localStorage
        function loadXPData() {
            const defaultData = {
                totalXP: 0,
                todayXP: 0,
                lastActiveDate: null,
                streak: 0,
                longestStreak: 0,
                xpHistory: [], // Array of {date, xp} for the last 30 days
                achievements: []
            };
            
            try {
                const saved = localStorage.getItem('thaiFlashcardsXP');
                if (saved) {
                    const data = JSON.parse(saved);
                    return { ...defaultData, ...data };
                }
            } catch (e) {
                console.error('Error loading XP data:', e);
            }
            return defaultData;
        }
        
        // Save XP data
        function saveXPData(data) {
            localStorage.setItem('thaiFlashcardsXP', JSON.stringify(data));
        }
        
        // Get today's date string
        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }
        
        // Check and update streak
        function updateStreak(xpData) {
            const today = getTodayString();
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];
            
            if (xpData.lastActiveDate === today) {
                // Already active today, no change
                return false;
            } else if (xpData.lastActiveDate === yesterdayStr) {
                // Consecutive day - increment streak
                xpData.streak++;
                if (xpData.streak > xpData.longestStreak) {
                    xpData.longestStreak = xpData.streak;
                }
                xpData.lastActiveDate = today;
                xpData.todayXP = 0;
                return true; // New day, award streak bonus
            } else if (xpData.lastActiveDate !== today) {
                // Streak broken or first day
                if (xpData.lastActiveDate) {
                    xpData.streak = 1; // Reset streak
                } else {
                    xpData.streak = 1; // First day
                }
                xpData.lastActiveDate = today;
                xpData.todayXP = 0;
                return true; // New day
            }
            return false;
        }
        
        // Award XP
        function awardXP(amount, reason) {
            if (amount <= 0) return;
            
            let xpData = loadXPData();
            const isNewDay = updateStreak(xpData);
            
            // Award streak bonus if it's a new day
            if (isNewDay && xpData.streak > 1) {
                const streakBonus = Math.min(xpData.streak * XP_REWARDS.dailyStreakBonus, 100);
                xpData.totalXP += streakBonus;
                xpData.todayXP += streakBonus;
                showXPPopup(streakBonus, ` ${xpData.streak} Day Streak!`);
                
                // Streak milestones
                if (xpData.streak === 7) {
                    xpData.totalXP += XP_REWARDS.streakMilestone7;
                    setTimeout(() => showXPPopup(XP_REWARDS.streakMilestone7, ' 7 Day Streak!'), 1500);
                } else if (xpData.streak === 30) {
                    xpData.totalXP += XP_REWARDS.streakMilestone30;
                    setTimeout(() => showXPPopup(XP_REWARDS.streakMilestone30, ' 30 Day Streak!'), 1500);
                } else if (xpData.streak === 100) {
                    xpData.totalXP += XP_REWARDS.streakMilestone100;
                    setTimeout(() => showXPPopup(XP_REWARDS.streakMilestone100, ' 100 Day Streak!'), 1500);
                }
            }
            
            const oldLevel = getLevelFromXP(xpData.totalXP);
            
            xpData.totalXP += amount;
            xpData.todayXP += amount;
            
            // Update history
            const today = getTodayString();
            const historyEntry = xpData.xpHistory.find(h => h.date === today);
            if (historyEntry) {
                historyEntry.xp += amount;
            } else {
                xpData.xpHistory.push({ date: today, xp: amount });
                // Keep only last 30 days
                if (xpData.xpHistory.length > 30) {
                    xpData.xpHistory.shift();
                }
            }
            
            const newLevel = getLevelFromXP(xpData.totalXP);
            
            saveXPData(xpData);
            updateXPDisplay();
            
            // Only show XP popup for significant achievements (bonus XP with reason)
            // Regular small XP gains just update the bar silently
            if (reason && amount >= 15) {
                showXPPopup(amount, reason);
            }
            
            // Level up!
            if (newLevel > oldLevel) {
                setTimeout(() => showLevelUpPopup(newLevel), 800);
            }
        }
        
        // Show XP gain popup - smaller, subtle design
        function showXPPopup(amount, reason) {
            const popup = document.createElement('div');
            popup.className = 'xp-popup';
            popup.innerHTML = `<span class="xp-amount">+${amount} XP</span>${reason ? `<span class="xp-reason">${reason}</span>` : ''}`;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.classList.add('show'), 10);
            setTimeout(() => {
                popup.classList.remove('show');
                setTimeout(() => popup.remove(), 300);
            }, 2000);
        }
        
        // Show level up popup
        function showLevelUpPopup(newLevel) {
            const popup = document.createElement('div');
            popup.className = 'level-up-popup';
            popup.innerHTML = `
                <div class="level-up-content">
                    <div class="level-up-icon"></div>
                    <div class="level-up-text">Level Up!</div>
                    <div class="level-up-level">Level ${newLevel}</div>
                    <button class="level-up-close" onclick="this.parentElement.parentElement.remove()">Continue</button>
                </div>
            `;
            document.body.appendChild(popup);
            setTimeout(() => popup.classList.add('show'), 10);
        }
        
        // Update XP display in header
        function updateXPDisplay() {
            const xpData = loadXPData();
            const level = getLevelFromXP(xpData.totalXP);
            const currentLevelXP = getXPForLevel(level);
            const nextLevelXP = getXPForLevel(level + 1);
            const progressXP = xpData.totalXP - currentLevelXP;
            const neededXP = nextLevelXP - currentLevelXP;
            const progressPercent = Math.min((progressXP / neededXP) * 100, 100);
            
            const xpDisplay = document.getElementById('xpDisplay');
            if (xpDisplay) {
                xpDisplay.innerHTML = `
                    <div class="xp-level">Lv.${level}</div>
                    <div class="xp-bar-container">
                        <div class="xp-bar-fill" style="width: ${progressPercent}%"></div>
                    </div>
                    <div class="xp-text">${xpData.totalXP.toLocaleString()} XP</div>
                    ${xpData.streak > 0 ? `<div class="xp-streak">${xpData.streak}</div>` : ''}
                `;
            }
        }
        
        // Initialize XP system on load
        function initXPSystem() {
            const xpData = loadXPData();
            updateStreak(xpData);
            saveXPData(xpData);
            updateXPDisplay();
        }
        
        // Show XP stats modal
        function showXPStatsModal() {
            const xpData = loadXPData();
            const level = getLevelFromXP(xpData.totalXP);
            const currentLevelXP = getXPForLevel(level);
            const nextLevelXP = getXPForLevel(level + 1);
            const progressXP = xpData.totalXP - currentLevelXP;
            const neededXP = nextLevelXP - currentLevelXP;
            const progressPercent = Math.min((progressXP / neededXP) * 100, 100);
            
            document.getElementById('xpStatsLevel').textContent = level;
            document.getElementById('xpProgressCurrent').textContent = `${progressXP.toLocaleString()} XP`;
            document.getElementById('xpProgressNext').textContent = `${(neededXP - progressXP).toLocaleString()} XP to level ${level + 1}`;
            document.getElementById('xpProgressFill').style.width = `${progressPercent}%`;
            document.getElementById('xpStatTotal').textContent = xpData.totalXP.toLocaleString();
            document.getElementById('xpStatToday').textContent = xpData.todayXP.toLocaleString();
            document.getElementById('xpStatStreak').textContent = xpData.streak;
            document.getElementById('xpStatBestStreak').textContent = xpData.longestStreak;
            
            document.getElementById('xpStatsModal').classList.add('open');
        }
        
        // ============================================
        // END XP SYSTEM
        // ============================================
        
        // Romanization lookup table (Thai to phonetic)
        const romanization = {
            // Animals & Nature
            "": "ma", "": "maew", "": "nk", "": "bplaa", "": "chang",
            "": "ling", "": "nguu", "": "wua", "": "mu", "": "gi",
            "": "bpt", "": "gp", "": "yung", "": "mt", "": "pi-sa",
            "": "dtn-mai", "": "dk-mai", "": "bai-mai", "": "ya",
            "": "bpa", "": "puu-ko", "": "me-nam", "": "t-lee",
            "": "g", "": "hat", "": "nam-dtk",
            
            // Food & Drinks
            "": "kao", "": "ki", "": "nom", "": "k-nm-bpang",
            "": "na", "": "gng", "": "bpuu", "": "mk",
            "": "pn-l-mai", "": "pk", "": "m-mang", "": "glay",
            "": "sm", "": "dtaeng-moo", "": "-ngn", "": "mang-kt",
            "": "t-rian", "": "lam-yai", "": "m-naao", "": "m-ka-tet",
            "": "dtaeng-gwaa", "": "g-lm", "": "kae-rt",
            "": "prk", "": "gr-tiam", "": "ha-hm",
            "": "gla", "": "nam-dtaan", "": "nam", "": "chaa",
            "": "gaa-fae", "": "bia", "": "lo", "": "nam-pn-l-mai",
            "": "nam-bplo", "": "nam-keng",
            
            // Cooking & Taste
            "": "tam-aa-han", "": "tt", "": "dtm", "": "nng",
            "": "yang", "": "p", "": "p-sm", "": "hn", "": "bprung",
            "": "san-p-sm", "": "sut", "": "wt-t-dp",
            "": "krang-tet", "": "krang-bprung",
            "": "rt-chat", "": "pt", "": "wan", "": "bprao",
            "": "kem", "": "km", "": "jt", "": "-ri",
            "": "mn", "": "hm", "": "grp", "": "nm",
            "": "keng", "": "nao", "": "st-mi", "": "sa",
            
            // Family & People
            "": "p", "": "me", "": "pi", "": "nng",
            "": "luk", "": "luk-chaai", "": "luk-sao",
            "": "bpu", "": "ya", "": "dtaa", "": "yaai",
            "": "lung", "": "bpa", "": "na", "": "aa",
            "": "sa-mii", "": "pan-r-yaa", "": "faen",
            "": "pan", "": "pan-ban", "": "l-wek-ban", "": "kruu",
            "": "nk-rian", "": "m", "": "p-yaa-baan",
            "": "p-nk-ngaan", "": "jo-naai", "": "luk-ka",
            "": "pi-chaai", "": "pi-sao", "": "nng-chaai",
            "": "nng-sao", "": "bpu-ya", "": "dtaa-yaai",
            "": "lan", "": "pr",
            
            // Body & Health
            "": "ha", "": "pm", "": "na", "": "dtaa", "": "hu",
            "": "j-muk", "": "bpak", "": "fan", "": "ln",
            "": "k", "": "li", "": "ken", "": "m", "": "nu",
            "": "lng", "": "tng", "": "ka", "": "tao", "": "ko",
            "": "ha-jai", "": "lat", "": "gr-duk", "": "pu",
            "": "bpay", "": "bpat", "": "ai", "": "jaam", "": "ki",
            "": "jp", "": "bat-ple", "": "pe", "": "hai",
            "": "dtrat", "": "rk-sa", "": "yaa", "": "roong-p-yaa-baan",
            "": "k-gam-lang-gaai", "": "pk-pn",
            
            // Numbers & Time
            "": "nng", "": "sng", "": "sam", "": "si", "": "ha",
            "": "hk", "": "jt", "": "bpet", "": "go", "": "sp",
            "": "ri", "": "pan", "": "mn", "": "sen", "": "lan",
            "": "wan", "": "sp-daa", "": "dan", "": "bpii",
            "": "wan-ni", "": "prng-ni", "": "ma-waan",
            "": "chao", "": "bai", "": "yen", "": "kn",
            "": "tang", "": "tang-kn", "": "cha-moong",
            "": "naa-tii", "": "w-naa-tii", "": "naa-l-gaa",
            "": "wan-jan", "": "wan-ang-kaan", "": "wan-pt", "": "wan-p-r-ht",
            "": "wan-sk", "": "wan-so", "": "wan-aa-tt",
            "": "lew", "": "yang", "": "gam-lang", "": "j", "": "ki",
            "": "dtrong-wee-laa", "": "sai", "": "chi-wee-laa",
            "": "bpr-yt-wee-laa", "": "sa-wee-laa",
            
            // Colors & Descriptions
            "": "si", "": "si-daeng", "": "si-kao", "": "si-nam-ngn",
            "": "si-lang", "": "si-kao", "": "si-dam", "": "si-chom-puu",
            "": "si-mang", "": "si-tao", "": "si-sm", "": "si-fa",
            "": "say", "": "na-rk",
            "": "ch-lat", "": "s-at", "": "sk-g-bprk",
            "": "yi", "": "lk", "": "sung", "": "dta",
            "": "yaao", "": "sn", "": "gwang", "": "kep",
            "": "na", "": "baang", "": "go", "": "mi",
            "": "keng-raeng", "": "n-ae", "": "an", "": "pm",
            "": "paeng", "": "tuk", "": "nao", "": "rn",
            "": "rat-reo", "": "cha", "": "ngai", "": "yak",
            "": "mt", "": "s-wang", "": "ngap", "": "sang-dang",
            "": "s-dak", "": "yng-yak", "": "m-sm",
            "": "km-ka", "": "an-dt-raai", "": "bplt-pai",
            "": "rap-ri",
            
            // Emotions & Feelings
            "": "nay", "": "ba", "": "dtn-dtn",
            "": "gang-won", "": "pn-klaai", "": "bpr-lat-jai",
            "": "pt-wng", "": "puum-jai", "": "p-aai",
            "": "grot", "": "sa-jai", "": "dii-jai",
            "": "dtk-jai", "": "glua", "": "s-baai",
            "": "lam-bak", "": "s-nk", "": "na-ba",
            "": "na-glua", "": "hu", "": "m", "": "gr-hai",
            "": "kt-tng", "": "rk", "": "glat",
            "": "chp", "": "mi-chp", "": "wng", "": "cha",
            "": "sng-si", "": "sp-sn", "": "k-yn",
            "": "ki-gat", "": "ruay", "": "jon", "": "mii-ch-sang",
            
            // Basic Actions
            "": "dn", "": "wng", "": "gr-dot", "": "nng",
            "": "yn", "": "nn", "": "dtn", "": "dtn-nn",
            "": "glp", "": "maa", "": "bpai", "": "ko", "": "k",
            "": "kn", "": "long", "": "pan", "": "yt", "": "r",
            "": "rm", "": "jp", "": "bpt", "": "bpt", "": "chi",
            "": "s", "": "kai", "": "hi", "": "rp", "": "sng",
            "": "duu", "": "hn", "": "mng", "": "di-yin",
            "": "fang", "": "chim", "": "dom", "": "sm-pt",
            "": "kt", "": "ru-sk", "": "ko-jai", "": "jam",
            "": "lm", "": "rip", "": "la-cha", "": "reo",
            
            // Communication
            "": "put", "": "kui", "": "put-kui", "": "kui-gan",
            "": "lo", "": "-t-baai", "": "tam", "": "dtp",
            "": "bk", "": "chi-jaeng", "": "dtan", "": "sn-yaa",
            "": "goo-hk", "": "ne-nam", "": "dtt-dt",
            "": "bpr-gat", "": "an", "": "kan",
            "": "s-wt-dii", "": "kp-kun", "": "k-tot",
            "": "mi-bpen-rai", "": "chay-di-mi",
            "": "mi-ko-jai", "": "put-cha-cha",
            
            // Education & Learning
            "": "sn", "": "rian", "": "jt", "": "sk-sa",
            "": "sp", "": "dtk", "": "tp-tuan",
            "": "p-yaa-yaam", "": "fk-fn",
            "": "tam-ngaan-ban", "": "gaan-ban", "": "bp-rin-yaa",
            "": "wt-t-yaa-lai", "": "m-ha-wt-t-yaa-lai",
            "": "roong-rian", "": "hng-rian", "": "hng-s-mt",
            "": "s-nam-gii-laa", "": "nng-s",
            "": "bpak-gaa", "": "din-s", "": "gr-dat",
            "": "gan-grai", "": "gaao", "": "kwaam-ru",
            "": "bpr-sp-gaan",
            
            // Home & Furniture
            "": "ban", "": "hng", "": "hng-nn",
            "": "hng-krua", "": "hng-nam",
            "": "hng-nng-ln", "": "bpr-dtuu",
            "": "na-dtang", "": "pn", "": "p-nng",
            "": "lng-kaa", "": "ban-dai", "": "go-i",
            "": "dt", "": "dtiang", "": "dtu", "": "dtu-yen",
            "": "ae", "": "pt-lom", "": "gun-jae",
            "": "pa-hm", "": "mn", "": "ti-nn",
            "": "pa-bpuu-ti-nn", "": "gr-jk",
            "": "pa-cht-dtua",
            
            // Clothing & Accessories
            "": "sa", "": "gaang-geeng", "": "gr-bproong",
            "": "rng-tao", "": "tng-tao", "": "mak",
            "": "wen-dtaa", "": "gr-bpo", "": "rm",
            "": "wen", "": "si", "": "si-tng", "": "pt",
            "": "dteng-dtua", "": "sk", "": "km-kt",
            "": "dtak", "": "naa-l-gaa-k-m", "": "tk",
            
            // Travel & Transport
            "": "rt-tek-si", "": "rt-dtu", "": "rt-bt",
            "": "rt-fai", "": "rt-fai-fa", "": "ra",
            "": "krang-bin", "": "s-nam-bin",
            "": "s-ta-nii", "": "bpai-rt-mee",
            "": "dta", "": "s-dta", "": "kn-rt",
            "": "long-rt", "": "bpai-ni", "": "tng",
            "": "lao-sai", "": "lao-kwa",
            "": "dtrong-bpai", "": "cha-ni",
            "": "reo-ni", "": "ti-ni", "": "ti-nn",
            "": "gli", "": "glai", "": "lng", "": "pen-ti",
            "": "ti-yu", "": "t-nn", "": "si",
            "": "s-paan", "": "roong-raem", "": "hng-pk",
            "": "jng", "": "yk-lk", "": "chk-in",
            "": "chk-ao", "": "nng-s-dn-taang",
            "": "wii-sa",
            
            // Places & Sights
            "": "wt", "": "pr-pt-t-rup", "": "p-pt-t-pan",
            "": "san-sa-taa-r-n", "": "san-st",
            "": "dt-lat", "": "ran-ka",
            "": "hang-sp-p-sn-ka", "": "ran-aa-han",
            "": "t-naa-kaan", "": "p-ft", "": "b-r-st",
            
            // Weather & Seasons
            "": "aa-gat", "": "fn", "": "fn-dtk", "": "det",
            "": "lom", "": "mek", "": "fa", "": "paa-y",
            "": "fa-pa", "": "fa-rng", "": "nam-tam",
            "": "chn", "": "heng", "": "mk",
            "": "aa-gat-dii", "": "aa-gat-ye",
            "": "rn-jt", "": "nao-jt", "": "p-ao",
            "": "r-duu", "": "r-duu-fn", "": "r-duu-rn",
            "": "r-duu-nao", "": "un-h-puum", "": "ong-sa",
            "": "lok", "": "duang-aa-tt", "": "duang-jan",
            "": "daao", "": "tng-fa",
            
            // Shopping & Money
            "": "raa-kaa", "": "ngn", "": "bat",
            "": "lek-ngn", "": "bt-kree-dt",
            "": "ngn-st", "": "bai-st", "": "kng-kwn",
            "": "kng-ti-r-lk", "": "to-ri",
            "": "paeng-gn-bpai", "": "lt-ni",
            "": "hng-nam-yu-ni", "": "mee-nuu",
            "": "sng-aa-han", "": "chk-bin", "": "tp",
            "": "mi-ao-nam-dtaan", "": "mi-ao-nam-keng",
            "": "bpr-yt", "": "lak", "": "dtt-sn-jai",
            "": "beng-bpan", "": "bprap-tap",
            
            // Work & Business
            "": "tam-ngaan", "": "ngaan", "": "aa-chip",
            "": "ngn-dan", "": "bpr-chum",
            "": "nt-mai", "": "sm-pat", "": "s-mk",
            "": "sen", "": "pim", "": "sng-ii-meo",
            "": "too", "": "raai-ngaan", "": "ek-g-san",
            "": "sm-nao", "": "dtn-ch-bp", "": "bep-fm",
            "": "bai-s-mk", "": "bt-bpr-chaa-chon",
            "": "bai-kp-ki", "": "bpr-gan", "": "paa-si",
            "": "ka-chi-jai", "": "ngp-bpr-maan",
            "": "gam-rai", "": "kat-tun", "": "ni",
            "": "dk-ba", "": "ban-chii", "": "ban-chii-t-naa-kaan",
            "": "fak", "": "fak-ngn", "": "tn-ngn", 
            "": "oon", "": "oon-ngn",
            "": "gu-ngn", "": "jai",
            
            // Technology
            "": "too-r-tt", "": "too-r-sp",
            "": "m-t", "": "km-piw-dt",
            "": "in-t-nt", "": "r-ht", "": "k-kwaam",
            "": "rup-pap", "": "w-dii-oo", "": "pleeng",
            "": "nng-s-pim", "": "nt-dt-y-san",
            "": "bet-dt-ri", "": "na-j", "": "bplk",
            "": "s-wt", "": "fai-fa", "": "lt-fai",
            "": "tian", "": "fai-chai", "": "glng",
            "": "j", "": "lam-poong", "": "hu-fang",
            "": "mo", "": "kii-bt", "": "krang-pim",
            "": "geem", "": "ep", "": "wp-sai",
            "": "wai-fai", "": "sn-yaan", "": "daao-lot",
            "": "p-lot", "": "bpt-krang",
            "": "bpt-krang", "": "chat", "": "tai-rup",
            "": "ban-tk", "": "lp", "": "kt-lk",
            "": "kn-ha",
            
            // Entertainment & Sports
            "": "kao", "": "kot-s-naa", "": "l-kn",
            "": "nng", "": "pap-p-yon", "": "gaa-dtuun", "": "raai-gaan",
            "": "chng", "": "rng", "": "dtn", "": "ln",
            "": "ch-n", "": "keng-kn", "": "keng", "": "gii-laa",
            "": "ft-bn", "": "bat-gt-bn",
            "": "wn-lee-bn", "": "wai-nam",
            "": "bpn-jk-gr-yaan", "": "dtii-gp",
            "": "muay", "": "yoo-k", "": "nat", "": "s-bpaa",
            
            // Personal Care
            "": "dtt-pm", "": "tam-pm", "": "ym-pm",
            "": "goon", "": "dteng-na", "": "taa-lp-s-dtk",
            "": "nam-hm", "": "s-bu", "": "chaem-puu",
            "": "kriim", "": "yaa-si-fan", "": "bpraeng-si-fan",
            "": "wi", "": "dai-bpo-pm",
            "": "krang-goon-nat",
            "": "gan-grai-dtt-lp", "": "lang",
            "": "sm", "": "dtriam-dtua", "": "bplan-bplaeng",
            
            // Household Chores
            "": "gwat", "": "cht", "": "kt",
            "": "lang-jaan", "": "tam-kwaam-s-at",
            "": "jt-hng", "": "bpluk", "": "rt-nam",
            "": "gp-gao", "": "kt", "": "sang",
            "": "tam-laai", "": "ge-ki", "": "bprp-bprung",
            "": "pt-t-naa", "": "k-bep", "": "wat",
            "": "r-baai",
            
            // Abstract & Concepts
            "": "chok-dii", "": "chok-rai", "": "kwaam-fn",
            "": "kwaam-jing", "": "kwaam-lp", "": "bpan-ha",
            "": "kam-dtp", "": "kam-tam", "": "het-pn",
            "": "kwaam-kt", "": "kwaam-sm-rt",
            "": "kwaam-lm-lo", "": "oo-gat", "": "taang",
            "": "taang-lak", "": "bpo-mai", "": "pen",
            "": "gt", "": "gt-mai", "": "st-t",
            "": "na-ti", "": "ae-t",
            
            // Physical Actions
            "": "kn", "": "ym", "": "hi-ym",
            "": "gp", "": "tng", "": "ha", "": "pp", "": "j",
            "": "yek", "": "ruam", "": "pm", "": "lt",
            "": "k-yai", "": "y", "": "dng", "": "dan",
            "": "yk", "": "waang", "": "kwen", "": "puk",
            "": "ge", "": "h", "": "pp", "": "dtt",
            
            // New verbs
            "": "ao", "": "yak", "": "dtng", "": "di",
            "": "bpen", "": "mii", "": "yu", "": "tam",
            "": "gin", "": "dm", "": "nn-lp",
            "": "chay", "": "lng", "": "ru",
            
            // Question words & expressions
            "": "-rai", "": "tam-mai", "": "yang-rai",
            "": "yang-ngai", "": "ma-ri", "": "gi",
            "": "krai", "": "di-li", "": "mi-ao",
            "": "mi-ru", "": "mi-mii", "": "st",
            "": "dao", "": "dao-gn",
            
            // Time expressions
            "": "dtn-ni", "": "gn", "": "lng",
            "": "bi", "": "s-m", "": "mi-ki",
            "": "tan-tii", "": "ik", "": "to-nn",
            "": "lew-g",
            
            // Grammar & Particles
            "": "dte", "": "le", "": "r", "": "pr",
            "": "ta", "": "g", "": "day", "": "li",
            "": "n", "": "krp", "": "k", "": "k",
            "": "mi", "": "s", "": "r",
            "": "chn", "": "pm", "": "kun", "": "ko",
            "": "rao", "": "man", "": "ni", "": "nn",
            "": "non", "": "kng", "": "ti",
            "": "mi", "": "chi", "": "mi-chi",
            "": "p", "": "mak", "": "ni",
            "": "tk", "": "baang", "": "ke", "": "eeng",
            
            // Misc
            "": "pe",
            
            // Common Phrases
            "": "s-baai dii mi",
            "": "s-baai dii",
            "": "mi s-baai",
            "": "mi j gan naan",
            "": "yin-dii ti di ru-jk",
            "": "gin kao r yang",
            "": "gin lew",
            "": "yang mi gin",
            "": "wa ngai",
            "": "bpen yang-ngai bang",
            "": "lew j gan",
            "": "j gan prng-ni",
            "": "chok dii n",
            "": "yin-dii day",
            "": "sk-sn wan-gt",
            "": "k hi chok dii",
            "": "lew dte kun",
            "": "chang man t",
            "": "jing r",
            "": "mi mii taang",
            "": "ne-nn",
            "": "ko-jai lew",
            "": "r sk kru",
            "": "dtaam s-baai",
            "": "chn",
            "": "k-tot tii",
            "": "mi dtng hang",
            "": "r-wang n",
            "": "nay mi",
            "": "hu mi",
            "": "rn mak",
            "": "fn dtk lew",
            "": "ao -rai dii",
            "": "-ri mak",
            "": "to mi",
            "": "s-nk mi",
            "": "mi di j gan naan li",
            "": "kt-tng n",
            "": "j gan mi n",
            "": "tam ngai dii",
            "": "mi dtng greeng-jai",
            "": "rang lk",
            "": "glp ban gn n",
            "": "wi j gan n",
            "": "r-wang dtuua day n",
            "": "pk-pn hi dii n",
            "": "hai reo reo n",
            "": "dn-taang bplt-pai",
            "": "ya lm n",
            "": "ko-jai mi",
            "": "put ik tii di mi",
            "": "mi bpen rai",
            "": "ngn g di",
            "": "ne-jai r",
            "": "tam di",
            
            // Development & International
            "": "gaan-pt-t-naa",
            "": "gaan-pt-t-naa ti yng-yn",
            "": "kwaam yng-yn",
            "": "s-h-bpr-chaa-chat",
            "": "ong-gn",
            "": "ong-gn r-wang bpr-tet",
            "": "bpo-mai",
            "": "n-yoo-baai",
            "": "kroong-gaan",
            "": "kwaam ram-m",
            "": "kwaam chay-la",
            "": "ngn-tun",
            "": "ngp-bpr-maan",
            "": "kwaam yak-jon",
            "": "kwaam lam-lm",
            "": "sng-wet-lm",
            "": "gaan-bplan-bplaeng s-pap puum-aa-gat",
            "": "p-lang-ngaan mn-wian",
            "": "p-lang-ngaan s-at",
            "": "gaan-sk-sa",
            "": "sa-taa-r-n-sk",
            "": "st-t-m-nt-s-y-chon",
            "": "kwaam to-tiam",
            "": "kwaam to-tiam taang pet",
            "": "chum-chon",
            "": "bpr-chaa-chon",
            "": "pu mii san-di san-sa",
            "": "pak bpr-chaa-sng-kom",
            "": "pak ek-g-chon",
            "": "pak rt",
            "": "rt-t-baan",
            "": "gr-suang",
            "": "bpr-tet gam-lang pt-t-naa",
            "": "bpr-tet pt-t-naa lew",
            "": "sp-p-yaa-gn",
            "": "sp-p-yaa-gn tam-m-chat",
            "": "nam s-at",
            "": "s-ka-p-baan",
            "": "kroong-sang pn-tan",
            "": "gaan-bpr-chum",
            "": "k-dtk-long",
            "": "sn-t-sn-yaa",
            "": "gaan-jee-r-jaa",
            "": "dtuua-chi-wt",
            "": "gaan-dtt-dtaam",
            "": "gaan-bpr-mn-pn",
            "": "raai-ngaan",
            "": "k-muun",
            "": "w-jai",
            "": "n-wt-dt-gam",
            "": "tk-noo-loo-yii",
            "": "d-j-tan",
            "": "pu li-pai",
            "": "gaan yai tn",
            "": "m-nt-s-y-tam",
            "": "pai-p-bt",
            "": "chk-chn",
            "": "gaan fn-fuu",
            "": "kwaam mn-kong",
            "": "sn-dt-pap"
        };
        
        // GRAMMAR LESSONS
        const grammarLessons = [
            {
                id: "telling-time",
                title: "Telling Time in Thai",
                level: "beginner",
                structure: "Time System",
                structureRoman: "gi moong lew",
                structureEnglish: "What time is it?",
                description: "Thai uses a unique 6-hour clock system that divides the day into 4 parts.",
                explanation: `<p><strong>Why Thai time is confusing:</strong> Instead of the 12-hour system, Thai traditionally divides the day into <em>four 6-hour blocks</em>, each with its own word. The good news? There's a logical pattern once you understand it.</p>

<p><strong> 1AM - 5AM:  (dtii) + number</strong></p>
<p style="margin-left:20px;"> comes <em>before</em> the number (think: "strike one")<br>
 = 1AM,  = 2AM,  = 3AM,  = 4AM,  = 5AM<br>
<em>Memory trick:</em> "D" for Dark  it's the darkest part of night</p>

<p><strong> 6AM - 11AM: number +  (moong chao)</strong></p>
<p style="margin-left:20px;"> = 6AM,  = 7AM...  = 11AM<br>
 (chao) means "morning"  often dropped in casual speech<br>
<em>Memory trick:</em>  sounds like "gong"  the morning gong</p>

<p><strong> 12PM (noon):  (tang)</strong></p>
<p style="margin-left:20px;">Just say  or  (tang wan = "midday")</p>

<p><strong> 1PM - 3PM:  (bai) + number + </strong></p>
<p style="margin-left:20px;"> comes <em>first</em>:  = 1PM,  = 2PM,  = 3PM<br>
<em>Memory trick:</em> "Bai bai" to the morning!</p>

<p><strong> 4PM - 6PM: number +  (moong yen)</strong></p>
<p style="margin-left:20px;"> = 4PM,  = 5PM,  = 6PM<br>
 (yen) means "evening/cool"  often dropped in context</p>

<p><strong> 7PM - 11PM: number +  (tm)</strong></p>
<p style="margin-left:20px;"><strong> Counting restarts at 1!</strong> Think of 7-Eleven  becomes 1-5<br>
 = 7PM,  = 8PM,  = 9PM,  = 10PM,  = 11PM<br>
<em>Memory trick:</em>  sounds like a drum beat  the night watchman's drum</p>

<p><strong> 12AM (midnight):  (tang kn)</strong></p>
<p style="margin-left:20px;"> (kn) = "night"  so "midpoint of night"</p>

<p><strong>Adding minutes:</strong></p>
<p style="margin-left:20px;"> Just add the number after the hour:  = 8:15PM<br>
 For :30, use  (krng = half):  = 9:30AM<br>
  (naa-tii = minutes) is optional: () = 7:20AM</p>

<p><strong>Asking the time:</strong>  (gi moong lew) = "What time is it?"</p>

<p><strong>Quick reference pattern:</strong></p>
<p style="margin-left:20px;font-family:monospace;">
1-5 AM   + number<br>
6-11 AM  number + ()<br>
Noon  <br>
1-3 PM   + number + <br>
4-6 PM  number + ()<br>
7-11 PM  (number-6) + <br>
Midnight  
</p>`,
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "dtii sam",
                        english: "3:00 AM"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bpet moong chao",
                        english: "8:00 AM"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "tang",
                        english: "12:00 PM (noon)"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bai sng moong krng",
                        english: "2:30 PM"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ha moong yen",
                        english: "5:00 PM"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "sam tm sp ha",
                        english: "9:15 PM"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "tang kn",
                        english: "12:00 AM (midnight)"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "It's 9PM. How do you say this in Thai?",
                    hint: "Remember: 7PM = 1, so 9PM = ?",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "For 7-11PM, start counting from 1 at 7PM. So 7PM=1, 8PM=2, 9PM=3. Think '7-11 becomes 1-5'!"
                }
            },
            {
                id: "mae-wa",
                title: "Even though...",
                level: "advanced",
                structure: "......",
                structureRoman: "me wa ... g ...",
                structureEnglish: "Even though [A], still [B]",
                description: "Express contrast: something happens despite another condition.",
                explanation: `<p><strong>What it means:</strong> This pattern lets you say that something happens <em>despite</em> a condition that might normally prevent it. It's like saying "even though X is true, Y still happens anyway."</p>

<p><strong>The two key words:</strong></p>
<p> <strong></strong> (me wa) = "even though"  introduces the obstacle or condition<br>
 <strong></strong> (g) = "still/anyway"  introduces what happens regardless</p>

<p><strong>Why  is essential:</strong> In English, we often drop "still" ("Even though it's raining, I go to work"). In Thai, you <em>need</em> the   it's the glue that makes the contrast work. Without it, the sentence feels incomplete to Thai ears.</p>

<p><strong>Word order:</strong></p>
<p style="margin-left:20px;font-family:monospace;"> + [condition/obstacle] +  + [what happens anyway]</p>

<p><strong>Shortcuts in casual speech:</strong></p>
<p> You can drop  and just say <strong></strong>  very common in everyday Thai<br>
 The subject often comes after :  <strong></strong> (Even though it's raining, <strong>I still</strong> go)</p>

<p><strong>Common mistakes to avoid:</strong></p>
<p>  Using  (but) instead of   "<em></em>" sounds wrong<br>
  Forgetting  entirely  the sentence will feel unfinished<br>
  Putting  at the end  it needs to come <em>before</em> the verb/action</p>

<p><strong>Similar patterns:</strong> ()... is almost identical but slightly more emphatic (covered in next lesson).</p>

<p><strong>When to use it:</strong> Anytime you want to express doing something despite difficulties, continuing despite obstacles, or when the outcome defies expectations.</p>`,
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "me wa fn dtk g bpai tam-ngaan",
                        english: "Even though it's raining, (I) still go to work"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "me wa nay g dtng tam dt",
                        english: "Even though tired, (I) still have to continue"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "me wa paeng g yak s",
                        english: "Even though it's expensive, (I) still want to buy it"
                    },
                    {
                        thai: "<span class='highlight'></span> <span class='highlight'></span>",
                        roman: "me mi hu chn g gin di",
                        english: "Even though I'm not hungry, I can still eat"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "me wa ko j mi chp g dtng tam",
                        english: "Even though he doesn't like it, (he) still has to do it"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say: 'Even though I'm busy, I still help you'?",
                    hint: "busy =  (yng), help =  (chay)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "... is the correct pattern.  means 'but' (simple contrast),  means 'if' (conditional), and  means 'because' (cause)."
                }
            },
            {
                id: "tung-mae",
                title: "Although / Even if",
                level: "advanced",
                structure: "()......",
                structureRoman: "tng me (wa) ... g ...",
                structureEnglish: "Although [A], still [B]",
                description: "A more emphatic version of , often translated as 'even if'.",
                explanation: `<p><strong>What it means:</strong> This pattern works just like ... but with extra emphasis. While  is "even though,"  leans more toward "even if"  it often implies the condition is hypothetical or extreme.</p>

<p><strong>Breaking it down:</strong></p>
<p> <strong></strong> (tng) = "even/to the point of"  adds emphasis<br>
 <strong></strong> (me) = "though/although"<br>
 <strong></strong> (wa) = optional softener, often dropped<br>
 <strong></strong> (g) = "still/anyway"  required, just like with </p>

<p><strong>The nuance:</strong> Think of  as adding "even" to make things more emphatic:</p>
<p style="margin-left:20px;">  = "Even though it's raining" (it IS raining)<br>
  = "Even if it rains" (maybe it will, maybe it won't)</p>

<p><strong>Common variations:</strong></p>
<p> <strong></strong>  full form, slightly formal<br>
 <strong></strong>  most common in everyday speech<br>
 <strong>...</strong>  shortest form, casual: </p>

<p><strong>The  particle:</strong> You'll often see  (will/would) after   this reinforces the hypothetical feeling: <em></em> = "even if it were to be difficult"</p>

<p><strong>When to use  vs :</strong></p>
<p> Use <strong></strong> for situations that are definitely true<br>
 Use <strong></strong> when emphasizing despite extreme conditions, or for hypotheticals<br>
 In practice, Thai speakers often use them interchangeably  you won't be wrong either way</p>

<p><strong>Real-world usage:</strong>  is popular for expressing determination: "Even if it's hard, I'll do it" or resilience: "Even if things go wrong, it'll be okay."</p>`,
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "tng me j yak g dtng lng",
                        english: "Even if it's difficult, (I) still have to try"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "tng me wa mi mii ngn g mii kwaam-sk",
                        english: "Even though (I) don't have money, (I'm) still happy"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "tng me ko mi maa g mi bpen rai",
                        english: "Even if he doesn't come, it's still okay"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "tng j paeng g s",
                        english: "Even if it's expensive, (I'll) still buy it"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "tng me wa j nay mak g mi ym pe",
                        english: "Even though (I'm) very tired, (I) won't give up"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "What's the difference between  and ?",
                    options: [
                        { text: " is slightly more emphatic, like 'even if'", correct: true },
                        { text: "They have completely different meanings", correct: false },
                        { text: " is more formal", correct: false },
                        { text: " is only for future events", correct: false }
                    ],
                    explanation: "Both express contrast ('despite X, still Y'), but  adds emphasis with  ('even/to the point of'). It's often used for hypotheticals or to stress determination. In everyday speech, they're largely interchangeable."
                }
            },
            {
                id: "tae-wa",
                title: "But / However",
                level: "intermediate",
                structure: "()",
                structureRoman: "dte (wa)",
                structureEnglish: "[A], but [B]",
                description: "Simple contrast connector. '' makes it slightly softer.",
                explanation: "'' is the basic word for 'but'. Adding '' softens it slightly and is often used when explaining or giving a reason. In casual speech, '' alone is most common.",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "yak bpai dte mi mii wee-laa",
                        english: "Want to go but don't have time"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "aa-han -ri dte wa paeng mak",
                        english: "The food is delicious, but it's very expensive"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ko gng dte ki-gat",
                        english: "He's talented but lazy"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "Complete: ' ___ ' (I like coffee but don't like tea)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " is the simple connector for 'but' in contrasting statements"
                }
            },
            {
                id: "pror-wa",
                title: "Because",
                level: "beginner",
                structure: "()......",
                structureRoman: "pr (wa) ... g li ...",
                structureEnglish: "Because [A], so [B]",
                description: "Shows cause and effect. '' introduces the result.",
                explanation: "'' means 'because' and introduces the reason. '' (g li) introduces the result/consequence and means 'so' or 'therefore'. You can use just '' for a shorter version.",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "pr fn dtk g li mi bpai",
                        english: "Because it's raining, so (I) don't go"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "pr wa hu li gin kao",
                        english: "Because (I'm) hungry, so (I) eat"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "pr ko chay g li st reo",
                        english: "Because he helped, so (it) finished quickly"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'Because I'm tired, I sleep' - which pattern?",
                    hint: "tired = , sleep = ",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "... shows cause (tired) and effect (sleep)"
                }
            },
            {
                id: "taa",
                title: "If... then",
                level: "intermediate",
                structure: "......",
                structureRoman: "ta ... g ...",
                structureEnglish: "If [A], then [B]",
                description: "Conditional statements - if something happens, then something else follows.",
                explanation: "'' (ta) means 'if' and introduces the condition. '' introduces the result. The '' is often optional in casual speech but adds clarity.",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ta mii wee-laa g bpai tao",
                        english: "If (I) have time, then (I'll) go travel"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ta hu g gin li",
                        english: "If (you're) hungry, then just eat"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ta fn dtk g mi dtng bpai",
                        english: "If it rains, then (you) don't have to go"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'If you're free, call me' - which word means 'if'?",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " (ta) is the standard word for 'if' in conditional sentences"
                }
            },
            {
                id: "ying-ying",
                title: "The more... the more",
                level: "advanced",
                structure: "......",
                structureRoman: "yng ... yng ...",
                structureEnglish: "The more [A], the more [B]",
                description: "Shows that as one thing increases, another thing also increases.",
                explanation: "This pattern shows proportional change. The first '' introduces what increases, and the second '' introduces what also increases as a result. Very useful for comparisons!",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "yng rian yng gng",
                        english: "The more (you) study, the better (you) get"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "yng gin yng hu",
                        english: "The more (I) eat, the more hungry (I get)"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "yng ru yng mi ko-jai",
                        english: "The more (I) know, the less (I) understand"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'The more you practice, the better you get' uses which pattern?",
                    options: [
                        { text: "......", correct: true },
                        { text: "......", correct: false },
                        { text: "......", correct: false },
                        { text: "......", correct: false }
                    ],
                    explanation: "... shows proportional increase - the more X, the more Y"
                }
            },
            {
                id: "gwa",
                title: "More than / -er",
                level: "intermediate",
                structure: "...",
                structureRoman: "... gwa",
                structureEnglish: "[A] is more [X] than [B]",
                description: "Comparison - saying something is more than something else.",
                explanation: "'' comes AFTER the adjective to make it comparative. Unlike English where we say 'bigger than', Thai puts the comparison word after: 'big + '. Simple and consistent!",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "wan-ni rn gwa ma-waan",
                        english: "Today is hotter than yesterday"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "an-ni dii gwa",
                        english: "This one is better"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ko sung gwa pm",
                        english: "He is taller than me"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'This is cheaper' - where does  go?",
                    hint: "cheap = ",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " always comes after the adjective:  (cheap) +  = cheaper"
                }
            },
            {
                id: "tee-sut",
                title: "The most / -est",
                level: "intermediate",
                structure: "...",
                structureRoman: "... ti-st",
                structureEnglish: "[A] is the most [X]",
                description: "Superlative - saying something is the most or best.",
                explanation: "'' comes AFTER the adjective to make it superlative. It means 'the most' or '-est'. Very easy to use - just add it after any adjective!",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "an-ni dii ti-st",
                        english: "This one is the best"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ko gng ti-st nai hng",
                        english: "He is the best in the room"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "wan-ni rn ti-st",
                        english: "Today is the hottest"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'She is the most beautiful' - which is correct?",
                    hint: "beautiful = ",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " always comes after the adjective:  (beautiful) +  = most beautiful"
                }
            },
            {
                id: "gam-lang",
                title: "Currently doing",
                level: "intermediate",
                structure: "...",
                structureRoman: "gam-lang ... yu",
                structureEnglish: "[I] am [verb]-ing",
                description: "Shows an action in progress right now. Like English '-ing'.",
                explanation: "'' before the verb and '' after the verb indicate ongoing action. You can use just '' or just '', but using both is most complete. '' is often dropped in casual speech.",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "gam-lang gin kao yu",
                        english: "(I) am eating (right now)"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ko gam-lang nn yu",
                        english: "He is sleeping (right now)"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gam-lang tam-ngaan",
                        english: "(I) am working"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'I am studying right now' - which pattern shows ongoing action?",
                    hint: "study = ",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "... wraps around the verb to show ongoing action"
                }
            },
            {
                id: "laew",
                title: "Already / Completed",
                level: "beginner",
                structure: "...",
                structureRoman: "... lew",
                structureEnglish: "[I] already [verb]ed",
                description: "Shows that something has already happened or is now complete.",
                explanation: "'' is very versatile! It can mean 'already', show completion, or indicate a change of state ('now'). It always comes at the end of the phrase. One of the most common words in Thai!",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gin kao lew",
                        english: "(I) already ate / (I've) finished eating"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ko-jai lew",
                        english: "(I) understand now / Got it"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bpai lew",
                        english: "(He) already went / Gone already"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "'I already finished' uses which word?",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " at the end shows completion or 'already'"
                }
            },
            {
                id: "yang-mai",
                title: "Not yet",
                level: "beginner",
                structure: "......()",
                structureRoman: "yang ... mi ... (li)",
                structureEnglish: "[I] haven't [verb]ed yet",
                description: "Expresses that something has not happened yet, often implying it will happen later.",
                explanation: "'' means 'still' or 'yet'. Combined with '' (not), it creates 'not yet'. Adding '' at the end emphasizes that it really hasn't happened at all. This is the opposite of '' (already).",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "yang mi dai gin",
                        english: "(I) haven't eaten yet"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span><span class='highlight'></span>",
                        roman: "yang mi ko-jai li",
                        english: "(I) don't understand at all yet"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ko yang mi maa",
                        english: "He hasn't come yet"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say: 'I haven't finished yet'?",
                    hint: "finished =  (st)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " + verb = haven't [verb]ed yet"
                }
            },
            {
                id: "koey",
                title: "Have ever / Used to",
                level: "intermediate",
                structure: "...()",
                structureRoman: "ki ... (maa) gn",
                structureEnglish: "[I] have [verb]ed before / used to [verb]",
                description: "Expresses past experience - something you have done at some point in your life.",
                explanation: "'' indicates past experience. It's like 'have ever' in English. You can add '' (before) for emphasis. For negative, use '' (have never). This is very common when asking about experiences.",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ki bpai mang thai mi",
                        english: "Have you ever been to Thailand?"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "ki gin t-rian maa gn",
                        english: "(I) have eaten durian before"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "mi ki hn maa gn li",
                        english: "(I've) never seen (it) before at all"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you ask: 'Have you ever eaten this?'?",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " + verb +  = Have you ever [verb]ed?"
                }
            },
            {
                id: "ja",
                title: "Will / Going to",
                level: "beginner",
                structure: "...",
                structureRoman: "j ...",
                structureEnglish: "[I] will [verb] / going to [verb]",
                description: "Expresses future actions or intentions.",
                explanation: "'' is placed before the verb to indicate future tense or intention. Thai doesn't conjugate verbs, so this word is essential for showing future. It's one of the most important grammar words!",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "pm j bpai prng-ni",
                        english: "I will go tomorrow"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "j gin -rai",
                        english: "What will (you) eat? / What are you going to eat?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "ko j mi maa",
                        english: "He won't come / He's not going to come"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say: 'I will buy this'?",
                    hint: "buy =  (s)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " + verb = will [verb]"
                }
            },
            {
                id: "dai-mai",
                title: "Can / Able to",
                level: "beginner",
                structure: "... / ...",
                structureRoman: "... dai mi / dai ... mi",
                structureEnglish: "Can [I/you] [verb]?",
                description: "Used to ask permission or ability. '' means 'can' or 'able to'.",
                explanation: "'' shows ability or possibility. To ask 'Can you...?', add '' at the end. For statements, '' can come before or after the verb. '' means 'cannot'. This is extremely common in daily Thai!",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "put thai dai mi",
                        english: "Can you speak Thai?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gin pt dai",
                        english: "(I) can eat spicy food"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bpai mi dai",
                        english: "(I) can't go"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you ask: 'Can you help me?'?",
                    hint: "help =  (chay)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "verb +  = Can you [verb]?"
                }
            },
            {
                id: "tong",
                title: "Must / Have to",
                level: "beginner",
                structure: "...",
                structureRoman: "dtng ...",
                structureEnglish: "[I] must [verb] / have to [verb]",
                description: "Expresses necessity or obligation.",
                explanation: "'' is placed before the verb to show that something is necessary or required. '' means 'don't have to' (not required). For prohibition, use '' instead.",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "dtng bpai dtn-ni",
                        english: "(I) have to go now"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "mi dtng gang-won",
                        english: "(You) don't have to worry"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "kun dtng put paa-sa thai",
                        english: "You must speak Thai"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say: 'I have to work'?",
                    hint: "work =  (tam-ngaan)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " + verb = must/have to [verb]"
                }
            },
            {
                id: "yaak",
                title: "Want to",
                level: "beginner",
                structure: "...",
                structureRoman: "yak ...",
                structureEnglish: "[I] want to [verb]",
                description: "Expresses desire to do something.",
                explanation: "'' means 'want to' and is used before verbs. For wanting objects, use '' (want/take) or '' (need/want - more formal). '' = 'don't want to'.",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "yak gin kao",
                        english: "(I) want to eat rice"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "yak bpai tao",
                        english: "(I) want to go out / travel"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "mi yak tam-ngaan",
                        english: "(I) don't want to work"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say: 'I want to learn Thai'?",
                    hint: "learn =  (rian)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " + verb = want to [verb]"
                }
            },
            {
                id: "hai",
                title: "Using  (give/let/for/make)",
                level: "intermediate",
                structure: "...",
                structureRoman: "hi ...",
                structureEnglish: "give / let / for / make / to",
                description: "One of the most versatile Thai words with 5 main uses.",
                explanation: "'' has 5 main uses: 1) GIVE:  (give money), 2) LET/ALLOW:  (Mom doesn't let [me] go), 3) CAUSATIVE (make/have):  (have him do it), 4) FOR BENEFIT:  (do it for you), 5) ADVERB MARKER:  (do it well/properly). When  comes at the END of a phrase with an adjective, it means 'properly' or 'make sure to' - e.g.,  (eat until full),  (sleep well).",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "hi ngn ko",
                        english: "Give (him) money [GIVE]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "me mi hi bpai",
                        english: "Mom doesn't let (me) go [LET/ALLOW]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bk hi ko maa",
                        english: "Tell him to come [CAUSATIVE]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "tam hi kun",
                        english: "Do it for you [FOR BENEFIT]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "tam hi dii",
                        english: "Do it well/properly [ADVERB]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gin hi m",
                        english: "Eat until full [RESULT]"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "What does '' mean?",
                    hint: " (nn) = sleep,  (lp) = asleep",
                    options: [
                        { text: "Sleep well/properly", correct: true },
                        { text: "Give sleep", correct: false },
                        { text: "Let someone sleep", correct: false },
                        { text: "Sleeping for you", correct: false }
                    ],
                    explanation: "Verb +  + adjective = do the action properly/until that state.  = sleep until properly asleep"
                }
            },
            {
                id: "polite-request",
                title: "Polite Requests",
                level: "intermediate",
                structure: "...  /",
                structureRoman: "... ni di mi krp/k",
                structureEnglish: "Could you [verb] please?",
                description: "The polite way to make requests in Thai using  and .",
                explanation: "To make a polite request in Thai, use: [verb] +  (a little/please) +  (can you?) + / (polite particle). '' softens the request, '' asks permission, and '/' adds politeness. You can also use just '[verb] +  + /' for a shorter polite request.",
                examples: [
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "chay ni di mi krp",
                        english: "Could you help me please? (male speaker)"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "put cha cha ni di mi k",
                        english: "Could you speak slowly please? (female speaker)"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "r ni krp",
                        english: "Please wait (a moment)"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "k nam ni di mi krp",
                        english: "Could I have some water please?"
                    },
                    {
                        thai: "<span class='highlight'></span><span class='highlight'></span>",
                        roman: "lt raa-kaa ni di mi k",
                        english: "Could you lower the price please?"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you politely ask: 'Could you wait please?' (male speaker)",
                    hint: "wait =  (r)",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "The order is: verb +  +  + /"
                }
            },
            {
                id: "question-particles",
                title: "Question Particles: , , ",
                level: "beginner",
                structure: "... / ... / ...",
                structureRoman: "... mi / ... r plo / ... r yang",
                structureEnglish: "yes/no? / or not? / yet?",
                description: "Three ways to form yes/no questions in Thai, each with different nuances.",
                explanation: " (mi): Neutral yes/no question - 'Are you hungry?' = .\n\n (r plo): Also yes/no, but implies you expect 'no' or are checking - 'Are you [not] hungry?' = . Sounds more casual.\n\n (r yang): Asks if something has happened YET - 'Have you eaten yet?' = . Expects either 'already' () or 'not yet' ().\n\nAll three go at the END of the statement to turn it into a question.",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "hu mi",
                        english: "Are you hungry? [neutral question]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "hu r plo",
                        english: "Are you hungry (or not)? [checking]"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gin kao r yang",
                        english: "Have you eaten yet?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bpai tam-ngaan r yang",
                        english: "Have you gone to work yet?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "mii faen r plo",
                        english: "Do you have a boyfriend/girlfriend?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "chp mi",
                        english: "Do you like it?"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you ask 'Have you finished yet?'",
                    hint: "finish =  (st), 'yet' questions use ",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: "Use  for 'yet' questions.  is neutral,  is for checking assumptions."
                }
            },
            {
                id: "duay",
                title: "The Many Uses of ",
                level: "beginner",
                structure: " (day)",
                structureRoman: "day",
                structureEnglish: "with / also / too / please",
                description: " is a versatile word with multiple meanings depending on position and context.",
                explanation: `<p><strong> (day)</strong> is one of Thai's most useful words, but its meaning changes based on where it appears in a sentence. Master these four uses:</p>

<p><strong>1 "With"  Accompaniment ( + noun/verb)</strong></p>
<p style="margin-left:20px;">When  comes <em>before</em> something, it means "with" or "by means of"<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = go <em>together/with each other</em><br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = made <em>by</em> hand<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = write <em>with</em> a pen<br>
<em>Pattern:</em> VERB +  + NOUN (instrument/companion)</p>

<p><strong>2 "Also/Too"  Addition (sentence + )</strong></p>
<p style="margin-left:20px;">When  comes at the <em>end</em>, it means "also" or "too"<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = I like it <em>too</em><br>
  <span style="color:var(--accent-primary);font-weight:bold;"></span> = One coffee please, and a snack <em>as well</em><br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = He/she is going <em>too</em><br>
<em>Pattern:</em> STATEMENT +  (= me too / that too / also)</p>

<p><strong>3 Softening requests  Politeness marker</strong></p>
<p style="margin-left:20px;">Adding  to requests makes them softer and more polite<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span>! = Help! / Please help!<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = Could I have some water, please?<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = Please wait (softer than just )<br>
<em>Pattern:</em> REQUEST +  + (/) = please...</p>

<p><strong>4 "Because of"  Reason ( + reason)</strong></p>
<p style="margin-left:20px;">In formal contexts,  can introduce a reason<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = for this reason / therefore<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = with respect<br>
 <span style="color:var(--accent-primary);font-weight:bold;"></span> = with pleasure<br>
<em>Pattern:</em>  + NOUN (formal/written style)</p>

<p><strong>Common expressions with :</strong></p>
<p style="margin-left:20px;">
  (day gan) = together<br>
  (chay day) = Help! (urgent plea)<br>
  = Thanks in advance / Please thank them for me<br>
  / ... = likewise, me too<br>
  (-rai day) = What's the matter? / What now? (annoyed)
</p>

<p><strong> Position matters!</strong></p>
<p style="margin-left:20px;">
 <span style="color:var(--accent-primary);"></span> = go <em>with</em> him   before noun = "with"<br>
 <span style="color:var(--accent-primary);"></span> = he goes <em>too</em>   at end = "also"
</p>`,
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "bpai day gan mi",
                        english: "Shall we go together?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "kan day din-s",
                        english: "Write with a pencil"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "pm yak bpai day",
                        english: "I want to go too"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "k bia ik gew day krp",
                        english: "Another beer too, please"
                    },
                    {
                        thai: "<span class='highlight'></span>!",
                        roman: "chay day!",
                        english: "Help! (Please help me!)"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "day kwaam yin-dii",
                        english: "With pleasure (formal)"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "What does '' mean?",
                    hint: " at the end of a sentence means 'also/too'",
                    options: [
                        { text: "He/she goes too", correct: true },
                        { text: "Go with him/her", correct: false },
                        { text: "He/she goes with it", correct: false },
                        { text: "Please go", correct: false }
                    ],
                    explanation: "When  comes at the end after a complete statement, it means 'also/too'. '' (with  before the noun) would mean 'go with him/her'."
                }
            },
            {
                id: "kwaam-gaan-naa",
                title: "Making Nouns: , , ",
                level: "intermediate",
                structure: "... / ... / ...",
                structureRoman: "kwaam... / gaan... / na...",
                structureEnglish: "makes nouns or describes things",
                description: "Three common prefixes that change word meanings.",
                explanation: "<strong> (kwaam)</strong> = makes abstract nouns:<br>  (happy)   (happiness)<br>  (love)   (love, noun)<br>  (dream)   (a dream)<br><br><strong> (gaan)</strong> = makes activity nouns:<br>  (study)   (studying)<br>  (meet)   (a meeting)<br><br><strong> (na)</strong> = means 'seems' or '-able':<br>  (love)   (cute/loveable)<br>  (fear)   (scary)<br>  (interest)   (interesting)",
                examples: [
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "pm mii kwaam-sk",
                        english: "I have happiness (I'm happy)"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gaan-rian paa-sa tai s-nk",
                        english: "Studying Thai is fun"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "aa-han ni na-gin",
                        english: "This food looks delicious"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "kwaam-ru sm-kan mak",
                        english: "Knowledge is very important"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "gaan-bpr-chum j rm ma-rai",
                        english: "When will the meeting start?"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "dk kon ni na-rk mak",
                        english: "This child is very cute"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "nng rang ni na-ba",
                        english: "This movie is boring"
                    },
                    {
                        thai: "<span class='highlight'></span>",
                        roman: "kwaam-fn kng chn",
                        english: "My dream"
                    }
                ],
                practice: {
                    type: "multiple-choice",
                    prompt: "How do you say 'This looks interesting'?",
                    hint: " makes something 'seem like' or '-able'",
                    options: [
                        { text: "", correct: true },
                        { text: "", correct: false },
                        { text: "", correct: false },
                        { text: "", correct: false }
                    ],
                    explanation: " = interesting (seems worthy of interest).  would mean 'interest' as a noun."
                }
            }
        ];
        
        // Grammar practice sentence templates
        // Each template has: pattern (grammar rule), templates with slots, and word pools
        const grammarPracticeTemplates = {
            "mae-wa": {
                // ...... (even though...still...)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "Even though it's raining, I still go to work" },
                    { sentence: "______", blanks: ["", ""], english: "Even though I'm tired, I still have to continue" },
                    { sentence: "______", blanks: ["", ""], english: "Even though it's expensive, I still want to buy it" },
                    { sentence: "______", blanks: ["", ""], english: "Even though I don't have time, I'll still help you" },
                    { sentence: "______", blanks: ["", ""], english: "Even though it's difficult, I still have to try" }
                ],
                sentenceBuilds: [
                    { words: ["", "", "", ""], english: "Even though it's raining, I still go", correct: "" },
                    { words: ["", "", "", ""], english: "Even though I'm tired, I still work", correct: "" },
                    { words: ["", "", "", ""], english: "Even though I have no money, I'm still happy", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "Even though it's raining, I still have to go meet my friends", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "Even though I'm tired, I still have to cook for my wife", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "Even though I don't want to go, I still have to go to work", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "tae-wa": {
                // () (but)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "I want to go, but I don't have time" },
                    { sentence: "___", blanks: [""], english: "The food is delicious, but it's very expensive" },
                    { sentence: "___", blanks: [""], english: "He's talented, but lazy" },
                    { sentence: "___", blanks: [""], english: "I like coffee, but I don't like tea" },
                    { sentence: "___", blanks: [""], english: "It's hot, but I won't turn on the AC" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "I want to go, but I don't have time", correct: "" },
                    { words: ["", "", ""], english: "I like it, but I won't buy it", correct: "" },
                    { words: ["", "", ""], english: "I'm hungry, but I won't eat", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "I want to eat, but I have to work first", correct: "" },
                    { words: ["", "", "", "", ""], english: "He's rich, but he's not happy", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "The food is delicious, but the restaurant is very far", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "pror-wa": {
                // ()...... (because...so...)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "Because it's raining, I'm not going" },
                    { sentence: "______", blanks: ["", ""], english: "Because I'm hungry, I'm eating" },
                    { sentence: "______", blanks: ["", ""], english: "Because I'm tired, I'm going to sleep" },
                    { sentence: "______", blanks: ["", ""], english: "Because I have no money, I'm not buying it" },
                    { sentence: "______", blanks: ["", ""], english: "Because it's hot, I'm turning on the AC" }
                ],
                sentenceBuilds: [
                    { words: ["", "", "", ""], english: "Because I'm hungry, I'm eating", correct: "" },
                    { words: ["", "", "", ""], english: "Because I'm tired, I'm sleeping", correct: "" },
                    { words: ["", "", "", ""], english: "Because it's raining, I'm not going", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "Because I worked hard, I'm very tired", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "Because I didn't study, I failed the exam", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "Because of traffic, I arrived late", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "taa": {
                // ...... (if...then...)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "If I have time, I'll go out" },
                    { sentence: "______", blanks: ["", ""], english: "If you're hungry, just eat" },
                    { sentence: "______", blanks: ["", ""], english: "If it rains, I won't go" },
                    { sentence: "______", blanks: ["", ""], english: "If you're free, give me a call" },
                    { sentence: "______", blanks: ["", ""], english: "If you don't like it, you don't have to eat it" }
                ],
                sentenceBuilds: [
                    { words: ["", "", "", ""], english: "If you're hungry, eat", correct: "" },
                    { words: ["", "", "", ""], english: "If you're free, come over", correct: "" },
                    { words: ["", "", "", ""], english: "If it rains, stay home", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "If I have time, I'll go to the beach", correct: "" },
                    { words: ["", "", "", "", "", "", "", ""], english: "If you're not feeling well, rest at home", correct: "" },
                    { words: ["", "", "", "", "", "", "", ""], english: "If the food isn't good, you don't have to eat it", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "ying-ying": {
                // ...... (the more...the more...)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "The more you study, the better you get" },
                    { sentence: "______", blanks: ["", ""], english: "The more I eat, the hungrier I get" },
                    { sentence: "______", blanks: ["", ""], english: "The more I learn, the less I understand" },
                    { sentence: "______", blanks: ["", ""], english: "The more you practice, the better" },
                    { sentence: "______", blanks: ["", ""], english: "The more I think, the more confused I get" }
                ],
                sentenceBuilds: [
                    { words: ["", "", "", ""], english: "The more you study, the better you get", correct: "" },
                    { words: ["", "", "", ""], english: "The more you practice, the better", correct: "" },
                    { words: ["", "", "", ""], english: "The more you eat, the fatter you get", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "The more I know him, the more I like him", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "The more I read, the more I understand", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "The more I practice speaking Thai, the better I get", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "gwa": {
                // ... (more than / -er)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Today is hotter than yesterday" },
                    { sentence: "___", blanks: [""], english: "This one is better" },
                    { sentence: "___", blanks: [""], english: "He's taller than me" },
                    { sentence: "___", blanks: [""], english: "This one is cheaper" },
                    { sentence: "___", blanks: [""], english: "Thai is harder than English" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "This one is better", correct: "" },
                    { words: ["", "", "", ""], english: "Today is hotter than yesterday", correct: "" },
                    { words: ["", "", "", ""], english: "He's better than me", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "His house is bigger than my house", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "This restaurant's food is tastier than that one", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "Learning Thai is harder than I thought", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "tee-sut": {
                // ... (the most / -est)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "This one is the best" },
                    { sentence: "___", blanks: [""], english: "He is the best in the room" },
                    { sentence: "___", blanks: [""], english: "Today is the hottest" },
                    { sentence: "___", blanks: [""], english: "Thai food is the most delicious" },
                    { sentence: "___", blanks: [""], english: "This is the most important" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "This one is the best", correct: "" },
                    { words: ["", "", ""], english: "She is the most beautiful", correct: "" },
                    { words: ["", "", ""], english: "Thai food is the best", correct: "" },
                    { words: ["", "", "", "", "", "", "", ""], english: "This is the happiest day of my life", correct: "" },
                    { words: ["", "", "", "", "", "", ""], english: "This shop sells the best coffee in town", correct: "" },
                    { words: ["", "", "", "", "", "", "", ""], english: "He's the kindest person I know", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "gam-lang": {
                // ... (currently -ing)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "I'm eating right now" },
                    { sentence: "______", blanks: ["", ""], english: "He's sleeping right now" },
                    { sentence: "______", blanks: ["", ""], english: "I'm working right now" },
                    { sentence: "______", blanks: ["", ""], english: "I'm studying right now" },
                    { sentence: "______", blanks: ["", ""], english: "He's on the phone right now" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "I'm eating right now", correct: "" },
                    { words: ["", "", ""], english: "I'm working right now", correct: "" },
                    { words: ["", "", "", ""], english: "He's sleeping right now", correct: "" },
                    { words: ["", "", "", "", ""], english: "I'm studying Thai right now", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "Mom is cooking in the kitchen right now", correct: "" },
                    { words: ["", "", "", "", "", ""], english: "He's in a meeting with a client right now", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "laew": {
                // ... (already/completed)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "I already ate" },
                    { sentence: "___", blanks: [""], english: "I understand now" },
                    { sentence: "___", blanks: [""], english: "He already left" },
                    { sentence: "___", blanks: [""], english: "I already finished" },
                    { sentence: "___", blanks: [""], english: "I already know" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "I already ate", correct: "" },
                    { words: ["", ""], english: "He already left", correct: "" },
                    { words: ["", ""], english: "I understand now", correct: "" },
                    { words: ["", "", "", "", ""], english: "I already finished my homework", correct: "" },
                    { words: ["", "", "", "", ""], english: "He already went home", correct: "" },
                    { words: ["", "", "", "", "", "", "", ""], english: "I already told him, but he didn't listen", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "yang-mai": {
                // ... (not yet)
                fillBlanks: [
                    { sentence: "______", blanks: ["", ""], english: "I haven't eaten yet" },
                    { sentence: "___", blanks: ["", ""], english: "He hasn't come yet" },
                    { sentence: "______", blanks: ["", ""], english: "I don't understand at all yet" },
                    { sentence: "___", blanks: ["", ""], english: "Not finished yet" },
                    { sentence: "___", blanks: ["", ""], english: "I don't know yet" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "Haven't eaten yet", correct: "" },
                    { words: ["", ""], english: "Not finished yet", correct: "" },
                    { words: ["", "", ""], english: "He hasn't come yet", correct: "" },
                    { words: ["", "", "", ""], english: "I don't understand at all yet", correct: "" },
                    { words: ["", "", ""], english: "Haven't done homework yet", correct: "" },
                    { words: ["", "", ""], english: "Not ready to go yet", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "koey": {
                // ... (have ever / used to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Have you ever been to Thailand?" },
                    { sentence: "___", blanks: [""], english: "I've eaten durian before" },
                    { sentence: "___", blanks: [""], english: "I've never seen it before" },
                    { sentence: "___", blanks: [""], english: "I used to work here" },
                    { sentence: "___", blanks: [""], english: "Have you ever spoken Thai?" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "Have you ever been?", correct: "" },
                    { words: ["", "", ""], english: "I've eaten it before", correct: "" },
                    { words: ["", "", ""], english: "I've never seen it", correct: "" },
                    { words: ["", "", "", "", ""], english: "Have you ever been to Thailand?", correct: "" },
                    { words: ["", "", "", "", ""], english: "I used to live in Bangkok", correct: "" },
                    { words: ["", "", "", "", ""], english: "I've never done this before", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "ja": {
                // ... (will / going to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "I will go tomorrow" },
                    { sentence: "___", blanks: [""], english: "What will you eat?" },
                    { sentence: "___", blanks: [""], english: "He won't come" },
                    { sentence: "___", blanks: [""], english: "I'm going to work today" },
                    { sentence: "___", blanks: [""], english: "Which one will you buy?" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "I will go", correct: "" },
                    { words: ["", "", ""], english: "What will you eat?", correct: "" },
                    { words: ["", "", "", ""], english: "When will he come?", correct: "" },
                    { words: ["", "", "", "", ""], english: "I will go shopping", correct: "" },
                    { words: ["", "", "", ""], english: "Tomorrow it will rain", correct: "" },
                    { words: ["", "", "", "", ""], english: "What will you do today?", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "dai-mai": {
                // ... (can/able to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Can you speak Thai?" },
                    { sentence: "___", blanks: [""], english: "I can eat spicy food" },
                    { sentence: "___", blanks: [""], english: "I can't go" },
                    { sentence: "___", blanks: [""], english: "Can you help?" },
                    { sentence: "___", blanks: [""], english: "I can come" }
                ],
                sentenceBuilds: [
                    { words: ["", "", "", ""], english: "Can you speak Thai?", correct: "" },
                    { words: ["", "", ""], english: "I can eat spicy", correct: "" },
                    { words: ["", ""], english: "Can't go", correct: "" },
                    { words: ["", "", "", ""], english: "Can you help me?", correct: "" },
                    { words: ["", "", ""], english: "I can't come today", correct: "" },
                    { words: ["", "", "", "", ""], english: "Can you drive?", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "tong": {
                // ... (must / have to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "I have to go now" },
                    { sentence: "___", blanks: [""], english: "Don't have to worry" },
                    { sentence: "___", blanks: [""], english: "I have to work" },
                    { sentence: "___", blanks: [""], english: "No need to wait" },
                    { sentence: "___", blanks: [""], english: "Must speak Thai" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "Have to go", correct: "" },
                    { words: ["", ""], english: "Don't have to worry", correct: "" },
                    { words: ["", "", ""], english: "Have to work today", correct: "" },
                    { words: ["", "", "", ""], english: "You don't have to wait for me", correct: "" },
                    { words: ["", "", "", ""], english: "We have to go now", correct: "" },
                    { words: ["", "", "", "", ""], english: "Have to study Thai every day", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "yaak": {
                // ... (want to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "I want to eat" },
                    { sentence: "___", blanks: [""], english: "I want to travel" },
                    { sentence: "___", blanks: [""], english: "I don't want to work" },
                    { sentence: "___", blanks: [""], english: "I want to learn Thai" },
                    { sentence: "___", blanks: [""], english: "I want to rest" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "Want to eat", correct: "" },
                    { words: ["", "", ""], english: "Want to travel", correct: "" },
                    { words: ["", ""], english: "Don't want to work", correct: "" },
                    { words: ["", "", "", ""], english: "I want to learn Thai", correct: "" },
                    { words: ["", "", "", ""], english: "What do you want to eat?", correct: "" },
                    { words: ["", "", "", ""], english: "I really want to go to Thailand", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "hai": {
                // ... (give/let/for someone to)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Give him money" },
                    { sentence: "___", blanks: [""], english: "Tell him to come" },
                    { sentence: "___", blanks: [""], english: "Please help" },
                    { sentence: "___", blanks: [""], english: "Let me see" },
                    { sentence: "___", blanks: [""], english: "Make it finished" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "Give money", correct: "" },
                    { words: ["", "", "", ""], english: "Tell him to come", correct: "" },
                    { words: ["", "", "", ""], english: "Let me see", correct: "" },
                    { words: ["", "", "", ""], english: "Please help me", correct: "" },
                    { words: ["", "", "", "", ""], english: "Tell him to wait a moment", correct: "" },
                    { words: ["", "", "", ""], english: "Do it the best you can", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "polite-request": {
                // ... (polite requests)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Could you help please?" },
                    { sentence: "______", blanks: ["", ""], english: "Could you speak slowly please?" },
                    { sentence: "___", blanks: [""], english: "Please wait a moment" },
                    { sentence: "______", blanks: ["", ""], english: "Could I have some water please?" },
                    { sentence: "______", blanks: ["", ""], english: "Could you lower the price please?" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "Please help (male)", correct: "" },
                    { words: ["", "", "", ""], english: "Could you wait please?", correct: "" },
                    { words: ["", "", "", "", ""], english: "Could you speak slowly please?", correct: "" },
                    { words: ["", "", "", "", ""], english: "Could I have water please?", correct: "" },
                    { words: ["", "", "", "", ""], english: "Could you lower the price?", correct: "" },
                    { words: ["", "", "", "", ""], english: "Could you write it again please?", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "question-particles": {
                // , ,  (question particles)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Are you hungry? [neutral]" },
                    { sentence: "___", blanks: [""], english: "Have you eaten yet?" },
                    { sentence: "___", blanks: [""], english: "Do you have a boyfriend/girlfriend?" },
                    { sentence: "___", blanks: [""], english: "Have you finished yet?" },
                    { sentence: "___", blanks: [""], english: "Do you like it?" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "Are you hungry?", correct: "" },
                    { words: ["", "", ""], english: "Have you eaten yet?", correct: "" },
                    { words: ["", "", ""], english: "Have you gone to work yet?", correct: "" },
                    { words: ["", "", ""], english: "Is he coming (or not)?", correct: "" },
                    { words: ["", "", ""], english: "Do you like Thai food?", correct: "" },
                    { words: ["", "", ""], english: "Have you finished?", correct: "" }
                ],
                distractors: ["", "", "", "", ""]
            },
            "telling-time": {
                // Time telling practice - uses special time format
                fillBlanks: [
                    { sentence: "3:00 AM = ___", blanks: [""], english: "3:00 AM" },
                    { sentence: "8:00 AM = ___", blanks: [""], english: "8:00 AM" },
                    { sentence: "12:00 PM = ___", blanks: [""], english: "12:00 PM (noon)" },
                    { sentence: "2:00 PM = ___", blanks: [""], english: "2:00 PM" },
                    { sentence: "5:00 PM = ___", blanks: [""], english: "5:00 PM" },
                    { sentence: "9:00 PM = ___", blanks: [""], english: "9:00 PM (7+2=9, so 3)" },
                    { sentence: "12:00 AM = ___", blanks: [""], english: "12:00 AM (midnight)" },
                    { sentence: "1:00 AM = ___", blanks: [""], english: "1:00 AM" },
                    { sentence: "7:00 AM = ___", blanks: [""], english: "7:00 AM" },
                    { sentence: "1:00 PM = ___", blanks: [""], english: "1:00 PM" },
                    { sentence: "4:00 PM = ___", blanks: [""], english: "4:00 PM" },
                    { sentence: "7:00 PM = ___", blanks: [""], english: "7:00 PM (first )" },
                    { sentence: "10:00 PM = ___", blanks: [""], english: "10:00 PM (7+3=10, so 4)" },
                    { sentence: "11:00 PM = ___", blanks: [""], english: "11:00 PM (7+4=11, so 5)" },
                    { sentence: "5:00 AM = ___", blanks: [""], english: "5:00 AM" }
                ],
                sentenceBuilds: [
                    { words: ["", ""], english: "3:00 AM", correct: "" },
                    { words: ["", "", ""], english: "8:00 AM", correct: "" },
                    { words: ["", "", ""], english: "2:00 PM", correct: "" },
                    { words: ["", "", ""], english: "5:00 PM", correct: "" },
                    { words: ["", ""], english: "9:00 PM", correct: "" },
                    { words: ["", ""], english: "Midnight", correct: "" },
                    { words: ["", ""], english: "7:00 PM", correct: "" },
                    { words: ["", ""], english: "10:00 PM", correct: "" },
                    { words: ["", ""], english: "1:00 PM", correct: "" },
                    { words: ["", "", ""], english: "9:00 AM", correct: "" },
                    { words: ["", ""], english: "5:00 AM", correct: "" },
                    { words: ["", "", ""], english: "6:00 PM", correct: "" }
                ],
                distractors: ["", "", "", "", "", "", "", ""]
            },
            "duay": {
                //  (with/also/too/please)
                fillBlanks: [
                    { sentence: "___", blanks: [""], english: "Go together" },
                    { sentence: "___", blanks: [""], english: "Write with a pen" },
                    { sentence: "___", blanks: [""], english: "I want to go too" },
                    { sentence: "___!", blanks: [""], english: "Help! (Please help!)" },
                    { sentence: "___", blanks: [""], english: "Could I have some water please?" }
                ],
                sentenceBuilds: [
                    { words: ["", "", ""], english: "Go together", correct: "" },
                    { words: ["", "", ""], english: "Write with a pencil", correct: "" },
                    { words: ["", "", ""], english: "I'm going too", correct: "" },
                    { words: ["", ""], english: "Help!", correct: "" },
                    { words: ["", "", "", ""], english: "A coffee please", correct: "" },
                    { words: ["", "", ""], english: "He/she likes it too", correct: "" },
                    { words: ["", "", ""], english: "Made by hand", correct: "" },
                    { words: ["", "", "", "", ""], english: "Another piece of dessert too please", correct: "" }
                ],
                distractors: ["", "", "", "", "", ""]
            }
        };
        
        // Grammar practice state
        let currentPracticeLesson = null;
        let currentPracticeMode = null; // 'fillblank' or 'build'
        let currentPracticeIndex = 0;
        let practiceScore = { correct: 0, total: 0 };
        let currentPracticeItems = [];
        
        // Grammar lesson state
        let currentLessonIndex = null;
        let currentStepIndex = 0;
        let lessonProgress = JSON.parse(localStorage.getItem('thaiGrammarProgress') || '{}');
        
        // THEMED VOCABULARY LISTS
        const themedLists = [
            {
                name: "Animals & Nature",
                words: [
                    { thai: "", english: "dog" },
                    { thai: "", english: "cat" },
                    { thai: "", english: "bird" },
                    { thai: "", english: "fish" },
                    { thai: "", english: "elephant" },
                    { thai: "", english: "monkey" },
                    { thai: "", english: "snake" },
                    { thai: "", english: "cow" },
                    { thai: "", english: "pig" },
                    { thai: "", english: "chicken" },
                    { thai: "", english: "duck" },
                    { thai: "", english: "frog" },
                    { thai: "", english: "mosquito" },
                    { thai: "", english: "ant" },
                    { thai: "", english: "butterfly" },
                    { thai: "", english: "tree" },
                    { thai: "", english: "flower" },
                    { thai: "", english: "leaf" },
                    { thai: "", english: "grass" },
                    { thai: "", english: "forest/jungle" },
                    { thai: "", english: "mountain" },
                    { thai: "", english: "river" },
                    { thai: "", english: "sea/ocean" },
                    { thai: "", english: "island" },
                    { thai: "", english: "beach" },
                    { thai: "", english: "waterfall" }
                ]
            },
            {
                name: "Food & Drinks",
                words: [
                    { thai: "", english: "rice" },
                    { thai: "", english: "egg" },
                    { thai: "", english: "milk" },
                    { thai: "", english: "bread" },
                    { thai: "", english: "meat/beef" },
                    { thai: "", english: "shrimp" },
                    { thai: "", english: "crab" },
                    { thai: "", english: "squid" },
                    { thai: "", english: "fruit" },
                    { thai: "", english: "vegetable" },
                    { thai: "", english: "mango" },
                    { thai: "", english: "banana" },
                    { thai: "", english: "orange" },
                    { thai: "", english: "watermelon" },
                    { thai: "", english: "grape" },
                    { thai: "", english: "mangosteen" },
                    { thai: "", english: "durian" },
                    { thai: "", english: "longan" },
                    { thai: "", english: "lime" },
                    { thai: "", english: "tomato" },
                    { thai: "", english: "cucumber" },
                    { thai: "", english: "cabbage" },
                    { thai: "", english: "carrot" },
                    { thai: "", english: "chili" },
                    { thai: "", english: "garlic" },
                    { thai: "", english: "onion" },
                    { thai: "", english: "salt" },
                    { thai: "", english: "sugar" },
                    { thai: "", english: "water" },
                    { thai: "", english: "tea" },
                    { thai: "", english: "coffee" },
                    { thai: "", english: "beer" },
                    { thai: "", english: "alcohol/liquor" },
                    { thai: "", english: "fruit juice" },
                    { thai: "", english: "plain water" },
                    { thai: "", english: "ice" }
                ]
            },
            {
                name: "Cooking & Taste",
                words: [
                    { thai: "", english: "to cook" },
                    { thai: "", english: "to fry" },
                    { thai: "", english: "to boil" },
                    { thai: "", english: "to steam" },
                    { thai: "", english: "to grill" },
                    { thai: "", english: "to bake" },
                    { thai: "", english: "to mix (cooking)" },
                    { thai: "", english: "to chop/cut" },
                    { thai: "", english: "to season" },
                    { thai: "", english: "ingredient" },
                    { thai: "", english: "recipe" },
                    { thai: "", english: "ingredients" },
                    { thai: "", english: "spice" },
                    { thai: "", english: "seasoning" },
                    { thai: "", english: "taste/flavor" },
                    { thai: "", english: "spicy" },
                    { thai: "", english: "sweet" },
                    { thai: "", english: "sour" },
                    { thai: "", english: "salty" },
                    { thai: "", english: "bitter" },
                    { thai: "", english: "bland" },
                    { thai: "", english: "delicious" },
                    { thai: "", english: "smelly/stinky" },
                    { thai: "", english: "fragrant" },
                    { thai: "", english: "crispy" },
                    { thai: "", english: "soft" },
                    { thai: "", english: "hard" },
                    { thai: "", english: "sticky/chewy" },
                    { thai: "", english: "fresh" },
                    { thai: "", english: "broken/spoiled" }
                ]
            },
            {
                name: "Family & People",
                words: [
                    { thai: "", english: "father" },
                    { thai: "", english: "mother" },
                    { thai: "", english: "older sibling" },
                    { thai: "", english: "younger sibling" },
                    { thai: "", english: "older brother" },
                    { thai: "", english: "older sister" },
                    { thai: "", english: "younger brother" },
                    { thai: "", english: "younger sister" },
                    { thai: "", english: "child/offspring" },
                    { thai: "", english: "son" },
                    { thai: "", english: "daughter" },
                    { thai: "", english: "grandparents (paternal)" },
                    { thai: "", english: "grandparents (maternal)" },
                    { thai: "", english: "grandchild/nephew/niece" },
                    { thai: "", english: "uncle (older than parent)" },
                    { thai: "", english: "aunt (older than parent)" },
                    { thai: "", english: "husband" },
                    { thai: "", english: "wife" },
                    { thai: "", english: "boyfriend/girlfriend" },
                    { thai: "", english: "friend" },
                    { thai: "", english: "neighbor" },
                    { thai: "", english: "neighbourhood" },
                    { thai: "", english: "teacher" },
                    { thai: "", english: "student" },
                    { thai: "", english: "doctor" },
                    { thai: "", english: "nurse" },
                    { thai: "", english: "employee/staff" },
                    { thai: "", english: "boss" },
                    { thai: "", english: "customer" },
                    { thai: "", english: "monk" }
                ]
            },
            {
                name: "Body & Health",
                words: [
                    { thai: "", english: "head" },
                    { thai: "", english: "hair" },
                    { thai: "", english: "face" },
                    { thai: "", english: "eye" },
                    { thai: "", english: "ear" },
                    { thai: "", english: "nose" },
                    { thai: "", english: "mouth" },
                    { thai: "", english: "tooth/teeth" },
                    { thai: "", english: "tongue" },
                    { thai: "", english: "neck" },
                    { thai: "", english: "shoulder" },
                    { thai: "", english: "arm" },
                    { thai: "", english: "hand" },
                    { thai: "", english: "finger" },
                    { thai: "", english: "back" },
                    { thai: "", english: "stomach" },
                    { thai: "", english: "leg" },
                    { thai: "", english: "foot" },
                    { thai: "", english: "knee" },
                    { thai: "", english: "heart" },
                    { thai: "", english: "blood" },
                    { thai: "", english: "bone" },
                    { thai: "", english: "skin" },
                    { thai: "", english: "sick/ill" },
                    { thai: "", english: "to ache/pain" },
                    { thai: "", english: "to cough" },
                    { thai: "", english: "to sneeze" },
                    { thai: "", english: "fever" },
                    { thai: "", english: "to hurt/injured" },
                    { thai: "", english: "wound" },
                    { thai: "", english: "allergic to" },
                    { thai: "", english: "to recover/heal" },
                    { thai: "", english: "to examine/check" },
                    { thai: "", english: "to treat/cure" },
                    { thai: "", english: "medicine" },
                    { thai: "", english: "hospital" },
                    { thai: "", english: "to exercise" },
                    { thai: "", english: "to rest/relax" }
                ]
            },
            {
                name: "Numbers & Time",
                words: [
                    { thai: "", english: "one" },
                    { thai: "", english: "two" },
                    { thai: "", english: "three" },
                    { thai: "", english: "four" },
                    { thai: "", english: "five" },
                    { thai: "", english: "six" },
                    { thai: "", english: "seven" },
                    { thai: "", english: "eight" },
                    { thai: "", english: "nine" },
                    { thai: "", english: "ten" },
                    { thai: "", english: "hundred" },
                    { thai: "", english: "thousand" },
                    { thai: "", english: "ten thousand" },
                    { thai: "", english: "hundred thousand" },
                    { thai: "", english: "million" },
                    { thai: "", english: "day" },
                    { thai: "", english: "week" },
                    { thai: "", english: "month" },
                    { thai: "", english: "year" },
                    { thai: "", english: "today" },
                    { thai: "", english: "tomorrow" },
                    { thai: "", english: "yesterday" },
                    { thai: "", english: "morning" },
                    { thai: "", english: "afternoon" },
                    { thai: "", english: "evening" },
                    { thai: "", english: "night" },
                    { thai: "", english: "noon" },
                    { thai: "", english: "midnight" },
                    { thai: "", english: "hour" },
                    { thai: "", english: "minute" },
                    { thai: "", english: "second" },
                    { thai: "", english: "clock/watch" },
                    { thai: "", english: "Monday (wan jan)" },
                    { thai: "", english: "Tuesday (wan ang-kaan)" },
                    { thai: "", english: "Wednesday (wan pt)" },
                    { thai: "", english: "Thursday (wan p-r-ht)" },
                    { thai: "", english: "Friday (wan sk)" },
                    { thai: "", english: "Saturday (wan so)" },
                    { thai: "", english: "Sunday (wan aa-tt)" },
                    { thai: "", english: "already" },
                    { thai: "", english: "still/yet" },
                    { thai: "", english: "currently/in progress" },
                    { thai: "", english: "will (future)" },
                    { thai: "", english: "used to/have done before" },
                    { thai: "", english: "on time" },
                    { thai: "", english: "late" },
                    { thai: "", english: "to spend time" },
                    { thai: "", english: "to save time" },
                    { thai: "", english: "to waste time" },
                    { thai: "", english: "now" },
                    { thai: "", english: "before" },
                    { thai: "", english: "after" },
                    { thai: "", english: "often" },
                    { thai: "", english: "always" },
                    { thai: "", english: "never" },
                    { thai: "", english: "immediately" },
                    { thai: "", english: "again/more" },
                    { thai: "", english: "only/that's all" },
                    { thai: "", english: "and then" }
                ]
            },
            {
                name: "Colors & Descriptions",
                words: [
                    { thai: "", english: "color" },
                    { thai: "", english: "red (sii daeng)" },
                    { thai: "", english: "green (sii kiaw)" },
                    { thai: "", english: "blue (sii nam ngern)" },
                    { thai: "", english: "yellow (sii leuang)" },
                    { thai: "", english: "white (sii kaao)" },
                    { thai: "", english: "black (sii dam)" },
                    { thai: "", english: "pink (sii chom-puu)" },
                    { thai: "", english: "purple (sii muang)" },
                    { thai: "", english: "gray (sii tao)" },
                    { thai: "", english: "orange (sii som)" },
                    { thai: "", english: "beautiful" },
                    { thai: "", english: "cute" },
                    { thai: "", english: "smart/clever" },
                    { thai: "", english: "clean" },
                    { thai: "", english: "dirty" },
                    { thai: "", english: "big" },
                    { thai: "", english: "small" },
                    { thai: "", english: "tall/high" },
                    { thai: "", english: "short" },
                    { thai: "", english: "long (length/distance)" },
                    { thai: "", english: "short (length)" },
                    { thai: "", english: "wide" },
                    { thai: "", english: "narrow" },
                    { thai: "", english: "thick" },
                    { thai: "", english: "thin (objects)" },
                    { thai: "", english: "old" },
                    { thai: "", english: "new" },
                    { thai: "", english: "strong" },
                    { thai: "", english: "weak" },
                    { thai: "", english: "fat" },
                    { thai: "", english: "thin/skinny (people)" },
                    { thai: "", english: "expensive" },
                    { thai: "", english: "cheap" },
                    { thai: "", english: "cold" },
                    { thai: "", english: "hot" },
                    { thai: "", english: "fast/quick" },
                    { thai: "", english: "slow" },
                    { thai: "", english: "easy" },
                    { thai: "", english: "difficult" },
                    { thai: "", english: "dark" },
                    { thai: "", english: "bright" },
                    { thai: "", english: "quiet" },
                    { thai: "", english: "loud/noisy" },
                    { thai: "", english: "convenient" },
                    { thai: "", english: "complicated" },
                    { thai: "", english: "suitable/appropriate" },
                    { thai: "", english: "worthwhile/good value" },
                    { thai: "", english: "dangerous" },
                    { thai: "", english: "safe" },
                    { thai: "", english: "neat/tidy" }
                ]
            },
            {
                name: "Emotions & Feelings",
                words: [
                    { thai: "", english: "tired" },
                    { thai: "", english: "bored" },
                    { thai: "", english: "excited" },
                    { thai: "", english: "worried/anxious" },
                    { thai: "", english: "relaxed" },
                    { thai: "", english: "surprised" },
                    { thai: "", english: "disappointed" },
                    { thai: "", english: "proud" },
                    { thai: "", english: "ashamed" },
                    { thai: "", english: "angry" },
                    { thai: "", english: "sad/sorry" },
                    { thai: "", english: "happy/glad" },
                    { thai: "", english: "shocked/startled" },
                    { thai: "", english: "afraid/scared" },
                    { thai: "", english: "comfortable" },
                    { thai: "", english: "difficult/troublesome" },
                    { thai: "", english: "fun" },
                    { thai: "", english: "boring" },
                    { thai: "", english: "scary" },
                    { thai: "", english: "hungry" },
                    { thai: "", english: "full (not hungry)" },
                    { thai: "", english: "thirsty" },
                    { thai: "", english: "to miss (someone)" },
                    { thai: "", english: "to love" },
                    { thai: "", english: "to hate" },
                    { thai: "", english: "to like" },
                    { thai: "", english: "to dislike" },
                    { thai: "", english: "to hope" },
                    { thai: "", english: "to believe" },
                    { thai: "", english: "to doubt/wonder" },
                    { thai: "", english: "confused" },
                    { thai: "", english: "diligent/hardworking" },
                    { thai: "", english: "lazy" },
                    { thai: "", english: "rich" },
                    { thai: "", english: "poor" },
                    { thai: "", english: "famous" }
                ]
            },
            {
                name: "Basic Actions",
                words: [
                    { thai: "", english: "to walk" },
                    { thai: "", english: "to run" },
                    { thai: "", english: "to jump" },
                    { thai: "", english: "to sit" },
                    { thai: "", english: "to stand" },
                    { thai: "", english: "to lie down/sleep" },
                    { thai: "", english: "to sleep" },
                    { thai: "", english: "to wake up" },
                    { thai: "", english: "to return" },
                    { thai: "", english: "to come" },
                    { thai: "", english: "to go" },
                    { thai: "", english: "to enter" },
                    { thai: "", english: "to exit/leave" },
                    { thai: "", english: "to go up" },
                    { thai: "", english: "to go down" },
                    { thai: "", english: "to pass through" },
                    { thai: "", english: "to stop" },
                    { thai: "", english: "to wait" },
                    { thai: "", english: "to start/begin" },
                    { thai: "", english: "to finish/end" },
                    { thai: "", english: "to open" },
                    { thai: "", english: "to close" },
                    { thai: "", english: "to use" },
                    { thai: "", english: "to buy" },
                    { thai: "", english: "to sell" },
                    { thai: "", english: "to give" },
                    { thai: "", english: "to receive" },
                    { thai: "", english: "to send" },
                    { thai: "", english: "to watch" },
                    { thai: "", english: "to see" },
                    { thai: "", english: "to look at" },
                    { thai: "", english: "to hear" },
                    { thai: "", english: "to listen" },
                    { thai: "", english: "to taste" },
                    { thai: "", english: "to smell" },
                    { thai: "", english: "to touch" },
                    { thai: "", english: "to think" },
                    { thai: "", english: "to feel" },
                    { thai: "", english: "to understand" },
                    { thai: "", english: "to remember" },
                    { thai: "", english: "to forget" },
                    { thai: "", english: "to hurry" },
                    { thai: "", english: "to be late/delayed" },
                    { thai: "", english: "to be fast" },
                    { thai: "", english: "to take/want" },
                    { thai: "", english: "to want" },
                    { thai: "", english: "must/have to" },
                    { thai: "", english: "can/get" },
                    { thai: "", english: "to be" },
                    { thai: "", english: "to have" },
                    { thai: "", english: "to be at/live" },
                    { thai: "", english: "to do/make" },
                    { thai: "", english: "to eat" },
                    { thai: "", english: "to drink" },
                    { thai: "", english: "to help" },
                    { thai: "", english: "to try (test/sample)" },
                    { thai: "", english: "to know" }
                ]
            },
            {
                name: "Communication",
                words: [
                    { thai: "", english: "to speak" },
                    { thai: "", english: "to chat/talk" },
                    { thai: "", english: "to call (phone)" },
                    { thai: "", english: "to talk together" },
                    { thai: "", english: "to tell/narrate" },
                    { thai: "", english: "to explain" },
                    { thai: "", english: "to ask" },
                    { thai: "", english: "to answer" },
                    { thai: "", english: "to tell/inform" },
                    { thai: "", english: "to clarify" },
                    { thai: "", english: "to warn/remind" },
                    { thai: "", english: "to promise" },
                    { thai: "", english: "to lie" },
                    { thai: "", english: "to recommend/introduce" },
                    { thai: "", english: "to contact" },
                    { thai: "", english: "to announce" },
                    { thai: "", english: "to read" },
                    { thai: "", english: "to write" },
                    { thai: "", english: "hello/goodbye" },
                    { thai: "", english: "thank you" },
                    { thai: "", english: "excuse me/sorry" },
                    { thai: "", english: "never mind/no problem" },
                    { thai: "", english: "can you help?" },
                    { thai: "", english: "don't understand" },
                    { thai: "", english: "speak slowly" },
                    { thai: "", english: "what" },
                    { thai: "", english: "why" },
                    { thai: "", english: "how" },
                    { thai: "", english: "how (informal)" },
                    { thai: "", english: "when" },
                    { thai: "", english: "how many" },
                    { thai: "", english: "who" },
                    { thai: "", english: "where" },
                    { thai: "", english: "go ahead/sure" },
                    { thai: "", english: "don't want" },
                    { thai: "", english: "don't know" },
                    { thai: "", english: "don't have" },
                    { thai: "", english: "finished/done" },
                    { thai: "", english: "wait/moment" },
                    { thai: "", english: "wait a moment" }
                ]
            },
            {
                name: "Education & Learning",
                words: [
                    { thai: "", english: "to teach" },
                    { thai: "", english: "to learn" },
                    { thai: "", english: "to write down/note" },
                    { thai: "", english: "to study" },
                    { thai: "", english: "to take a test" },
                    { thai: "", english: "to fail" },
                    { thai: "", english: "to review" },
                    { thai: "", english: "to try (make effort)" },
                    { thai: "", english: "to practice" },
                    { thai: "", english: "housework" },
                    { thai: "", english: "homework (school)" },
                    { thai: "", english: "degree" },
                    { thai: "", english: "college" },
                    { thai: "", english: "university" },
                    { thai: "", english: "school" },
                    { thai: "", english: "classroom" },
                    { thai: "", english: "library" },
                    { thai: "", english: "sports field" },
                    { thai: "", english: "book" },
                    { thai: "", english: "pen" },
                    { thai: "", english: "pencil" },
                    { thai: "", english: "paper" },
                    { thai: "", english: "scissors" },
                    { thai: "", english: "knowledge" },
                    { thai: "", english: "experience" }
                ]
            },
            {
                name: "Home & Furniture",
                words: [
                    { thai: "", english: "house/home" },
                    { thai: "", english: "room" },
                    { thai: "", english: "bedroom" },
                    { thai: "", english: "kitchen" },
                    { thai: "", english: "bathroom" },
                    { thai: "", english: "living room" },
                    { thai: "", english: "door" },
                    { thai: "", english: "window" },
                    { thai: "", english: "floor" },
                    { thai: "", english: "wall" },
                    { thai: "", english: "roof" },
                    { thai: "", english: "stairs" },
                    { thai: "", english: "chair" },
                    { thai: "", english: "table" },
                    { thai: "", english: "bed" },
                    { thai: "", english: "cabinet/closet" },
                    { thai: "", english: "refrigerator" },
                    { thai: "", english: "air conditioner" },
                    { thai: "", english: "fan" },
                    { thai: "", english: "key" },
                    { thai: "", english: "blanket" },
                    { thai: "", english: "pillow" },
                    { thai: "", english: "mattress" },
                    { thai: "", english: "bed sheet" },
                    { thai: "", english: "mirror" },
                    { thai: "", english: "towel" }
                ]
            },
            {
                name: "Clothing & Accessories",
                words: [
                    { thai: "", english: "shirt" },
                    { thai: "", english: "pants" },
                    { thai: "", english: "skirt" },
                    { thai: "", english: "shoes" },
                    { thai: "", english: "socks" },
                    { thai: "", english: "hat" },
                    { thai: "", english: "glasses" },
                    { thai: "", english: "bag" },
                    { thai: "", english: "umbrella" },
                    { thai: "", english: "ring" },
                    { thai: "", english: "necklace" },
                    { thai: "", english: "gold/golden (color)" },
                    { thai: "", english: "diamond" },
                    { thai: "", english: "to get dressed" },
                    { thai: "", english: "to wash (clothes)" },
                    { thai: "", english: "belt" },
                    { thai: "", english: "to dry (in sun)" },
                    { thai: "", english: "wristwatch" }
                ]
            },
            {
                name: "Travel & Transport",
                words: [
                    { thai: "", english: "taxi" },
                    { thai: "", english: "van" },
                    { thai: "", english: "bus" },
                    { thai: "", english: "train" },
                    { thai: "", english: "skytrain/metro" },
                    { thai: "", english: "boat" },
                    { thai: "", english: "airplane" },
                    { thai: "", english: "airport" },
                    { thai: "", english: "station" },
                    { thai: "", english: "bus stop" },
                    { thai: "", english: "ticket" },
                    { thai: "", english: "buy ticket" },
                    { thai: "", english: "get on (vehicle)" },
                    { thai: "", english: "get off (vehicle)" },
                    { thai: "", english: "where are you going?" },
                    { thai: "", english: "to arrive" },
                    { thai: "", english: "turn left" },
                    { thai: "", english: "turn right" },
                    { thai: "", english: "go straight" },
                    { thai: "", english: "slow down" },
                    { thai: "", english: "faster please" },
                    { thai: "", english: "here" },
                    { thai: "", english: "there" },
                    { thai: "", english: "near/close" },
                    { thai: "", english: "far" },
                    { thai: "", english: "lost/get lost" },
                    { thai: "", english: "map" },
                    { thai: "", english: "address" },
                    { thai: "", english: "road/street" },
                    { thai: "", english: "side street/alley" },
                    { thai: "", english: "bridge" },
                    { thai: "", english: "hotel" },
                    { thai: "", english: "room (hotel)" },
                    { thai: "", english: "to book/reserve" },
                    { thai: "", english: "to cancel" },
                    { thai: "", english: "check in" },
                    { thai: "", english: "check out" },
                    { thai: "", english: "passport" },
                    { thai: "", english: "visa" }
                ]
            },
            {
                name: "Places & Sights",
                words: [
                    { thai: "", english: "temple" },
                    { thai: "", english: "Buddha statue" },
                    { thai: "", english: "museum" },
                    { thai: "", english: "park" },
                    { thai: "", english: "zoo" },
                    { thai: "", english: "market" },
                    { thai: "", english: "shop/store" },
                    { thai: "", english: "department store/mall" },
                    { thai: "", english: "restaurant" },
                    { thai: "", english: "bank" },
                    { thai: "", english: "office" },
                    { thai: "", english: "company" }
                ]
            },
            {
                name: "Weather & Seasons",
                words: [
                    { thai: "", english: "weather/air" },
                    { thai: "", english: "rain" },
                    { thai: "", english: "it's raining" },
                    { thai: "", english: "sunlight" },
                    { thai: "", english: "wind" },
                    { thai: "", english: "cloud" },
                    { thai: "", english: "light blue (sii faa)" },
                    { thai: "", english: "storm" },
                    { thai: "", english: "lightning" },
                    { thai: "", english: "thunder" },
                    { thai: "", english: "flood" },
                    { thai: "", english: "humid" },
                    { thai: "", english: "dry" },
                    { thai: "", english: "fog" },
                    { thai: "", english: "good weather" },
                    { thai: "", english: "bad weather" },
                    { thai: "", english: "very hot" },
                    { thai: "", english: "very cold" },
                    { thai: "", english: "hot and humid" },
                    { thai: "", english: "season" },
                    { thai: "", english: "rainy season" },
                    { thai: "", english: "hot season" },
                    { thai: "", english: "cool season" },
                    { thai: "", english: "temperature" },
                    { thai: "", english: "degree (temperature)" },
                    { thai: "", english: "world/earth" },
                    { thai: "", english: "sun" },
                    { thai: "", english: "moon" },
                    { thai: "", english: "star" },
                    { thai: "", english: "the sky" }
                ]
            },
            {
                name: "Shopping & Money",
                words: [
                    { thai: "", english: "price" },
                    { thai: "", english: "money" },
                    { thai: "", english: "baht (currency)" },
                    { thai: "", english: "exchange money" },
                    { thai: "", english: "credit card" },
                    { thai: "", english: "cash" },
                    { thai: "", english: "receipt" },
                    { thai: "", english: "gift/souvenir" },
                    { thai: "", english: "souvenir" },
                    { thai: "", english: "how much?" },
                    { thai: "", english: "too expensive" },
                    { thai: "", english: "discount please" },
                    { thai: "", english: "where is the bathroom?" },
                    { thai: "", english: "menu" },
                    { thai: "", english: "to order food" },
                    { thai: "", english: "check/bill please" },
                    { thai: "", english: "tip (gratuity)" },
                    { thai: "", english: "no sugar" },
                    { thai: "", english: "no ice" },
                    { thai: "", english: "to save/economize" },
                    { thai: "", english: "to choose" },
                    { thai: "", english: "to decide" },
                    { thai: "", english: "to share" },
                    { thai: "", english: "to compare" }
                ]
            },
            {
                name: "Work & Business",
                words: [
                    { thai: "", english: "to work" },
                    { thai: "", english: "work/job" },
                    { thai: "", english: "profession/career" },
                    { thai: "", english: "salary" },
                    { thai: "", english: "meeting" },
                    { thai: "", english: "appointment" },
                    { thai: "", english: "interview" },
                    { thai: "", english: "to apply" },
                    { thai: "", english: "to sign" },
                    { thai: "", english: "to type/print" },
                    { thai: "", english: "to send email" },
                    { thai: "", english: "to call (phone)" },
                    { thai: "", english: "report" },
                    { thai: "", english: "document" },
                    { thai: "", english: "copy" },
                    { thai: "", english: "original" },
                    { thai: "", english: "form" },
                    { thai: "", english: "application form" },
                    { thai: "", english: "ID card" },
                    { thai: "", english: "driver's license" },
                    { thai: "", english: "insurance" },
                    { thai: "", english: "tax" },
                    { thai: "", english: "expenses" },
                    { thai: "", english: "budget" },
                    { thai: "", english: "profit" },
                    { thai: "", english: "loss (financial)" },
                    { thai: "", english: "debt" },
                    { thai: "", english: "interest (financial)" },
                    { thai: "", english: "account" },
                    { thai: "", english: "bank account" },
                    { thai: "", english: "to deposit/leave with" },
                    { thai: "", english: "to deposit money" },
                    { thai: "", english: "to withdraw money" },
                    { thai: "", english: "to transfer" },
                    { thai: "", english: "to transfer money" },
                    { thai: "", english: "to borrow money (formal loan)" },
                    { thai: "", english: "to pay" }
                ]
            },
            {
                name: "Technology",
                words: [
                    { thai: "", english: "television" },
                    { thai: "", english: "telephone" },
                    { thai: "", english: "mobile phone" },
                    { thai: "", english: "computer" },
                    { thai: "", english: "internet" },
                    { thai: "", english: "password/code" },
                    { thai: "", english: "message" },
                    { thai: "", english: "picture/photo" },
                    { thai: "", english: "video" },
                    { thai: "", english: "song/music" },
                    { thai: "", english: "newspaper" },
                    { thai: "", english: "magazine" },
                    { thai: "", english: "battery" },
                    { thai: "", english: "screen" },
                    { thai: "", english: "plug" },
                    { thai: "", english: "switch" },
                    { thai: "", english: "electricity" },
                    { thai: "", english: "light bulb" },
                    { thai: "", english: "candle" },
                    { thai: "", english: "flashlight" },
                    { thai: "", english: "camera" },
                    { thai: "", english: "screen (n.)" },
                    { thai: "", english: "speaker" },
                    { thai: "", english: "headphones" },
                    { thai: "", english: "mouse (computer)" },
                    { thai: "", english: "keyboard" },
                    { thai: "", english: "printer" },
                    { thai: "", english: "game" },
                    { thai: "", english: "app" },
                    { thai: "", english: "website" },
                    { thai: "", english: "wifi" },
                    { thai: "", english: "signal" },
                    { thai: "", english: "to download" },
                    { thai: "", english: "to upload" },
                    { thai: "", english: "to turn on" },
                    { thai: "", english: "to turn off" },
                    { thai: "", english: "to charge" },
                    { thai: "", english: "to take a photo" },
                    { thai: "", english: "to record/save" },
                    { thai: "", english: "to delete/erase/subtract" },
                    { thai: "", english: "to copy" },
                    { thai: "", english: "to search" }
                ]
            },
            {
                name: "Entertainment & Sports",
                words: [
                    { thai: "", english: "news" },
                    { thai: "", english: "advertisement" },
                    { thai: "", english: "drama/series" },
                    { thai: "", english: "movie (casual)" },
                    { thai: "", english: "movie/film (formal)" },
                    { thai: "", english: "cartoon" },
                    { thai: "", english: "program/show" },
                    { thai: "", english: "channel" },
                    { thai: "", english: "to sing/cry out" },
                    { thai: "", english: "to dance" },
                    { thai: "", english: "to play" },
                    { thai: "", english: "to win" },
                    { thai: "", english: "to compete" },
                    { thai: "", english: "to compete/race" },
                    { thai: "", english: "sport" },
                    { thai: "", english: "football/soccer" },
                    { thai: "", english: "basketball" },
                    { thai: "", english: "volleyball" },
                    { thai: "", english: "to swim" },
                    { thai: "", english: "to cycle" },
                    { thai: "", english: "to play golf" },
                    { thai: "", english: "boxing" },
                    { thai: "", english: "yoga" },
                    { thai: "", english: "massage" },
                    { thai: "", english: "spa" }
                ]
            },
            {
                name: "Personal Care",
                words: [
                    { thai: "", english: "haircut" },
                    { thai: "", english: "to do hair" },
                    { thai: "", english: "to dye hair" },
                    { thai: "", english: "to shave" },
                    { thai: "", english: "to put on makeup" },
                    { thai: "", english: "to apply lipstick" },
                    { thai: "", english: "perfume" },
                    { thai: "", english: "soap" },
                    { thai: "", english: "shampoo" },
                    { thai: "", english: "cream/lotion" },
                    { thai: "", english: "toothpaste" },
                    { thai: "", english: "toothbrush" },
                    { thai: "", english: "comb" },
                    { thai: "", english: "hair dryer" },
                    { thai: "", english: "razor/shaver" },
                    { thai: "", english: "nail clipper" },
                    { thai: "", english: "to wash" },
                    { thai: "", english: "to repair/fix" },
                    { thai: "", english: "to prepare oneself" },
                    { thai: "", english: "to change/alter" }
                ]
            },
            {
                name: "Household Chores",
                words: [
                    { thai: "", english: "to sweep" },
                    { thai: "", english: "to wipe" },
                    { thai: "", english: "to wash dishes" },
                    { thai: "", english: "to clean" },
                    { thai: "", english: "to tidy room" },
                    { thai: "", english: "to plant/grow" },
                    { thai: "", english: "to water (plants)" },
                    { thai: "", english: "to build/create" },
                    { thai: "", english: "to destroy/break" },
                    { thai: "", english: "to fix/correct" },
                    { thai: "", english: "to improve" },
                    { thai: "", english: "to develop" },
                    { thai: "", english: "to design" },
                    { thai: "", english: "to draw" },
                    { thai: "", english: "to paint/color" }
                ]
            },
            {
                name: "Abstract & Concepts",
                words: [
                    { thai: "", english: "good luck" },
                    { thai: "", english: "bad luck" },
                    { thai: "", english: "dream" },
                    { thai: "", english: "truth/reality" },
                    { thai: "", english: "secret" },
                    { thai: "", english: "problem" },
                    { thai: "", english: "answer" },
                    { thai: "", english: "question" },
                    { thai: "", english: "reason" },
                    { thai: "", english: "idea/thought" },
                    { thai: "", english: "success" },
                    { thai: "", english: "failure" },
                    { thai: "", english: "opportunity/chance" },
                    { thai: "", english: "way/path" },
                    { thai: "", english: "choice/option" },
                    { thai: "", english: "goal/target" },
                    { thai: "", english: "plan" },
                    { thai: "", english: "rule" },
                    { thai: "", english: "law" },
                    { thai: "", english: "right (legal)" },
                    { thai: "", english: "duty/responsibility" },
                    { thai: "", english: "crowded" }
                ]
            },
            {
                name: "Physical Actions",
                words: [
                    { thai: "", english: "to return/give back" },
                    { thai: "", english: "to borrow (general)" },
                    { thai: "", english: "to lend" },
                    { thai: "", english: "to keep/collect" },
                    { thai: "", english: "to throw away" },
                    { thai: "", english: "to find/look for" },
                    { thai: "", english: "to meet/find" },
                    { thai: "", english: "to encounter/meet" },
                    { thai: "", english: "to separate" },
                    { thai: "", english: "to combine/include" },
                    { thai: "", english: "to add/increase" },
                    { thai: "", english: "to reduce/decrease" },
                    { thai: "", english: "to expand" },
                    { thai: "", english: "to shrink/abbreviate" },
                    { thai: "", english: "to pull" },
                    { thai: "", english: "to push" },
                    { thai: "", english: "to lift" },
                    { thai: "", english: "to place/put down" },
                    { thai: "", english: "to hang" },
                    { thai: "", english: "to unwrap/open" },
                    { thai: "", english: "to wrap" },
                    { thai: "", english: "to cut" }
                ]
            },
            {
                name: "Grammar & Particles",
                words: [
                    { thai: "", english: "but" },
                    { thai: "", english: "and" },
                    { thai: "", english: "or" },
                    { thai: "", english: "because" },
                    { thai: "", english: "if" },
                    { thai: "", english: "then/also" },
                    { thai: "", english: "also/too/with" },
                    { thai: "", english: "so/at all/very" },
                    { thai: "", english: "(softener particle)" },
                    { thai: "", english: "(polite particle, male)" },
                    { thai: "", english: "(polite particle, female)" },
                    { thai: "", english: "(question particle, female)" },
                    { thai: "", english: "(yes/no question)" },
                    { thai: "", english: "(urging particle)" },
                    { thai: "", english: "(really?/is that so?)" },
                    { thai: "", english: "I (female)" },
                    { thai: "", english: "I (male)" },
                    { thai: "", english: "you" },
                    { thai: "", english: "he/she/they" },
                    { thai: "", english: "we" },
                    { thai: "", english: "it" },
                    { thai: "", english: "this" },
                    { thai: "", english: "that" },
                    { thai: "", english: "that (over there)" },
                    { thai: "", english: "of/belonging to" },
                    { thai: "", english: "that/which/where" },
                    { thai: "", english: "not/no" },
                    { thai: "", english: "yes/correct" },
                    { thai: "", english: "no/not correct" },
                    { thai: "", english: "enough" },
                    { thai: "", english: "very/much" },
                    { thai: "", english: "little/few" },
                    { thai: "", english: "every/all" },
                    { thai: "", english: "some" },
                    { thai: "", english: "just/only" },
                    { thai: "", english: "oneself/itself" }
                ]
            },
            {
                name: "Common Phrases",
                words: [
                    { thai: "", english: "How are you?" },
                    { thai: "", english: "I'm fine" },
                    { thai: "", english: "Not well/sick" },
                    { thai: "", english: "Long time no see" },
                    { thai: "", english: "Nice to meet you" },
                    { thai: "", english: "Have you eaten?" },
                    { thai: "", english: "Already ate" },
                    { thai: "", english: "Haven't eaten yet" },
                    { thai: "", english: "What's up?" },
                    { thai: "", english: "How's it going?" },
                    { thai: "", english: "See you later" },
                    { thai: "", english: "See you tomorrow" },
                    { thai: "", english: "Good luck!" },
                    { thai: "", english: "Congratulations!" },
                    { thai: "", english: "Happy birthday!" },
                    { thai: "", english: "Best wishes" },
                    { thai: "", english: "Up to you" },
                    { thai: "", english: "Never mind/forget it" },
                    { thai: "", english: "Really?" },
                    { thai: "", english: "No way!" },
                    { thai: "", english: "Of course/certainly" },
                    { thai: "", english: "I understand now" },
                    { thai: "", english: "Wait a moment" },
                    { thai: "", english: "Make yourself at home" },
                    { thai: "", english: "Please (go ahead)" },
                    { thai: "", english: "Sorry about that" },
                    { thai: "", english: "Don't worry" },
                    { thai: "", english: "Be careful" },
                    { thai: "", english: "Are you tired?" },
                    { thai: "", english: "Are you hungry?" },
                    { thai: "", english: "It's very hot" },
                    { thai: "", english: "It's raining" },
                    { thai: "", english: "What would you like?" },
                    { thai: "", english: "Very delicious!" },
                    { thai: "", english: "Is it cool?" },
                    { thai: "", english: "Is it fun?" },
                    { thai: "", english: "It's been so long!" },
                    { thai: "", english: "I miss you" },
                    { thai: "", english: "See you again" },
                    { thai: "", english: "What should I do?" },
                    { thai: "", english: "Don't be shy/Don't hold back" },
                    { thai: "", english: "It's no big deal" },
                    { thai: "", english: "I'm heading home" },
                    { thai: "", english: "See you around" },
                    { thai: "", english: "Take care of yourself" },
                    { thai: "", english: "Rest well" },
                    { thai: "", english: "Get well soon" },
                    { thai: "", english: "Have a safe trip" },
                    { thai: "", english: "Don't forget" },
                    { thai: "", english: "Do you understand?" },
                    { thai: "", english: "Can you say that again?" },
                    { thai: "", english: "It's okay/Never mind" },
                    { thai: "", english: "Alright then/That works" },
                    { thai: "", english: "Are you sure?" },
                    { thai: "", english: "Can do/Possible" }
                ]
            },
            {
                name: "Development & International",
                words: [
                    { thai: "", english: "development" },
                    { thai: "", english: "sustainable development" },
                    { thai: "", english: "sustainability" },
                    { thai: "", english: "United Nations" },
                    { thai: "", english: "organization" },
                    { thai: "", english: "international organization" },
                    { thai: "", english: "goal/target" },
                    { thai: "", english: "policy" },
                    { thai: "", english: "project/program" },
                    { thai: "", english: "cooperation" },
                    { thai: "", english: "assistance/aid" },
                    { thai: "", english: "funding/capital" },
                    { thai: "", english: "budget" },
                    { thai: "", english: "poverty" },
                    { thai: "", english: "inequality" },
                    { thai: "", english: "environment" },
                    { thai: "", english: "climate change" },
                    { thai: "", english: "renewable energy" },
                    { thai: "", english: "clean energy" },
                    { thai: "", english: "education" },
                    { thai: "", english: "public health" },
                    { thai: "", english: "human rights" },
                    { thai: "", english: "equality" },
                    { thai: "", english: "gender equality" },
                    { thai: "", english: "community" },
                    { thai: "", english: "people/citizens" },
                    { thai: "", english: "stakeholder" },
                    { thai: "", english: "civil society" },
                    { thai: "", english: "private sector" },
                    { thai: "", english: "public sector/government" },
                    { thai: "", english: "government" },
                    { thai: "", english: "ministry" },
                    { thai: "", english: "developing country" },
                    { thai: "", english: "developed country" },
                    { thai: "", english: "resources" },
                    { thai: "", english: "natural resources" },
                    { thai: "", english: "clean water" },
                    { thai: "", english: "sanitation" },
                    { thai: "", english: "infrastructure" },
                    { thai: "", english: "meeting/conference" },
                    { thai: "", english: "agreement" },
                    { thai: "", english: "treaty" },
                    { thai: "", english: "negotiation" },
                    { thai: "", english: "indicator" },
                    { thai: "", english: "monitoring" },
                    { thai: "", english: "evaluation" },
                    { thai: "", english: "report" },
                    { thai: "", english: "data/information" },
                    { thai: "", english: "research" },
                    { thai: "", english: "innovation" },
                    { thai: "", english: "technology" },
                    { thai: "", english: "digital" },
                    { thai: "", english: "refugee" },
                    { thai: "", english: "migration" },
                    { thai: "", english: "humanitarian" },
                    { thai: "", english: "disaster" },
                    { thai: "", english: "emergency" },
                    { thai: "", english: "recovery/rehabilitation" },
                    { thai: "", english: "security" },
                    { thai: "", english: "peace" }
                ]
            },
            {
                name: "Medical & Health",
                words: [
                    { thai: "", english: "hospital" },
                    { thai: "", english: "clinic" },
                    { thai: "", english: "pharmacy" },
                    { thai: "", english: "prescription" },
                    { thai: "", english: "symptom" },
                    { thai: "", english: "cold/flu" },
                    { thai: "", english: "headache" },
                    { thai: "", english: "stomachache" },
                    { thai: "", english: "sore throat" },
                    { thai: "", english: "cough" },
                    { thai: "", english: "sneeze" },
                    { thai: "", english: "allergy" },
                    { thai: "", english: "wound" },
                    { thai: "", english: "blood" },
                    { thai: "", english: "blood pressure" },
                    { thai: "", english: "diabetes" },
                    { thai: "", english: "heart" },
                    { thai: "", english: "lung" },
                    { thai: "", english: "liver" },
                    { thai: "", english: "kidney" },
                    { thai: "", english: "bone" },
                    { thai: "", english: "muscle" },
                    { thai: "", english: "health insurance" },
                    { thai: "", english: "injection" },
                    { thai: "", english: "vaccine" }
                ]
            },
            {
                name: "Legal & Government",
                words: [
                    { thai: "", english: "law" },
                    { thai: "", english: "right" },
                    { thai: "", english: "duty/obligation" },
                    { thai: "", english: "court" },
                    { thai: "", english: "police" },
                    { thai: "", english: "lawyer" },
                    { thai: "", english: "judge" },
                    { thai: "", english: "case" },
                    { thai: "", english: "evidence" },
                    { thai: "", english: "witness" },
                    { thai: "", english: "contract" },
                    { thai: "", english: "license/permit" },
                    { thai: "", english: "visa" },
                    { thai: "", english: "passport" },
                    { thai: "", english: "ID card" },
                    { thai: "", english: "house registration" },
                    { thai: "", english: "driver's license" },
                    { thai: "", english: "tax" },
                    { thai: "", english: "election" },
                    { thai: "", english: "parliament" }
                ]
            },
            {
                name: "Directions & Location",
                words: [
                    { thai: "", english: "north" },
                    { thai: "", english: "south" },
                    { thai: "", english: "east" },
                    { thai: "", english: "west" },
                    { thai: "", english: "go straight" },
                    { thai: "", english: "turn left" },
                    { thai: "", english: "turn right" },
                    { thai: "", english: "U-turn" },
                    { thai: "", english: "intersection" },
                    { thai: "", english: "roundabout" },
                    { thai: "", english: "bridge" },
                    { thai: "", english: "tunnel" },
                    { thai: "", english: "expressway" },
                    { thai: "", english: "shortcut" },
                    { thai: "", english: "parking" },
                    { thai: "", english: "bus stop" },
                    { thai: "", english: "train station" },
                    { thai: "", english: "in front" },
                    { thai: "", english: "behind" },
                    { thai: "", english: "above" },
                    { thai: "", english: "below" },
                    { thai: "", english: "inside" },
                    { thai: "", english: "outside" },
                    { thai: "", english: "between" },
                    { thai: "", english: "opposite" }
                ]
            },
            {
                name: "Materials & Textures",
                words: [
                    { thai: "", english: "wood" },
                    { thai: "", english: "steel/iron" },
                    { thai: "", english: "gold" },
                    { thai: "", english: "silver" },
                    { thai: "", english: "copper" },
                    { thai: "", english: "plastic" },
                    { thai: "", english: "glass" },
                    { thai: "", english: "paper" },
                    { thai: "", english: "leather" },
                    { thai: "", english: "cloth/fabric" },
                    { thai: "", english: "rubber" },
                    { thai: "", english: "stone" },
                    { thai: "", english: "soil/earth" },
                    { thai: "", english: "sand" },
                    { thai: "", english: "concrete" },
                    { thai: "", english: "soft" },
                    { thai: "", english: "hard" },
                    { thai: "", english: "rough" },
                    { thai: "", english: "smooth" },
                    { thai: "", english: "wet" },
                    { thai: "", english: "dry" }
                ]
            }
        ];

        // Generate mixed lists from themed lists
        // Mixed list size (cards per list)
        let mixedListSize = parseInt(localStorage.getItem('thaiFlashcardsMixedListSize')) || 200;
        
        function generateMixedLists(chunkSize = mixedListSize, forceRegenerate = false) {
            // Check if we have saved mixed lists and they match current settings
            const savedMixedLists = localStorage.getItem('thaiFlashcardsMixedListsData');
            const savedChunkSize = parseInt(localStorage.getItem('thaiFlashcardsMixedListsChunkSize')) || 0;
            
            if (!forceRegenerate && savedMixedLists && savedChunkSize === chunkSize) {
                try {
                    const parsed = JSON.parse(savedMixedLists);
                    // Verify the total word count matches (in case vocab changed)
                    const totalWords = themedLists.reduce((sum, list) => sum + list.words.length, 0);
                    const savedTotal = parsed.reduce((sum, list) => sum + list.words.length, 0);
                    if (totalWords === savedTotal) {
                        return parsed;
                    }
                } catch (e) {
                    // If parsing fails, regenerate
                }
            }
            
            // Collect all words with their theme index for even distribution
            const allWords = [];
            themedLists.forEach((theme, themeIdx) => {
                theme.words.forEach(word => {
                    allWords.push({ ...word, themeIdx });
                });
            });
            
            // Randomly shuffle all words
            for (let i = allWords.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allWords[i], allWords[j]] = [allWords[j], allWords[i]];
            }
            
            // Calculate how many full lists we can make
            // If remainder is less than half a chunk, merge it with the last list
            const mixedLists = [];
            const remainder = allWords.length % chunkSize;
            const mergeRemainder = remainder > 0 && remainder < chunkSize / 2;
            const numFullLists = mergeRemainder ? Math.floor(allWords.length / chunkSize) : Math.ceil(allWords.length / chunkSize);
            
            for (let i = 0; i < numFullLists; i++) {
                const start = i * chunkSize;
                let end;
                
                // If this is the last list and we're merging remainder, include all remaining words
                if (mergeRemainder && i === numFullLists - 1) {
                    end = allWords.length;
                } else {
                    end = Math.min(start + chunkSize, allWords.length);
                }
                
                const words = allWords.slice(start, end).map(({ thai, english }) => ({ thai, english }));
                mixedLists.push({
                    name: "Mixed List " + (i + 1) + " (" + words.length + " words)",
                    words
                });
            }
            
            // Save to localStorage
            localStorage.setItem('thaiFlashcardsMixedListsData', JSON.stringify(mixedLists));
            localStorage.setItem('thaiFlashcardsMixedListsChunkSize', chunkSize.toString());
            
            return mixedLists;
        }

        let mixedLists = generateMixedLists();
        
        // Current view mode: 'themed' or 'mixed'
        let viewMode = localStorage.getItem('thaiFlashcardsViewMode') || 'mixed';
        
        // Get active vocabulary lists based on view mode
        function getActiveVocabularyLists() {
            return viewMode === 'themed' ? themedLists : mixedLists;
        }
        
        let vocabularyLists = getActiveVocabularyLists();

        const LEARNING_THRESHOLD = 3;
        const BASE_REVIEW_DAYS = 7; // Base review interval for easily learned words
        const MIN_REVIEW_DAYS = 1;  // Minimum review interval for hard words
        
        // Calculate review interval based on difficulty
        // Words learned easily (low incorrect count, high streak) get longer intervals
        // Words learned with difficulty get shorter intervals
        function getReviewInterval(stats) {
            if (!stats) return BASE_REVIEW_DAYS;
            
            const incorrectCount = stats.incorrect || 0;
            const correctCount = stats.correct || 0;
            const streak = stats.consecutiveCorrect || 0;
            
            // Difficulty factor: higher = harder word
            // Based on ratio of incorrect to total attempts and absolute incorrect count
            const totalAttempts = correctCount + incorrectCount;
            const errorRate = totalAttempts > 0 ? incorrectCount / totalAttempts : 0;
            
            // Ease factor: starts at 1.0, increases with streak, decreases with errors
            // Range roughly 0.3 (very hard) to 2.5 (very easy)
            let easeFactor = 1.0;
            easeFactor += (streak - LEARNING_THRESHOLD) * 0.2; // Bonus for streaks beyond threshold
            easeFactor -= errorRate * 1.5; // Penalty for error rate
            easeFactor -= Math.min(incorrectCount * 0.1, 0.5); // Additional penalty for absolute errors
            easeFactor = Math.max(0.3, Math.min(2.5, easeFactor)); // Clamp
            
            // Calculate interval: base * ease factor
            const interval = BASE_REVIEW_DAYS * easeFactor;
            return Math.max(MIN_REVIEW_DAYS, Math.round(interval * 10) / 10);
        }

        // Utility functions - must be defined before use
        function getCardKey(card) { return card.thai + "|" + card.english; }
        
        // Get global stats for a card (not list-dependent)
        function getCardStats(key) {
            if (!cardStats.global) cardStats.global = {};
            return cardStats.global;
        }
        
        // Legacy function for compatibility - redirects to global stats
        function getListStats(idx) { 
            return getCardStats(); 
        }
        
        // Migrate old list-indexed stats to global stats
        function migrateOldStats() {
            if (cardStats.global) return; // Already migrated
            
            cardStats.global = {};
            
            // Merge all old list-based stats into global
            for (let i = 0; i < 100; i++) { // Check up to 100 old list indices
                if (cardStats[i] && typeof cardStats[i] === 'object') {
                    for (const key in cardStats[i]) {
                        if (cardStats[i].hasOwnProperty(key) && key.includes('|')) {
                            // Only copy if we don't already have this key, or if this one has more progress
                            const existing = cardStats.global[key];
                            const incoming = cardStats[i][key];
                            if (!existing || 
                                (incoming.consecutiveCorrect || 0) > (existing.consecutiveCorrect || 0) ||
                                ((incoming.correct || 0) + (incoming.incorrect || 0)) > 
                                ((existing.correct || 0) + (existing.incorrect || 0))) {
                                cardStats.global[key] = incoming;
                            }
                        }
                    }
                    // Remove old list-indexed stats
                    delete cardStats[i];
                }
            }
        }

        let currentListIndex = 0;
        let vocabulary = vocabularyLists[currentListIndex].words;
        let cards = [];
        let currentIndex = 0;
        let isFlipped = false;
        let showThaiFront = localStorage.getItem('thaiFlashcardsThaiFront') !== 'false';
        let autoPlayAudio = localStorage.getItem('thaiFlashcardsAutoPlay') === 'true';
        let currentMode = 'all';
        let cardStats = {};
        let sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
        let sessionState = { cardOrder: [], currentIndex: 0, listIndex: 0, mode: 'all', inProgress: false };
        let favorites = new Set(); // Track favorited card keys
        // Theme variables removed - using light mode only
        
        // Mode-specific state: track cards and position separately for each mode
        let modeState = {
            all: { cards: [], currentIndex: 0 },
            review: { cards: [], currentIndex: 0 }
        };

        // Special list indices (negative to distinguish from vocabulary lists)
        const FAVORITES_LIST = -1;
        const HARDEST_LIST = -2;
        const ALL_CARDS_LIST = -3;

        let touchStartX = 0, touchStartY = 0, currentX = 0, isSwiping = false, lastTouchEnd = 0;

        const flashcard = document.getElementById('flashcard');
        const frontText = document.getElementById('frontText');
        const backText = document.getElementById('backText');
        const frontRomanization = document.getElementById('frontRomanization');
        const backRomanization = document.getElementById('backRomanization');
        const masteryIndicator = document.getElementById('masteryIndicator');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const flipBtn = document.getElementById('flipBtn');
        const sentenceBtn = document.getElementById('sentenceBtn');
        const sentenceExample = document.getElementById('sentenceExample');
        const cardCounter = document.getElementById('cardCounter');
        const progressPercent = document.getElementById('progressPercent');
        const progressFill = document.getElementById('progressFill');
        const correctScore = document.getElementById('correctScore');
        const incorrectScore = document.getElementById('incorrectScore');
        const csvFileInput = document.getElementById('csvFileInput');
        const optionsBtn = document.getElementById('optionsBtn');
        const settingsModal = document.getElementById('settingsModal');
        const statsModal = document.getElementById('statsModal');
        const optionsModal = document.getElementById('optionsModal');
        const resumeModal = document.getElementById('resumeModal');
        const listSelector = document.getElementById('listSelector');
        const listProgressDisplay = document.getElementById('listProgressDisplay');
        const swipeLeft = document.getElementById('swipeLeft');
        const swipeRight = document.getElementById('swipeRight');
        const swipeBarLeft = document.getElementById('swipeBarLeft');
        const swipeBarRight = document.getElementById('swipeBarRight');
        const toast = document.getElementById('toast');
        const modeBtns = document.querySelectorAll('.mode-btn');
        const romanizationToggle = document.getElementById('romanizationToggle');
        
        // App mode (flashcards vs grammar)
        let currentAppMode = 'flashcards';
        
        // Grammar functions
        function renderGrammarLessonsList() {
            var container = document.getElementById('grammarLessonsList');
            var html = '';
            
            // Level colors and icons
            var levelInfo = {
                beginner: { icon: '', color: '#22c55e', label: 'Beginner', order: 0 },
                intermediate: { icon: '', color: '#3b82f6', label: 'Intermediate', order: 1 },
                advanced: { icon: '', color: '#f97316', label: 'Advanced', order: 2 }
            };
            
            // Create sorted indices - group by level, then completed at bottom within each level
            var lessonIndices = grammarLessons.map(function(lesson, index) {
                return { index: index, lesson: lesson, completed: !!lessonProgress[lesson.id] };
            });
            
            // Sort: by level first, then uncompleted before completed, then original order
            lessonIndices.sort(function(a, b) {
                var levelA = levelInfo[a.lesson.level || 'beginner'].order;
                var levelB = levelInfo[b.lesson.level || 'beginner'].order;
                if (levelA !== levelB) return levelA - levelB; // Sort by level
                if (a.completed !== b.completed) return a.completed ? 1 : -1; // Uncompleted first within level
                return a.index - b.index; // Keep original order within groups
            });
            
            // Track current level for section headers
            var currentLevel = null;
            
            lessonIndices.forEach(function(item) {
                var lesson = item.lesson;
                var index = item.index;
                var isCompleted = item.completed;
                var statusClass = isCompleted ? 'completed' : '';
                var statusText = isCompleted ? ' Practice' : 'Start Lesson';
                var level = lesson.level || 'beginner';
                var lvl = levelInfo[level];
                
                // Add level header if new level
                if (level !== currentLevel) {
                    currentLevel = level;
                    html += '<div class="grammar-level-header" style="width:100%;padding:12px 0 8px;margin-top:' + (currentLevel === 'beginner' ? '0' : '16px') + ';">' +
                        '<span style="font-size:1.1em;font-weight:600;color:' + lvl.color + ';">' + lvl.icon + ' ' + lvl.label + '</span>' +
                    '</div>';
                }
                
                html += '<div class="grammar-lesson-card ' + statusClass + '" data-lesson="' + index + '" data-completed="' + (isCompleted ? 'true' : 'false') + '">' +
                    '<div class="lesson-card-header">' +
                        '<span class="lesson-card-title">' + lesson.title + '</span>' +
                    '</div>' +
                    '<div class="lesson-card-thai">' + lesson.structure + '</div>' +
                    '<div class="lesson-card-desc">' + lesson.description + '</div>' +
                    '<div class="lesson-card-example">' +
                        '<div class="thai">' + lesson.examples[0].thai + '</div>' +
                        '<div class="english">' + lesson.examples[0].english + '</div>' +
                    '</div>' +
                    '<div class="lesson-card-footer">' +
                        '<span class="lesson-card-status ' + statusClass + '">' + (isCompleted ? ' Learned' : '') + '</span>' +
                        '<button class="lesson-card-btn ' + statusClass + '">' + statusText + '</button>' +
                    '</div>' +
                '</div>';
            });
            
            container.innerHTML = html;
            
            // Add click listeners
            document.querySelectorAll('.grammar-lesson-card').forEach(function(card) {
                card.addEventListener('click', function(e) {
                    // Prevent double firing if clicking the button
                    if (e.target.classList.contains('lesson-card-btn')) return;
                    
                    var lessonIndex = parseInt(this.getAttribute('data-lesson'));
                    var isCompleted = this.getAttribute('data-completed') === 'true';
                    
                    if (isCompleted) {
                        // Go straight to practice
                        openGrammarLesson(lessonIndex);
                        currentStepIndex = 4; // Go to build sentence step
                        renderLessonStep();
                    } else {
                        openGrammarLesson(lessonIndex);
                    }
                });
            });
            
            // Button click listeners
            document.querySelectorAll('.lesson-card-btn').forEach(function(btn) {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    var card = this.closest('.grammar-lesson-card');
                    var lessonIndex = parseInt(card.getAttribute('data-lesson'));
                    var isCompleted = card.getAttribute('data-completed') === 'true';
                    
                    if (isCompleted) {
                        // Go straight to build practice
                        currentLessonIndex = lessonIndex;
                        var lesson = grammarLessons[lessonIndex];
                        startPractice(lesson.id, 'build');
                    } else {
                        openGrammarLesson(lessonIndex);
                    }
                });
            });
        }
        
        function openGrammarLesson(index) {
            currentLessonIndex = index;
            currentStepIndex = 0;
            
            document.getElementById('grammarLessonsList').style.display = 'none';
            document.getElementById('grammarLessonView').style.display = 'block';
            
            renderLessonStep();
        }
        
        function closeGrammarLesson() {
            currentLessonIndex = null;
            currentStepIndex = 0;
            
            document.getElementById('grammarLessonView').style.display = 'none';
            document.getElementById('grammarLessonsList').style.display = 'flex';
            
            renderGrammarLessonsList();
        }
        
        function renderLessonStep() {
            var lesson = grammarLessons[currentLessonIndex];
            var container = document.getElementById('lessonContent');
            var totalSteps = 5; // Structure, Explanation, Examples, Guided Practice, Build Sentences
            
            document.getElementById('lessonProgress').textContent = (currentStepIndex + 1) + ' / ' + totalSteps;
            
            var html = '';
            
            if (currentStepIndex === 0) {
                // Structure overview
                html = '<div class="lesson-step active">' +
                    '<div class="lesson-step-title">Pattern</div>' +
                    '<div class="lesson-structure">' +
                        '<div class="lesson-structure-thai">' + lesson.structure + '</div>' +
                        '<div class="lesson-structure-roman">' + lesson.structureRoman + '</div>' +
                        '<div class="lesson-structure-english">' + lesson.structureEnglish + '</div>' +
                    '</div>' +
                    '<div class="lesson-explanation">' + lesson.description + '</div>' +
                '</div>';
            } else if (currentStepIndex === 1) {
                // Explanation
                if (lesson.id === 'telling-time') {
                    // Special interactive clock for telling-time lesson
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title">Tap a section to learn</div>' +
                        '<div id="interactiveTimeClockContainer"></div>' +
                    '</div>';
                } else {
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title">How it works</div>' +
                        '<div class="lesson-structure">' +
                            '<div class="lesson-structure-thai">' + lesson.structure + '</div>' +
                        '</div>' +
                        '<div class="lesson-explanation">' + lesson.explanation + '</div>' +
                    '</div>';
                }
            } else if (currentStepIndex === 2) {
                // Examples
                html = '<div class="lesson-step active">' +
                    '<div class="lesson-step-title">Examples</div>' +
                    '<div class="lesson-examples">';
                
                lesson.examples.forEach(function(ex) {
                    html += '<div class="example-card">' +
                        '<div class="example-thai">' + ex.thai + '</div>' +
                        '<div class="example-roman">' + ex.roman + '</div>' +
                        '<div class="example-english">' + ex.english + '</div>' +
                    '</div>';
                });
                
                html += '</div></div>';
            } else if (currentStepIndex === 3) {
                // Step 4: Guided practice
                var hasTemplates = grammarPracticeTemplates[lesson.id];
                
                // Special clock practice for telling-time lesson
                if (lesson.id === 'telling-time') {
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title"> Clock Practice</div>' +
                        '<p style="color: var(--text-secondary); margin-bottom: 16px; text-align: center;">Read the clock and select the correct Thai time:</p>' +
                        '<div id="clockPracticeContainer"></div>' +
                    '</div>';
                } else {
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title">Guided Practice</div>' +
                        '<p style="color: var(--text-secondary); margin-bottom: 16px; text-align: center;">Fill in the grammar words to complete this sentence:</p>';
                    
                    if (hasTemplates) {
                        // Will be populated by startGuidedFillBlank
                        html += '<div id="guidedFillBlankContainer"></div>';
                    } else {
                        html += '<p style="text-align: center; color: var(--text-muted);">No guided practice available for this lesson.</p>';
                    }
                    
                    html += '</div>';
                }
            } else if (currentStepIndex === 4) {
                // Step 5: Build Sentence practice (repeatable)
                var hasTemplates = grammarPracticeTemplates[lesson.id];
                
                // Special extra practice options for telling-time
                if (lesson.id === 'telling-time') {
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title">More Practice</div>' +
                        '<div class="lesson-structure" style="margin-bottom: 16px;">' +
                            '<div class="lesson-structure-thai">' + lesson.structure + '</div>' +
                            '<div class="lesson-structure-english">' + lesson.structureEnglish + '</div>' +
                        '</div>' +
                        '<p style="color: var(--text-secondary); margin-bottom: 20px; text-align: center;">Choose your practice mode:</p>' +
                        '<div class="practice-start-buttons" style="display: flex; flex-direction: column; gap: 12px;">' +
                            '<button class="btn-action" id="clockPracticeBtn" style="width: 100%;">' +
                                '<strong> Clock Practice</strong><br>' +
                                '<small style="opacity: 0.8;">Read analog clock, pick Thai time</small>' +
                            '</button>' +
                            '<button class="btn-action practice-start-btn" data-mode="fillblank" style="width: 100%;">' +
                                '<strong> Fill in the Blank</strong><br>' +
                                '<small style="opacity: 0.8;">Match times to Thai expressions</small>' +
                            '</button>' +
                            '<button class="btn-action practice-start-btn" data-mode="build" style="width: 100%;">' +
                                '<strong> Build Time Words</strong><br>' +
                                '<small style="opacity: 0.8;">Arrange Thai words in correct order</small>' +
                            '</button>' +
                        '</div>' +
                    '</div>';
                } else {
                    html = '<div class="lesson-step active">' +
                        '<div class="lesson-step-title">Build Sentences</div>' +
                        '<div class="lesson-structure" style="margin-bottom: 16px;">' +
                            '<div class="lesson-structure-thai">' + lesson.structure + '</div>' +
                            '<div class="lesson-structure-english">' + lesson.structureEnglish + '</div>' +
                        '</div>';
                    
                    if (hasTemplates) {
                        html += '<p style="color: var(--text-secondary); margin-bottom: 20px; text-align: center;">Arrange the words to build correct sentences.</p>' +
                            '<div class="practice-start-buttons">' +
                                '<button class="btn-action practice-start-btn" data-mode="build" style="width: 100%;">' +
                                    '<strong> Start Practice</strong><br>' +
                                    '<small style="opacity: 0.8;">Arrange Thai words in correct order</small>' +
                                '</button>' +
                            '</div>';
                    } else {
                        html += '<p style="text-align: center; color: var(--text-muted);">No practice available for this lesson.</p>';
                    }
                    
                    html += '</div>';
                }
            }
            
            container.innerHTML = html;
            
            // Handle step-specific setup
            if (currentStepIndex === 1) {
                if (lesson.id === 'telling-time') {
                    // Render interactive time period clock
                    renderInteractiveTimeClock();
                }
            }
            
            if (currentStepIndex === 3) {
                if (lesson.id === 'telling-time') {
                    // Start clock practice for telling-time
                    startClockPractice();
                    // Allow navigation after a couple of questions
                    window.guidedPracticeCompleted = false;
                } else if (grammarPracticeTemplates[lesson.id]) {
                    // Start guided fill-in-blank for other lessons
                    startGuidedFillBlank(lesson.id);
                }
            }
            
            if (currentStepIndex === 4) {
                // Handle telling-time practice buttons
                if (lesson.id === 'telling-time') {
                    var clockBtn = document.getElementById('clockPracticeBtn');
                    if (clockBtn) {
                        clockBtn.addEventListener('click', function() {
                            showClockPracticeModal();
                        });
                    }
                }
                
                document.querySelectorAll('.practice-start-btn').forEach(function(btn) {
                    btn.addEventListener('click', function() {
                        var mode = this.getAttribute('data-mode');
                        startPractice(lesson.id, mode);
                    });
                });
            }
            
            // Update nav buttons
            document.getElementById('lessonPrevBtn').disabled = currentStepIndex === 0;
            var totalSteps = 5;
            document.getElementById('lessonNextBtn').textContent = currentStepIndex === totalSteps - 1 ? 'Finish' : 'Next ';
            
            // Disable Next on guided practice step until completed correctly
            if (currentStepIndex === 3) {
                if (lesson.id === 'telling-time') {
                    // For clock practice, enable Next after first correct answer
                    document.getElementById('lessonNextBtn').disabled = false;
                } else if (grammarPracticeTemplates[lesson.id]) {
                    document.getElementById('lessonNextBtn').disabled = true;
                    window.guidedPracticeCompleted = false;
                } else {
                    document.getElementById('lessonNextBtn').disabled = false;
                }
            } else {
                document.getElementById('lessonNextBtn').disabled = false;
            }
        }
        
        function setupPracticeListeners() {
            var options = document.querySelectorAll('.practice-option');
            var checkBtn = document.getElementById('practiceCheckBtn');
            var selectedIndex = null;
            
            options.forEach(function(opt) {
                opt.addEventListener('click', function() {
                    if (this.classList.contains('correct') || this.classList.contains('incorrect')) return;
                    
                    options.forEach(function(o) { o.classList.remove('selected'); });
                    this.classList.add('selected');
                    selectedIndex = parseInt(this.getAttribute('data-index'));
                    checkBtn.disabled = false;
                });
            });
            
            checkBtn.addEventListener('click', function() {
                if (selectedIndex === null) return;
                
                var selected = document.querySelector('.practice-option.selected');
                var isCorrect = selected.getAttribute('data-correct') === 'true';
                var feedback = document.getElementById('practiceFeedback');
                
                // Show correct/incorrect
                options.forEach(function(opt) {
                    if (opt.getAttribute('data-correct') === 'true') {
                        opt.classList.add('correct');
                    } else if (opt.classList.contains('selected')) {
                        opt.classList.add('incorrect');
                    }
                });
                
                feedback.classList.add('show');
                feedback.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                // Mark lesson as completed
                var lesson = grammarLessons[currentLessonIndex];
                lessonProgress[lesson.id] = true;
                localStorage.setItem('thaiGrammarProgress', JSON.stringify(lessonProgress));
                
                checkBtn.textContent = isCorrect ? ' Correct!' : 'See explanation above';
                checkBtn.disabled = true;
            });
        }
        
        function nextLessonStep() {
            if (currentStepIndex < 4) {
                currentStepIndex++;
                renderLessonStep();
            } else {
                // Mark lesson as completed when finishing
                var lesson = grammarLessons[currentLessonIndex];
                lessonProgress[lesson.id] = true;
                localStorage.setItem('thaiGrammarProgress', JSON.stringify(lessonProgress));
                closeGrammarLesson();
            }
        }
        
        function prevLessonStep() {
            if (currentStepIndex > 0) {
                currentStepIndex--;
                renderLessonStep();
            }
        }
        
        // ============== ALPHABET TRAINING ==============
        
        // Thai consonants with class, sound, and example word
        const thaiConsonants = [
            // Mid class (9 consonants)
            { letter: '', roman: 'g', sound: 'g', class: 'mid', name: 'g gi', thaiName: '', example: ' (chicken)' },
            { letter: '', roman: 'j', sound: 'j', class: 'mid', name: 'j jaan', thaiName: '', example: ' (plate)' },
            { letter: '', roman: 'd', sound: 'd', class: 'mid', name: 'd ch-daa', thaiName: '', example: ' (headdress)' },
            { letter: '', roman: 'dt', sound: 'dt', class: 'mid', name: 'dt bp-dtk', thaiName: '', example: ' (spear)' },
            { letter: '', roman: 'd', sound: 'd', class: 'mid', name: 'd dk', thaiName: '', example: ' (child)' },
            { letter: '', roman: 'dt', sound: 'dt', class: 'mid', name: 'dt dto', thaiName: '', example: ' (turtle)' },
            { letter: '', roman: 'b', sound: 'b', class: 'mid', name: 'b bai-mai', thaiName: '', example: ' (leaf)' },
            { letter: '', roman: 'bp', sound: 'bp', class: 'mid', name: 'bp bplaa', thaiName: '', example: ' (fish)' },
            { letter: '', roman: '', sound: 'silent', class: 'mid', name: ' ang', thaiName: ' ', example: ' (basin)' },
            
            // High class (11 consonants)
            { letter: '', roman: 'k', sound: 'k', class: 'high', name: 'k ki', thaiName: '', example: ' (egg)' },
            { letter: '', roman: 'k', sound: 'k', class: 'high', name: 'k kat', thaiName: '', example: ' (bottle) [obsolete]' },
            { letter: '', roman: 'ch', sound: 'ch', class: 'high', name: 'ch chng', thaiName: '', example: ' (cymbals)' },
            { letter: '', roman: 't', sound: 't', class: 'high', name: 't tng', thaiName: '', example: ' (bag)' },
            { letter: '', roman: 'p', sound: 'p', class: 'high', name: 'p png', thaiName: '', example: ' (bee)' },
            { letter: '', roman: 'f', sound: 'f', class: 'high', name: 'f fa', thaiName: '', example: ' (lid)' },
            { letter: '', roman: 's', sound: 's', class: 'high', name: 's sa-laa', thaiName: '', example: ' (pavilion)' },
            { letter: '', roman: 's', sound: 's', class: 'high', name: 's r-si', thaiName: '', example: ' (hermit)' },
            { letter: '', roman: 's', sound: 's', class: 'high', name: 's sa', thaiName: '', example: ' (tiger)' },
            { letter: '', roman: 'h', sound: 'h', class: 'high', name: 'h hip', thaiName: '', example: ' (chest)' },
            
            // Low class (24 consonants)
            { letter: '', roman: 'k', sound: 'k', class: 'low', name: 'k kwaai', thaiName: '', example: ' (buffalo)' },
            { letter: '', roman: 'k', sound: 'k', class: 'low', name: 'k kon', thaiName: '', example: ' (person) [obsolete]' },
            { letter: '', roman: 'k', sound: 'k', class: 'low', name: 'k r-kang', thaiName: '', example: ' (bell)' },
            { letter: '', roman: 'ng', sound: 'ng', class: 'low', name: 'ng nguu', thaiName: '', example: ' (snake)' },
            { letter: '', roman: 'ch', sound: 'ch', class: 'low', name: 'ch chang', thaiName: '', example: ' (elephant)' },
            { letter: '', roman: 's', sound: 's', class: 'low', name: 's so', thaiName: '', example: ' (chain)' },
            { letter: '', roman: 'ch', sound: 'ch', class: 'low', name: 'ch g-ch', thaiName: '', example: ' (tree)' },
            { letter: '', roman: 'y', sound: 'y', class: 'low', name: 'y yng', thaiName: '', example: ' (woman)' },
            { letter: '', roman: 't', sound: 't', class: 'low', name: 't mon-too', thaiName: '', example: ' (Montho)' },
            { letter: '', roman: 't', sound: 't', class: 'low', name: 't pu-to', thaiName: '', example: ' (elder)' },
            { letter: '', roman: 'n', sound: 'n', class: 'low', name: 'n neen', thaiName: '', example: ' (novice)' },
            { letter: '', roman: 't', sound: 't', class: 'low', name: 't t-han', thaiName: '', example: ' (soldier)' },
            { letter: '', roman: 't', sound: 't', class: 'low', name: 't tong', thaiName: '', example: ' (flag)' },
            { letter: '', roman: 'n', sound: 'n', class: 'low', name: 'n nu', thaiName: '', example: ' (mouse)' },
            { letter: '', roman: 'p', sound: 'p', class: 'low', name: 'p paan', thaiName: '', example: ' (tray)' },
            { letter: '', roman: 'f', sound: 'f', class: 'low', name: 'f fan', thaiName: '', example: ' (teeth)' },
            { letter: '', roman: 'p', sound: 'p', class: 'low', name: 'p sm-pao', thaiName: '', example: ' (junk boat)' },
            { letter: '', roman: 'm', sound: 'm', class: 'low', name: 'm ma', thaiName: '', example: ' (horse)' },
            { letter: '', roman: 'y', sound: 'y', class: 'low', name: 'y yk', thaiName: '', example: ' (giant)' },
            { letter: '', roman: 'r', sound: 'r', class: 'low', name: 'r ra', thaiName: '', example: ' (boat)' },
            { letter: '', roman: 'l', sound: 'l', class: 'low', name: 'l ling', thaiName: '', example: ' (monkey)' },
            { letter: '', roman: 'w', sound: 'w', class: 'low', name: 'w wen', thaiName: '', example: ' (ring)' },
            { letter: '', roman: 'l', sound: 'l', class: 'low', name: 'l j-laa', thaiName: '', example: ' (kite)' },
            { letter: '', roman: 'h', sound: 'h', class: 'low', name: 'h nk-huk', thaiName: '', example: ' (owl)' }
        ];
        
        // Common consonants to start with (most frequently used)
        const commonConsonants = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];
        
        // Alphabet practice state
        let alphabetState = {
            mode: null, // 'recognize', 'sound', 'class'
            currentConsonant: null,
            options: [],
            answered: false,
            score: { correct: 0, total: 0 },
            questionNumber: 0
        };
        
        // Alphabet progress (persisted)
        let alphabetProgress = JSON.parse(localStorage.getItem('thaiAlphabetProgress') || '{}');
        
        // Start alphabet practice mode
        function startAlphabetMode(mode) {
            alphabetState = {
                mode: mode,
                currentConsonant: null,
                options: [],
                answered: false,
                score: { correct: 0, total: 0 },
                questionNumber: 0
            };
            
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('alphabetPracticeView').style.display = 'block';
            
            const modeNames = {
                'recognize': 'Recognition',
                'sound': 'Sound Match',
                'class': 'Tone Class'
            };
            document.getElementById('alphabetPracticeMode').textContent = modeNames[mode];
            
            document.getElementById('alphabetBackBtn').onclick = function() {
                document.getElementById('alphabetPracticeView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
                updateAlphabetProgressDisplay();
            };
            
            nextAlphabetQuestion();
        }
        
        // Generate next alphabet question
        function nextAlphabetQuestion() {
            alphabetState.questionNumber++;
            alphabetState.answered = false;
            
            // Pick a random consonant (prefer common ones for beginners)
            const useCommon = Math.random() < 0.7;
            let pool = useCommon ? thaiConsonants.filter(c => commonConsonants.includes(c.letter)) : thaiConsonants;
            const randomIndex = Math.floor(Math.random() * pool.length);
            alphabetState.currentConsonant = pool[randomIndex];
            
            // Generate options based on mode
            if (alphabetState.mode === 'recognize') {
                alphabetState.options = generateRecognitionOptions(alphabetState.currentConsonant);
            } else if (alphabetState.mode === 'sound') {
                alphabetState.options = generateSoundOptions(alphabetState.currentConsonant);
            }
            
            renderAlphabetQuestion();
        }
        
        // Generate options for recognition mode (letter  sound)
        function generateRecognitionOptions(correct) {
            let options = [correct];
            
            // Find similar sounding consonants as distractors
            const similar = thaiConsonants.filter(c => 
                c.letter !== correct.letter && 
                (c.sound === correct.sound || c.class === correct.class)
            );
            shuffleArray(similar).slice(0, 2).forEach(c => {
                if (options.length < 4) options.push(c);
            });
            
            // Fill with random if needed
            const others = thaiConsonants.filter(c => !options.some(o => o.letter === c.letter));
            shuffleArray(others).slice(0, 4 - options.length).forEach(c => options.push(c));
            
            return shuffleArray(options);
        }
        
        // Generate options for sound mode (sound  letter)
        function generateSoundOptions(correct) {
            let options = [correct];
            
            // Find consonants with same sound as distractors
            const sameSound = thaiConsonants.filter(c => 
                c.letter !== correct.letter && c.sound === correct.sound
            );
            shuffleArray(sameSound).slice(0, 1).forEach(c => {
                if (options.length < 4) options.push(c);
            });
            
            // Add some from same class
            const sameClass = thaiConsonants.filter(c => 
                c.letter !== correct.letter && c.class === correct.class && !options.some(o => o.letter === c.letter)
            );
            shuffleArray(sameClass).slice(0, 1).forEach(c => {
                if (options.length < 4) options.push(c);
            });
            
            // Fill with random
            const others = thaiConsonants.filter(c => !options.some(o => o.letter === c.letter));
            shuffleArray(others).slice(0, 4 - options.length).forEach(c => options.push(c));
            
            return shuffleArray(options);
        }
        
        // Render alphabet question
        function renderAlphabetQuestion() {
            const container = document.getElementById('alphabetPracticeContent');
            const consonant = alphabetState.currentConsonant;
            
            document.getElementById('alphabetScore').textContent = 
                `${alphabetState.score.correct} / ${alphabetState.score.total}`;
            
            const audioBtn = `<button class="quiz-audio-btn" onclick="speakCurrentQuizConsonant()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                </svg>
            </button>`;
            
            let html = '';
            
            if (alphabetState.mode === 'recognize') {
                // Show letter, pick the sound
                html = `
                    <div class="alphabet-question">
                        <div class="alphabet-question-letter">${consonant.letter}${audioBtn}</div>
                        <div class="alphabet-question-prompt">What sound does this make?</div>
                    </div>
                    <div class="alphabet-options">
                        ${alphabetState.options.map((opt, idx) => `
                            <div class="alphabet-option" data-index="${idx}" onclick="selectAlphabetOption(${idx})">
                                <div class="alphabet-option-main">${opt.roman}</div>
                                <div class="alphabet-option-sub">${opt.sound}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div id="alphabetFeedback"></div>
                `;
            } else if (alphabetState.mode === 'sound') {
                // Show sound, pick the letter
                html = `
                    <div class="alphabet-question">
                        <div class="alphabet-question-letter" style="font-size: 2.5em;">${consonant.roman}</div>
                        <div class="alphabet-question-prompt">Which letter makes this sound?</div>
                    </div>
                    <div class="alphabet-options">
                        ${alphabetState.options.map((opt, idx) => `
                            <div class="alphabet-option" data-index="${idx}" onclick="selectAlphabetOption(${idx})">
                                <div class="alphabet-option-main" style="font-size: 2em;">${opt.letter}</div>
                                <div class="alphabet-option-sub">${opt.name}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div id="alphabetFeedback"></div>
                `;
            } else if (alphabetState.mode === 'class') {
                // Show letter, pick the class
                html = `
                    <div class="alphabet-question">
                        <div class="alphabet-question-letter">${consonant.letter}${audioBtn}</div>
                        <div class="alphabet-question-prompt" style="margin-bottom: 8px;">${consonant.roman}</div>
                        <div class="alphabet-question-prompt">What tone class?</div>
                    </div>
                    <div class="class-options">
                        <div class="class-option low" onclick="selectClassOption('low')">
                            <div class="class-option-label">Low</div>
                        </div>
                        <div class="class-option mid" onclick="selectClassOption('mid')">
                            <div class="class-option-label">Mid</div>
                        </div>
                        <div class="class-option high" onclick="selectClassOption('high')">
                            <div class="class-option-label">High</div>
                        </div>
                    </div>
                    <div id="alphabetFeedback"></div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        // Handle option selection for recognize/sound modes
        function selectAlphabetOption(index) {
            if (alphabetState.answered) {
                nextAlphabetQuestion();
                return;
            }
            
            alphabetState.answered = true;
            alphabetState.score.total++;
            
            const selected = alphabetState.options[index];
            const correct = alphabetState.currentConsonant;
            const isCorrect = selected.letter === correct.letter;
            
            if (isCorrect) {
                alphabetState.score.correct++;
                playCorrectSound();
                updateAlphabetProgress(correct.letter, true);
                awardXP(XP_REWARDS.alphabetRecognitionCorrect);
            } else {
                playIncorrectSound();
                updateAlphabetProgress(correct.letter, false);
            }
            
            // Update option styles
            document.querySelectorAll('.alphabet-option').forEach((opt, idx) => {
                const optData = alphabetState.options[idx];
                if (optData.letter === correct.letter) {
                    opt.classList.add('correct-answer');
                    if (isCorrect) opt.classList.add('correct');
                } else if (idx === index) {
                    opt.classList.add('incorrect');
                }
            });
            
            // Show feedback
            showAlphabetFeedback(isCorrect, correct);
        }
        
        // Handle class selection
        function selectClassOption(selectedClass) {
            if (alphabetState.answered) {
                nextAlphabetQuestion();
                return;
            }
            
            alphabetState.answered = true;
            alphabetState.score.total++;
            
            const correct = alphabetState.currentConsonant;
            const isCorrect = selectedClass === correct.class;
            
            if (isCorrect) {
                alphabetState.score.correct++;
                playCorrectSound();
                updateAlphabetProgress(correct.letter, true);
                awardXP(XP_REWARDS.alphabetRecognitionCorrect);
            } else {
                playIncorrectSound();
                updateAlphabetProgress(correct.letter, false);
            }
            
            // Update class option styles
            document.querySelectorAll('.class-option').forEach(opt => {
                if (opt.classList.contains(correct.class)) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains(selectedClass) && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
            
            // Show feedback
            showAlphabetFeedback(isCorrect, correct, true);
        }
        
        // Show feedback after answer
        function showAlphabetFeedback(isCorrect, consonant, isClassMode = false) {
            const feedbackEl = document.getElementById('alphabetFeedback');
            
            const classColors = { low: '#22c55e', mid: '#3b82f6', high: '#f97316' };
            const classInfo = `<span style="color: ${classColors[consonant.class]}; font-weight: 600;">${consonant.class.toUpperCase()} class</span>`;
            
            if (isCorrect) {
                feedbackEl.innerHTML = `
                    <div class="alphabet-feedback correct">
                         Correct!
                    </div>
                    <div class="alphabet-feedback-detail">
                        ${consonant.letter} (${consonant.roman})  ${classInfo}<br>
                        ${consonant.example}
                    </div>
                    <div class="tap-to-continue">Tap anywhere to continue</div>
                `;
            } else {
                feedbackEl.innerHTML = `
                    <div class="alphabet-feedback incorrect">
                         The answer is ${isClassMode ? consonant.class.toUpperCase() : consonant.letter}
                    </div>
                    <div class="alphabet-feedback-detail">
                        ${consonant.letter} (${consonant.roman})  ${classInfo}<br>
                        ${consonant.example}
                    </div>
                    <div class="tap-to-continue">Tap anywhere to continue</div>
                `;
            }
            
            document.getElementById('alphabetScore').textContent = 
                `${alphabetState.score.correct} / ${alphabetState.score.total}`;
            
            // Make container tappable
            document.getElementById('alphabetPracticeContent').onclick = function() {
                if (alphabetState.answered) {
                    this.onclick = null;
                    nextAlphabetQuestion();
                }
            };
        }
        
        // Update progress for a consonant
        function updateAlphabetProgress(letter, correct) {
            if (!alphabetProgress[letter]) {
                alphabetProgress[letter] = { correct: 0, total: 0 };
            }
            alphabetProgress[letter].total++;
            if (correct) alphabetProgress[letter].correct++;
            localStorage.setItem('thaiAlphabetProgress', JSON.stringify(alphabetProgress));
        }
        
        // Update progress display
        function updateAlphabetProgressDisplay() {
            const mastered = Object.values(alphabetProgress).filter(p => p.correct >= 3 && p.correct / p.total >= 0.7).length;
            document.getElementById('consonantsMastered').textContent = mastered;
        }
        
        // Show full alphabet chart
        function showAlphabetChart() {
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('alphabetFlashcardView').style.display = 'none';
            document.getElementById('alphabetChartView').style.display = 'block';
            
            document.getElementById('alphabetChartBackBtn').onclick = function() {
                document.getElementById('alphabetChartView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
            };
            
            renderAlphabetChart();
        }
        
        // ============== FONT STYLES ==============
        
        let fontMatchState = {
            letters: [],
            currentIndex: 0,
            score: 0,
            total: 0
        };
        
        function startFontStyles() {
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('fontStylesView').style.display = 'block';
            
            document.getElementById('fontStylesBackBtn').onclick = function() {
                document.getElementById('fontStylesView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
            };
            
            // Default to compare mode
            switchFontMode('compare');
        }
        
        function switchFontMode(mode) {
            // Update buttons
            document.querySelectorAll('.font-mode-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === mode);
            });
            
            // Show/hide modes
            document.getElementById('fontCompareMode').style.display = mode === 'compare' ? 'block' : 'none';
            document.getElementById('fontMatchMode').style.display = mode === 'match' ? 'block' : 'none';
            
            if (mode === 'compare') {
                renderFontCompareChart();
            } else {
                startFontMatchGame();
            }
        }
        
        function renderFontCompareChart() {
            const chart = document.getElementById('fontCompareChart');
            let html = '';
            
            thaiConsonants.forEach(con => {
                html += `
                    <div class="font-compare-item">
                        <div class="font-compare-traditional">${con.letter}</div>
                        <div class="font-compare-modern">${con.letter}</div>
                        <div class="font-compare-roman">${con.roman}</div>
                    </div>
                `;
            });
            
            chart.innerHTML = html;
        }
        
        function startFontMatchGame() {
            // Shuffle consonants for the game
            fontMatchState.letters = shuffleArray([...thaiConsonants]).slice(0, 10);
            fontMatchState.currentIndex = 0;
            fontMatchState.score = 0;
            fontMatchState.total = fontMatchState.letters.length;
            
            document.getElementById('fontMatchScore').textContent = '0';
            document.getElementById('fontMatchTotal').textContent = fontMatchState.total;
            
            loadFontMatchQuestion();
        }
        
        function loadFontMatchQuestion() {
            if (fontMatchState.currentIndex >= fontMatchState.letters.length) {
                // Game complete
                document.getElementById('fontMatchLetter').innerHTML = '';
                document.getElementById('fontMatchChoices').innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 20px;">
                        <h3>Complete!</h3>
                        <p>Score: ${fontMatchState.score} / ${fontMatchState.total}</p>
                        <button class="wordbuilder-btn-restart" onclick="startFontMatchGame()">Play Again</button>
                    </div>
                `;
                document.getElementById('fontMatchFeedback').style.display = 'none';
                
                return;
            }
            
            const current = fontMatchState.letters[fontMatchState.currentIndex];
            document.getElementById('fontMatchLetter').textContent = current.letter;
            
            // Generate choices (correct + 3 random)
            const otherLetters = thaiConsonants.filter(c => c.letter !== current.letter);
            const shuffledOthers = shuffleArray([...otherLetters]).slice(0, 3);
            const choices = shuffleArray([current, ...shuffledOthers]);
            
            const choicesHtml = choices.map(c => `
                <button class="font-match-choice" data-char="${c.letter}" onclick="checkFontMatch('${c.letter}', '${current.letter}')">${c.letter}</button>
            `).join('');
            
            document.getElementById('fontMatchChoices').innerHTML = choicesHtml;
            document.getElementById('fontMatchFeedback').style.display = 'none';
            
        }
        
        function checkFontMatch(selected, correct) {
            const feedback = document.getElementById('fontMatchFeedback');
            const buttons = document.querySelectorAll('.font-match-choice');
            
            buttons.forEach(btn => {
                btn.classList.add('disabled');
                if (btn.dataset.char === correct) {
                    btn.classList.add('correct');
                } else if (btn.dataset.char === selected && selected !== correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            if (selected === correct) {
                fontMatchState.score++;
                document.getElementById('fontMatchScore').textContent = fontMatchState.score;
                feedback.className = 'font-match-feedback correct';
                feedback.innerHTML = ' Correct! <span style="font-size: 0.8em; opacity: 0.7;">Tap to continue</span>';
                awardXP(XP_REWARDS.fontMatchCorrect);
            } else {
                feedback.className = 'font-match-feedback incorrect';
                feedback.innerHTML = ' The correct answer was highlighted <span style="font-size: 0.8em; opacity: 0.7;">Tap to continue</span>';
            }
            
            feedback.style.display = 'block';
            
            // Enable click anywhere to advance
            document.getElementById('fontMatchMode').onclick = function(e) {
                if (e.target.classList.contains('font-mode-btn')) return;
                document.getElementById('fontMatchMode').onclick = null;
                nextFontMatch();
            };
        }
        
        function nextFontMatch() {
            fontMatchState.currentIndex++;
            loadFontMatchQuestion();
        }
        
        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
        
        // ============== TWO-COLUMN FONT MATCHING ==============
        
        let fontMatchingState = {
            letters: [],
            selectedLeft: null,
            selectedRight: null,
            matchedPairs: new Set(),
            score: 0,
            total: 6,
            startTime: null,
            bestTime: null
        };
        
        function loadFontMatchingBestTime() {
            const saved = localStorage.getItem('thaiFontMatchingBestTime');
            if (saved) {
                fontMatchingState.bestTime = parseFloat(saved);
            }
        }
        
        function saveFontMatchingBestTime(time) {
            if (!fontMatchingState.bestTime || time < fontMatchingState.bestTime) {
                fontMatchingState.bestTime = time;
                localStorage.setItem('thaiFontMatchingBestTime', time.toString());
                return true; // New personal best
            }
            return false;
        }
        
        function startFontMatching() {
            // Load best time from storage
            loadFontMatchingBestTime();
            
            // Hide other views, show font matching
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('fontMatchingView').style.display = 'block';
            
            // Display best time if available
            const bestDisplay = document.getElementById('fontMatchingBestDisplay');
            if (fontMatchingState.bestTime) {
                const formatTime = (seconds) => {
                    if (seconds < 60) {
                        return seconds.toFixed(1) + 's';
                    } else {
                        const mins = Math.floor(seconds / 60);
                        const secs = (seconds % 60).toFixed(1);
                        return `${mins}m ${secs}s`;
                    }
                };
                bestDisplay.textContent = ` Best: ${formatTime(fontMatchingState.bestTime)}`;
            } else {
                bestDisplay.textContent = '';
            }
            
            // Setup back button
            document.getElementById('fontMatchingBackBtn').onclick = function() {
                document.getElementById('fontMatchingView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
            };
            
            // Reset state
            fontMatchingState.selectedLeft = null;
            fontMatchingState.selectedRight = null;
            fontMatchingState.matchedPairs = new Set();
            fontMatchingState.score = 0;
            fontMatchingState.startTime = Date.now();
            
            // Pick 6 random consonants
            fontMatchingState.letters = shuffleArray([...thaiConsonants]).slice(0, 6);
            fontMatchingState.total = fontMatchingState.letters.length;
            
            // Update score display
            document.getElementById('fontMatchingScore').textContent = '0';
            document.getElementById('fontMatchingTotal').textContent = fontMatchingState.total;
            
            // Hide result, show game
            document.getElementById('fontMatchingResult').style.display = 'none';
            document.getElementById('fontMatchingGame').style.display = 'flex';
            
            renderFontMatchingGame();
        }
        
        function renderFontMatchingGame() {
            const leftCol = document.getElementById('fontMatchingLeft');
            const rightCol = document.getElementById('fontMatchingRight');
            
            // Left column: traditional font (in order)
            const leftLetters = [...fontMatchingState.letters];
            
            // Right column: modern font (shuffled differently)
            const rightLetters = shuffleArray([...fontMatchingState.letters]);
            
            // Render left column (traditional)
            leftCol.innerHTML = leftLetters.map((letter, idx) => `
                <div class="font-matching-item left" 
                     data-letter="${letter.letter}" 
                     data-index="${idx}"
                     onclick="selectFontMatchingItem(this, 'left')">
                    ${letter.letter}
                </div>
            `).join('');
            
            // Render right column (modern)
            rightCol.innerHTML = rightLetters.map((letter, idx) => `
                <div class="font-matching-item right" 
                     data-letter="${letter.letter}" 
                     data-index="${idx}"
                     onclick="selectFontMatchingItem(this, 'right')">
                    ${letter.letter}
                </div>
            `).join('');
        }
        
        function selectFontMatchingItem(element, side) {
            const letter = element.dataset.letter;
            
            // Skip if already matched
            if (element.classList.contains('matched')) return;
            
            if (side === 'left') {
                // Deselect previous left selection
                document.querySelectorAll('#fontMatchingLeft .font-matching-item.selected').forEach(el => {
                    el.classList.remove('selected');
                });
                
                // Select this one
                element.classList.add('selected');
                fontMatchingState.selectedLeft = letter;
            } else {
                // Deselect previous right selection
                document.querySelectorAll('#fontMatchingRight .font-matching-item.selected').forEach(el => {
                    el.classList.remove('selected');
                });
                
                // Select this one
                element.classList.add('selected');
                fontMatchingState.selectedRight = letter;
            }
            
            // Check if we have both selections
            if (fontMatchingState.selectedLeft && fontMatchingState.selectedRight) {
                checkFontMatchingPair();
            }
        }
        
        function checkFontMatchingPair() {
            const leftEl = document.querySelector(`#fontMatchingLeft .font-matching-item[data-letter="${fontMatchingState.selectedLeft}"]`);
            const rightEl = document.querySelector(`#fontMatchingRight .font-matching-item[data-letter="${fontMatchingState.selectedRight}"]`);
            
            if (fontMatchingState.selectedLeft === fontMatchingState.selectedRight) {
                // Correct match!
                playCorrectSound();
                
                leftEl.classList.remove('selected');
                rightEl.classList.remove('selected');
                leftEl.classList.add('matched');
                rightEl.classList.add('matched');
                
                fontMatchingState.matchedPairs.add(fontMatchingState.selectedLeft);
                fontMatchingState.score++;
                document.getElementById('fontMatchingScore').textContent = fontMatchingState.score;
                
                // Award XP per match
                awardXP(XP_REWARDS.fontMatchCorrect);
                
                // Check if game complete
                if (fontMatchingState.score >= fontMatchingState.total) {
                    setTimeout(() => {
                        showFontMatchingComplete();
                    }, 500);
                }
            } else {
                // Wrong match - shake and reset
                playIncorrectSound();
                
                leftEl.classList.add('wrong');
                rightEl.classList.add('wrong');
                
                setTimeout(() => {
                    leftEl.classList.remove('selected', 'wrong');
                    rightEl.classList.remove('selected', 'wrong');
                }, 400);
            }
            
            // Reset selections
            fontMatchingState.selectedLeft = null;
            fontMatchingState.selectedRight = null;
        }
        
        function showFontMatchingComplete() {
            // Calculate time taken
            const endTime = Date.now();
            const timeTaken = (endTime - fontMatchingState.startTime) / 1000; // in seconds
            const isNewBest = saveFontMatchingBestTime(timeTaken);
            
            // Award XP for completing the game
            awardXP(XP_REWARDS.fontMatchingGameComplete, 'Game Complete!');
            
            document.getElementById('fontMatchingGame').style.display = 'none';
            document.getElementById('fontMatchingResult').style.display = 'block';
            
            // Format time display
            const formatTime = (seconds) => {
                if (seconds < 60) {
                    return seconds.toFixed(1) + 's';
                } else {
                    const mins = Math.floor(seconds / 60);
                    const secs = (seconds % 60).toFixed(1);
                    return `${mins}m ${secs}s`;
                }
            };
            
            if (isNewBest) {
                document.getElementById('fontMatchingResultIcon').textContent = '';
                document.getElementById('fontMatchingResultText').innerHTML = `
                    <strong>New Personal Best!</strong><br>
                    Time: ${formatTime(timeTaken)}<br>
                    <span style="font-size: 0.85em; color: var(--text-muted);">You matched all ${fontMatchingState.total} pairs!</span>
                `;
            } else {
                document.getElementById('fontMatchingResultIcon').textContent = '';
                document.getElementById('fontMatchingResultText').innerHTML = `
                    Time: ${formatTime(timeTaken)}<br>
                    <span style="font-size: 0.85em; color: var(--text-muted);">Best: ${formatTime(fontMatchingState.bestTime)}</span><br>
                    <span style="font-size: 0.85em; color: var(--text-muted);">You matched all ${fontMatchingState.total} pairs!</span>
                `;
            }
        }
        
        // ============== END FONT MATCHING ==============
        
        // Alphabet flashcard state
        let alphabetFlashcardState = {
            cards: [],
            currentIndex: 0,
            flipped: false,
            score: { known: 0, learning: 0 }
        };
        
        // Start alphabet flashcard mode
        // Alphabet flashcard swipe state
        let alphaTouchStartX = 0, alphaTouchStartY = 0, alphaCurrentX = 0, alphaIsSwiping = false;
        
        function startAlphabetFlashcards() {
            // Shuffle consonants
            alphabetFlashcardState.cards = shuffleArray([...thaiConsonants]);
            alphabetFlashcardState.currentIndex = 0;
            alphabetFlashcardState.flipped = false;
            alphabetFlashcardState.score = { correct: 0, incorrect: 0 };
            
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('alphabetFlashcardView').style.display = 'block';
            
            document.getElementById('alphabetFlashcardBackBtn').onclick = function() {
                document.getElementById('alphabetFlashcardView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
                updateAlphabetProgressDisplay();
            };
            
            // Setup swipe handlers
            const alphaCard = document.getElementById('alphabetCard');
            
            // Touch events for swipe
            alphaCard.addEventListener('touchstart', handleAlphaTouchStart);
            alphaCard.addEventListener('touchmove', handleAlphaTouchMove);
            alphaCard.addEventListener('touchend', handleAlphaTouchEnd);
            
            // Click to flip
            alphaCard.addEventListener('click', function() {
                if (!alphaIsSwiping) {
                    toggleAlphabetFlashcard();
                }
            });
            
            updateAlphabetFlashcard();
        }
        
        function handleAlphaTouchStart(e) {
            if (e.touches.length > 1) return;
            alphaTouchStartX = alphaCurrentX = e.touches[0].clientX;
            alphaTouchStartY = e.touches[0].clientY;
            alphaIsSwiping = false;
        }
        
        function handleAlphaTouchMove(e) {
            if (!alphaTouchStartX) return;
            alphaCurrentX = e.touches[0].clientX;
            const diffX = alphaCurrentX - alphaTouchStartX;
            const diffY = e.touches[0].clientY - alphaTouchStartY;
            
            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 10) {
                e.preventDefault();
                alphaIsSwiping = true;
                
                const card = document.getElementById('alphabetCard');
                card.classList.add('swiping');
                card.style.transform = "translateX(" + diffX + "px) rotateY(" + (alphabetFlashcardState.flipped ? 180 : 0) + "deg)";
                
                const intensity = Math.min(Math.abs(diffX) / 100, 1);
                
                const alphaSwipeRight = document.getElementById('alphaSwipeRight');
                const alphaSwipeLeft = document.getElementById('alphaSwipeLeft');
                const alphaSwipeBarRight = document.getElementById('alphaSwipeBarRight');
                const alphaSwipeBarLeft = document.getElementById('alphaSwipeBarLeft');
                
                if (diffX > 30) {
                    alphaSwipeRight.classList.add('visible');
                    alphaSwipeBarRight.classList.add('visible');
                    alphaSwipeBarRight.style.opacity = intensity;
                    alphaSwipeLeft.classList.remove('visible');
                    alphaSwipeBarLeft.classList.remove('visible');
                } else if (diffX < -30) {
                    alphaSwipeLeft.classList.add('visible');
                    alphaSwipeBarLeft.classList.add('visible');
                    alphaSwipeBarLeft.style.opacity = intensity;
                    alphaSwipeRight.classList.remove('visible');
                    alphaSwipeBarRight.classList.remove('visible');
                } else {
                    alphaSwipeLeft.classList.remove('visible');
                    alphaSwipeRight.classList.remove('visible');
                    alphaSwipeBarLeft.classList.remove('visible');
                    alphaSwipeBarRight.classList.remove('visible');
                }
            }
        }
        
        function handleAlphaTouchEnd() {
            if (!alphaTouchStartX) return;
            const diffX = alphaCurrentX - alphaTouchStartX;
            
            const alphaSwipeRight = document.getElementById('alphaSwipeRight');
            const alphaSwipeLeft = document.getElementById('alphaSwipeLeft');
            const alphaSwipeBarRight = document.getElementById('alphaSwipeBarRight');
            const alphaSwipeBarLeft = document.getElementById('alphaSwipeBarLeft');
            const card = document.getElementById('alphabetCard');
            
            alphaSwipeLeft.classList.remove('visible');
            alphaSwipeRight.classList.remove('visible');
            alphaSwipeBarLeft.classList.remove('visible');
            alphaSwipeBarRight.classList.remove('visible');
            alphaSwipeBarLeft.style.opacity = '';
            alphaSwipeBarRight.style.opacity = '';
            card.classList.remove('swiping');
            
            // Clear inline transform style
            card.style.transform = '';
            
            if (Math.abs(diffX) > 100) {
                // Unflip card before moving to next
                if (alphabetFlashcardState.flipped) {
                    card.style.transition = 'none';
                    card.classList.remove('flipped');
                    alphabetFlashcardState.flipped = false;
                    card.offsetHeight; // Force reflow
                    card.style.transition = '';
                }
                diffX > 0 ? alphabetFlashcardAnswer(true) : alphabetFlashcardAnswer(false);
            }
            
            alphaTouchStartX = alphaCurrentX = 0;
            setTimeout(() => { alphaIsSwiping = false; }, 100);
        }
        
        // Update the flashcard display
        function updateAlphabetFlashcard() {
            const cardData = alphabetFlashcardState.cards[alphabetFlashcardState.currentIndex];
            alphabetFlashcardState.flipped = false;
            
            const card = document.getElementById('alphabetCard');
            card.classList.remove('flipped');
            card.style.transform = '';
            
            document.getElementById('alphabetCardLetter').textContent = cardData.letter;
            document.getElementById('alphabetCardLetterBack').textContent = cardData.letter;
            document.getElementById('alphabetCardRoman').textContent = cardData.name;
            document.getElementById('alphabetCardClass').textContent = cardData.class.charAt(0).toUpperCase() + cardData.class.slice(1) + ' Class';
            document.getElementById('alphabetCardClass').className = 'alphabet-card-class ' + cardData.class;
            document.getElementById('alphabetCardExample').textContent = cardData.example;
            
            document.getElementById('alphabetFlashcardCounter').textContent = 
                `${alphabetFlashcardState.currentIndex + 1} / ${alphabetFlashcardState.cards.length}`;
            document.getElementById('alphabetFlashcardScore').textContent = 
                `${alphabetFlashcardState.score.correct} correct`;
            document.getElementById('alphaCorrectScore').textContent = alphabetFlashcardState.score.correct;
            document.getElementById('alphaIncorrectScore').textContent = alphabetFlashcardState.score.incorrect;
        }
        
        // Toggle flashcard flip
        function toggleAlphabetFlashcard() {
            alphabetFlashcardState.flipped = !alphabetFlashcardState.flipped;
            const card = document.getElementById('alphabetCard');
            card.classList.toggle('flipped', alphabetFlashcardState.flipped);
        }
        
        // Handle flashcard answer
        function alphabetFlashcardAnswer(correct) {
            const cardData = alphabetFlashcardState.cards[alphabetFlashcardState.currentIndex];
            
            // Award XP for reviewing a flashcard
            awardXP(XP_REWARDS.alphabetFlashcardReview);
            
            if (correct) {
                alphabetFlashcardState.score.correct++;
                playCorrectSound();
                updateAlphabetProgress(cardData.letter, true);
            } else {
                alphabetFlashcardState.score.incorrect++;
                playIncorrectSound();
                updateAlphabetProgress(cardData.letter, false);
            }
            
            // Move to next card
            if (alphabetFlashcardState.currentIndex < alphabetFlashcardState.cards.length - 1) {
                alphabetFlashcardState.currentIndex++;
                updateAlphabetFlashcard();
            } else {
                // Finished all cards
                showAlphabetFlashcardComplete();
            }
        }
        
        // Speak current alphabet flashcard
        function speakCurrentAlphabetCard() {
            if (alphabetFlashcardState.cards && alphabetFlashcardState.cards[alphabetFlashcardState.currentIndex]) {
                const card = alphabetFlashcardState.cards[alphabetFlashcardState.currentIndex];
                speakThai(card.letter);
            }
        }
        
        // Speak current sorting card
        function speakCurrentSortingCard() {
            if (classSortingState.currentConsonant) {
                speakThai(classSortingState.currentConsonant.letter);
            }
        }
        
        // Speak current quiz consonant
        function speakCurrentQuizConsonant() {
            if (alphabetState.currentConsonant) {
                speakThai(alphabetState.currentConsonant.letter);
            }
        }
        
        // Speak a specific consonant letter
        function speakConsonant(letter) {
            speakThai(letter);
        }
        
        // Navigate flashcards
        function prevAlphabetFlashcard() {
            if (alphabetFlashcardState.currentIndex > 0) {
                alphabetFlashcardState.currentIndex--;
                updateAlphabetFlashcard();
            }
        }
        
        function nextAlphabetFlashcard() {
            if (alphabetFlashcardState.currentIndex < alphabetFlashcardState.cards.length - 1) {
                alphabetFlashcardState.currentIndex++;
                updateAlphabetFlashcard();
            }
        }
        
        // Show completion screen
        function showAlphabetFlashcardComplete() {
            const container = document.querySelector('.alphabet-flashcard-wrapper');
            const total = alphabetFlashcardState.cards.length;
            const correct = alphabetFlashcardState.score.correct;
            const percent = Math.round((correct / total) * 100);
            
            container.innerHTML = `
                <div style="text-align: center; padding: 40px 20px;">
                    <div style="font-size: 3em; margin-bottom: 16px;"></div>
                    <h3 style="color: var(--text-primary); margin-bottom: 8px;">Session Complete!</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">
                        You got <strong>${correct}</strong> of <strong>${total}</strong> correct (${percent}%)
                    </p>
                    <button class="btn-action" onclick="startAlphabetFlashcards()" style="margin-right: 8px;"> Practice Again</button>
                    <button class="btn-action" onclick="document.getElementById('alphabetFlashcardBackBtn').click();"> Back to Menu</button>
                </div>
            `;
        }
        
        // ============== CLASS SORTING GAME ==============
        
        let classSortingState = {
            remaining: [],
            currentConsonant: null,
            bins: { low: [], mid: [], high: [] },
            isAnimating: false
        };
        
        function startClassSorting() {
            // Initialize with all consonants shuffled
            classSortingState.remaining = shuffleArray([...thaiConsonants]);
            classSortingState.bins = { low: [], mid: [], high: [] };
            classSortingState.isAnimating = false;
            
            document.getElementById('alphabetModes').style.display = 'none';
            document.getElementById('alphabetProgressOverview').style.display = 'none';
            document.getElementById('classSortingView').style.display = 'flex';
            
            document.getElementById('classSortingBackBtn').onclick = function() {
                document.getElementById('classSortingView').style.display = 'none';
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
                updateAlphabetProgressDisplay();
            };
            
            updateClassBinDisplays();
            showNextSortingCard();
        }
        
        function showNextSortingCard() {
            if (classSortingState.remaining.length === 0) {
                showSortingComplete();
                return;
            }
            
            classSortingState.currentConsonant = classSortingState.remaining[0];
            const card = document.getElementById('sortingCard');
            
            // Reset card state
            card.classList.remove('correct-animation', 'wrong-animation');
            card.style.transform = '';
            card.style.opacity = '';
            
            document.getElementById('sortingCardLetter').textContent = classSortingState.currentConsonant.letter;
            document.getElementById('sortingCardRoman').textContent = classSortingState.currentConsonant.name;
            document.getElementById('classSortingRemaining').textContent = `${classSortingState.remaining.length} left`;
        }
        
        function sortToClass(selectedClass) {
            if (classSortingState.isAnimating || !classSortingState.currentConsonant) return;
            
            const correct = classSortingState.currentConsonant;
            const isCorrect = selectedClass === correct.class;
            const card = document.getElementById('sortingCard');
            const bin = document.querySelector(`.class-bin.${selectedClass}`);
            
            classSortingState.isAnimating = true;
            
            if (isCorrect) {
                // Correct! Add to bin
                playCorrectSound();
                updateAlphabetProgress(correct.letter, true);
                awardXP(XP_REWARDS.classSortingCorrect);
                
                // Animate card shrinking
                card.classList.add('correct-animation');
                bin.classList.add('pulse-correct');
                
                // Add to bin and remove from remaining
                classSortingState.bins[selectedClass].push(correct);
                classSortingState.remaining.shift();
                
                setTimeout(() => {
                    bin.classList.remove('pulse-correct');
                    updateClassBinDisplays();
                    classSortingState.isAnimating = false;
                    showNextSortingCard();
                }, 300);
                
            } else {
                // Wrong! Shuffle back
                playIncorrectSound();
                updateAlphabetProgress(correct.letter, false);
                
                // Shake animation
                card.classList.add('wrong-animation');
                bin.classList.add('pulse-incorrect');
                
                // Move to random position in remaining pile
                classSortingState.remaining.shift();
                const insertPos = Math.floor(Math.random() * (classSortingState.remaining.length - 1)) + 1;
                classSortingState.remaining.splice(Math.min(insertPos, classSortingState.remaining.length), 0, correct);
                
                setTimeout(() => {
                    card.classList.remove('wrong-animation');
                    bin.classList.remove('pulse-incorrect');
                    classSortingState.isAnimating = false;
                    showNextSortingCard();
                }, 500);
            }
        }
        
        function updateClassBinDisplays() {
            ['low', 'mid', 'high'].forEach(cls => {
                const letters = classSortingState.bins[cls];
                document.getElementById(`${cls}BinCount`).textContent = letters.length;
                document.getElementById(`${cls}BinLetters`).textContent = letters.map(c => c.letter).join(' ');
            });
        }
        
        function expandBin(cls) {
            const bin = classSortingState.bins[cls];
            if (bin.length === 0) return;
            
            const titles = { low: 'Low Class', mid: 'Mid Class', high: 'High Class' };
            const colors = { low: '#16a34a', mid: '#2563eb', high: '#ea580c' };
            
            document.getElementById('expandedBinTitle').textContent = titles[cls];
            document.getElementById('expandedBinTitle').style.color = colors[cls];
            
            document.getElementById('expandedBinContent').innerHTML = bin.map(c => `
                <div class="expanded-letter-item">
                    <button class="expanded-letter-audio" onclick="speakConsonant('${c.letter}')">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                        </svg>
                    </button>
                    <div class="expanded-letter-thai">${c.letter}</div>
                    <div class="expanded-letter-roman">${c.roman}</div>
                </div>
            `).join('');
            
            document.getElementById('classBinExpanded').style.display = 'block';
        }
        
        function closeExpandedBin() {
            document.getElementById('classBinExpanded').style.display = 'none';
        }
        
        function showSortingComplete() {
            const cardArea = document.querySelector('.sorting-card-area');
            const total = thaiConsonants.length;
            const lowCount = classSortingState.bins.low.length;
            const midCount = classSortingState.bins.mid.length;
            const highCount = classSortingState.bins.high.length;
            
            cardArea.innerHTML = `
                <div class="sorting-complete">
                    <div style="font-size: 3em; margin-bottom: 16px;"></div>
                    <h3>All Sorted!</h3>
                    <p>You sorted all ${total} consonants into their correct classes.</p>
                    <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 24px;">
                        <div><span style="color: #16a34a; font-weight: 700;">${lowCount}</span> Low</div>
                        <div><span style="color: #2563eb; font-weight: 700;">${midCount}</span> Mid</div>
                        <div><span style="color: #ea580c; font-weight: 700;">${highCount}</span> High</div>
                    </div>
                    <button class="btn-action" onclick="startClassSorting()"> Sort Again</button>
                </div>
            `;
            document.getElementById('classSortingRemaining').textContent = 'Done!';
        }
        
        // Render the alphabet chart
        function renderAlphabetChart() {
            const container = document.getElementById('alphabetChartContent');
            
            const midClass = thaiConsonants.filter(c => c.class === 'mid');
            const highClass = thaiConsonants.filter(c => c.class === 'high');
            const lowClass = thaiConsonants.filter(c => c.class === 'low');
            
            container.innerHTML = `
                <!-- Class System Explainer -->
                <div class="chart-explainer">
                    <h3>Why Classes Matter</h3>
                    <p>Every Thai consonant belongs to one of three classes: <strong style="color: #3b82f6;">Mid</strong>, <strong style="color: #f97316;">High</strong>, or <strong style="color: #22c55e;">Low</strong>. The class determines the tone of a syllable when combined with vowels and tone marks.</p>
                </div>
                
                <div class="chart-legend">
                    <div class="chart-legend-item"><span class="chart-legend-color mid"></span> Mid class (9)</div>
                    <div class="chart-legend-item"><span class="chart-legend-color high"></span> High class (11)</div>
                    <div class="chart-legend-item"><span class="chart-legend-color low"></span> Low class (24)</div>
                </div>
                <p style="text-align: center; color: var(--text-muted); font-size: 0.85em; margin-bottom: 16px;">Tap any letter to hear its sound, then its name (e.g. "g gi")</p>
                
                <div class="alphabet-chart-section">
                    <h3><span class="chart-legend-color mid" style="display: inline-block;"></span> Mid Class</h3>
                    <div class="alphabet-chart-grid">
                        ${midClass.map(c => `
                            <div class="alphabet-chart-item mid tappable" onclick="speakThai('${c.thaiName}')">
                                <div class="chart-item-thai">${c.letter}</div>
                                <div class="chart-item-roman">${c.roman}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="alphabet-chart-section">
                    <h3><span class="chart-legend-color high" style="display: inline-block;"></span> High Class</h3>
                    <div class="alphabet-chart-grid">
                        ${highClass.map(c => `
                            <div class="alphabet-chart-item high tappable" onclick="speakThai('${c.thaiName}')">
                                <div class="chart-item-thai">${c.letter}</div>
                                <div class="chart-item-roman">${c.roman}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="alphabet-chart-section">
                    <h3><span class="chart-legend-color low" style="display: inline-block;"></span> Low Class</h3>
                    <div class="alphabet-chart-grid">
                        ${lowClass.map(c => `
                            <div class="alphabet-chart-item low tappable" onclick="speakThai('${c.thaiName}')">
                                <div class="chart-item-thai">${c.letter}</div>
                                <div class="chart-item-roman">${c.roman}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Vowels Section -->
                <div class="alphabet-chart-section">
                    <h3> Common Vowels</h3>
                    <p style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 12px;">
                        Vowels can appear before, after, above, below, or around consonants. Tap to hear the vowel sound.
                    </p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px; text-align: center; font-size: 0.85em; color: var(--text-muted); margin-bottom: 8px;">
                        <div>Short</div>
                        <div>Long</div>
                    </div>
                    <div class="vowel-grid">
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">a</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">aa</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">i</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ii</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">u</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">uu</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">e</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ee</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ae</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ae</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">o</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">oo</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound"></span></div>
                        
                        <div class="vowel-pair-label">Diphthongs</div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ai</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ai</span></div>
                        
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">ao</span></div>
                        <div class="vowel-item tappable" onclick="speakThai('')"><span class="vowel-thai">_</span><span class="vowel-sound">am</span></div>
                    </div>
                </div>
                
                <!-- Tone Marks Section -->
                <div class="alphabet-chart-section">
                    <h3> Tone Marks</h3>
                    <div class="tone-marks-grid">
                        <div class="tone-mark-item">
                            <span class="tone-mark-thai"></span>
                            <span class="tone-mark-name"> (mai ek)</span>
                            <span class="tone-mark-effect">Lowers tone</span>
                        </div>
                        <div class="tone-mark-item">
                            <span class="tone-mark-thai"></span>
                            <span class="tone-mark-name"> (mai too)</span>
                            <span class="tone-mark-effect">Changes tone (varies by class)</span>
                        </div>
                        <div class="tone-mark-item">
                            <span class="tone-mark-thai"></span>
                            <span class="tone-mark-name"> (mai dtrii)</span>
                            <span class="tone-mark-effect">High tone (mid class only)</span>
                        </div>
                        <div class="tone-mark-item">
                            <span class="tone-mark-thai"></span>
                            <span class="tone-mark-name"> (mai jt-dt-waa)</span>
                            <span class="tone-mark-effect">Rising tone (mid class only)</span>
                        </div>
                    </div>
                </div>
                
                <!-- Tone Rules Chart -->
                <div class="alphabet-chart-section">
                    <h3> Tone Rules (Live Syllables)</h3>
                    <p style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 12px;">
                        Live syllables end in a long vowel or sonorant (    ). Dead syllables follow different rules.
                    </p>
                    <div class="tone-rules-table">
                        <div class="tone-rules-header">
                            <div>Class</div>
                            <div>No mark</div>
                            <div></div>
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="tone-rules-row mid">
                            <div><strong>Mid</strong></div>
                            <div>Mid</div>
                            <div>Low</div>
                            <div>Falling</div>
                            <div>High</div>
                            <div>Rising</div>
                        </div>
                        <div class="tone-rules-row high">
                            <div><strong>High</strong></div>
                            <div>Rising</div>
                            <div>Low</div>
                            <div>Falling</div>
                            <div></div>
                            <div></div>
                        </div>
                        <div class="tone-rules-row low">
                            <div><strong>Low</strong></div>
                            <div>Mid</div>
                            <div>Falling</div>
                            <div>High</div>
                            <div></div>
                            <div></div>
                        </div>
                    </div>
                    <p style="color: var(--text-muted); font-size: 0.85em; margin-top: 12px;">
                         <strong>Tip:</strong> Mid class consonants can produce all 5 tones. High and Low class consonants cannot use  or .
                    </p>
                </div>
            `;
        }
        
        // ============== CLOCK PRACTICE FOR TELLING TIME ==============
        
        // Thai time data - all possible times with their Thai expressions
        const thaiTimeData = [
            // 1-5 AM:  + number
            { hour: 1, minute: 0, period: 'late-night', thai: '', roman: 'dtii neng', hint: '1AM =  + 1' },
            { hour: 2, minute: 0, period: 'late-night', thai: '', roman: 'dtii sng', hint: '2AM =  + 2' },
            { hour: 3, minute: 0, period: 'late-night', thai: '', roman: 'dtii sam', hint: '3AM =  + 3' },
            { hour: 4, minute: 0, period: 'late-night', thai: '', roman: 'dtii si', hint: '4AM =  + 4' },
            { hour: 5, minute: 0, period: 'late-night', thai: '', roman: 'dtii ha', hint: '5AM =  + 5' },
            // 6-11 AM: number + 
            { hour: 6, minute: 0, period: 'morning', thai: '', roman: 'hk moong chao', hint: '6AM = 6 + ' },
            { hour: 7, minute: 0, period: 'morning', thai: '', roman: 'jt moong chao', hint: '7AM = 7 + ' },
            { hour: 8, minute: 0, period: 'morning', thai: '', roman: 'bpet moong chao', hint: '8AM = 8 + ' },
            { hour: 9, minute: 0, period: 'morning', thai: '', roman: 'gao moong chao', hint: '9AM = 9 + ' },
            { hour: 10, minute: 0, period: 'morning', thai: '', roman: 'sp moong chao', hint: '10AM = 10 + ' },
            { hour: 11, minute: 0, period: 'morning', thai: '', roman: 'sp-t moong chao', hint: '11AM = 11 + ' },
            // 12 PM: 
            { hour: 12, minute: 0, period: 'noon', thai: '', roman: 'tang', hint: 'Noon = ' },
            // 1-3 PM:  + number + 
            { hour: 13, minute: 0, period: 'afternoon', thai: '', roman: 'bai moong', hint: '1PM =  + ' },
            { hour: 14, minute: 0, period: 'afternoon', thai: '', roman: 'bai sng moong', hint: '2PM =  + 2 + ' },
            { hour: 15, minute: 0, period: 'afternoon', thai: '', roman: 'bai sam moong', hint: '3PM =  + 3 + ' },
            // 4-6 PM: number + 
            { hour: 16, minute: 0, period: 'evening', thai: '', roman: 'si moong yen', hint: '4PM = 4 + ' },
            { hour: 17, minute: 0, period: 'evening', thai: '', roman: 'ha moong yen', hint: '5PM = 5 + ' },
            { hour: 18, minute: 0, period: 'evening', thai: '', roman: 'hk moong yen', hint: '6PM = 6 + ' },
            // 7-11 PM: (number-6) + 
            { hour: 19, minute: 0, period: 'night', thai: '', roman: 'neng tm', hint: '7PM = 1 (7-6=1)' },
            { hour: 20, minute: 0, period: 'night', thai: '', roman: 'sng tm', hint: '8PM = 2 (8-6=2)' },
            { hour: 21, minute: 0, period: 'night', thai: '', roman: 'sam tm', hint: '9PM = 3 (9-6=3)' },
            { hour: 22, minute: 0, period: 'night', thai: '', roman: 'si tm', hint: '10PM = 4 (10-6=4)' },
            { hour: 23, minute: 0, period: 'night', thai: '', roman: 'ha tm', hint: '11PM = 5 (11-6=5)' },
            // 12 AM: 
            { hour: 0, minute: 0, period: 'midnight', thai: '', roman: 'tang kn', hint: 'Midnight = ' }
        ];
        
        // Period display names and colors
        const periodInfo = {
            'late-night': { name: ' 1-5 AM', color: '#4f46e5' },
            'morning': { name: ' 6-11 AM', color: '#f59e0b' },
            'noon': { name: ' Noon', color: '#eab308' },
            'afternoon': { name: ' 1-3 PM', color: '#f97316' },
            'evening': { name: ' 4-6 PM', color: '#ea580c' },
            'night': { name: ' 7-11 PM', color: '#7c3aed' },
            'midnight': { name: ' Midnight', color: '#1e1b4b' }
        };
        
        // Interactive time period data for learning
        const timePeriodData = [
            {
                id: 'late-night',
                hours: '1-5 AM',
                emoji: '',
                color: '#4f46e5',
                startHour: 1,
                endHour: 5,
                thai: '',
                roman: 'dtii',
                pattern: ' + number',
                patternRoman: 'dtii + number',
                examples: ' (1AM),  (2AM),  (3AM),  (4AM),  (5AM)',
                memory: '"D" for Dark  it\'s the darkest part of night.  means "strike" (like striking a drum).',
                note: ' comes BEFORE the number'
            },
            {
                id: 'morning',
                hours: '6-11 AM',
                emoji: '',
                color: '#f59e0b',
                startHour: 6,
                endHour: 11,
                thai: '',
                roman: 'moong chao',
                pattern: 'number + ',
                patternRoman: 'number + moong chao',
                examples: ' (6AM),  (7AM),  (8AM)...',
                memory: ' sounds like "gong"  the morning gong wakes you up!  means "morning".',
                note: ' is often dropped in casual speech'
            },
            {
                id: 'noon',
                hours: '12 PM',
                emoji: '',
                color: '#eab308',
                startHour: 12,
                endHour: 12,
                thai: '',
                roman: 'tang',
                pattern: '',
                patternRoman: 'tang',
                examples: ' or  (tang wan)',
                memory: ' means "middle/midpoint"  the middle of the day!',
                note: 'Just one word, no number needed'
            },
            {
                id: 'afternoon',
                hours: '1-3 PM',
                emoji: '',
                color: '#f97316',
                startHour: 13,
                endHour: 15,
                thai: '...',
                roman: 'bai...moong',
                pattern: ' + number + ',
                patternRoman: 'bai + number + moong',
                examples: ' (1PM),  (2PM),  (3PM)',
                memory: '"Bai bai" to the morning!  comes FIRST, then the number.',
                note: '1PM is just  (no )'
            },
            {
                id: 'evening',
                hours: '4-6 PM',
                emoji: '',
                color: '#ea580c',
                startHour: 16,
                endHour: 18,
                thai: '',
                roman: 'moong yen',
                pattern: 'number + ',
                patternRoman: 'number + moong yen',
                examples: ' (4PM),  (5PM),  (6PM)',
                memory: ' means "cool/evening"  when it starts cooling down.',
                note: ' often dropped when context is clear'
            },
            {
                id: 'night',
                hours: '7-11 PM',
                emoji: '',
                color: '#7c3aed',
                startHour: 19,
                endHour: 23,
                thai: '',
                roman: 'tm',
                pattern: '(hour - 6) + ',
                patternRoman: '(hour - 6) + tm',
                examples: ' (7PM),  (8PM),  (9PM),  (10PM),  (11PM)',
                memory: '7-Eleven  1-5!  sounds like a drum beat  the night watchman\'s drum.',
                note: ' Counting RESTARTS at 1 for 7PM!'
            },
            {
                id: 'midnight',
                hours: '12 AM',
                emoji: '',
                color: '#1e1b4b',
                startHour: 0,
                endHour: 0,
                thai: '',
                roman: 'tang kn',
                pattern: '',
                patternRoman: 'tang kn',
                examples: ' (midnight)',
                memory: ' (middle) +  (night) = middle of the night!',
                note: 'Just one word, like noon'
            }
        ];
        
        // Render interactive time period clock
        function renderInteractiveTimeClock() {
            const container = document.getElementById('interactiveTimeClockContainer');
            if (!container) return;
            
            let periodsHtml = '';
            timePeriodData.forEach(period => {
                periodsHtml += `
                    <div class="time-period-item" data-period="${period.id}">
                        <div class="time-period-row" onclick="toggleTimePeriodInfo('${period.id}')" style="border-left: 4px solid ${period.color};">
                            <div class="time-period-row-left">
                                <span class="time-period-row-emoji">${period.emoji}</span>
                                <span class="time-period-row-hours">${period.hours}</span>
                            </div>
                            <div class="time-period-row-thai">${period.thai}</div>
                        </div>
                        <div class="time-period-detail" id="detail-${period.id}" style="border-color: ${period.color}; display: none;">
                            <div class="time-period-pattern">
                                <strong>Pattern:</strong> ${period.pattern}
                            </div>
                            <div class="time-period-examples">
                                ${period.examples}
                            </div>
                            <div class="time-period-memory">
                                 ${period.memory}
                            </div>
                            ${period.note ? `<div class="time-period-note"> ${period.note}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = `<div class="time-periods-list">${periodsHtml}</div>`;
        }
        
        // Toggle time period info - only one open at a time
        function toggleTimePeriodInfo(periodId) {
            const allItems = document.querySelectorAll('.time-period-item');
            const clickedDetail = document.getElementById('detail-' + periodId);
            const isCurrentlyOpen = clickedDetail.style.display === 'block';
            
            // Close all
            allItems.forEach(item => {
                item.querySelector('.time-period-row').classList.remove('selected');
                item.querySelector('.time-period-detail').style.display = 'none';
            });
            
            // If it wasn't open, open it
            if (!isCurrentlyOpen) {
                const clickedItem = document.querySelector(`.time-period-item[data-period="${periodId}"]`);
                clickedItem.querySelector('.time-period-row').classList.add('selected');
                clickedDetail.style.display = 'block';
            }
        }
        
        // Clock practice state
        let clockPracticeState = {
            currentTime: null,
            options: [],
            answered: false,
            score: { correct: 0, total: 0 },
            questionNumber: 0
        };
        
        // Generate confusing options (times that use similar numbers)
        function generateClockOptions(correctTime) {
            let options = [correctTime];
            
            // Strategy: find times with same number but different period
            // e.g., if answer is 3AM (), offer 9PM (), 3PM ()
            const correctHour12 = correctTime.hour % 12 || 12;
            
            // Find confusing alternatives with same number display
            const confusingTimes = thaiTimeData.filter(t => {
                if (t.thai === correctTime.thai) return false;
                const hour12 = t.hour % 12 || 12;
                // Same number on clock face (e.g., 3 and 3)
                if (hour12 === correctHour12) return true;
                // Night times () - find matching  numbers
                if (correctTime.period === 'night' && t.period === 'late-night') {
                    // e.g., 9PM (3) vs 3AM (3)
                    return (correctTime.hour - 6) === t.hour;
                }
                if (correctTime.period === 'late-night' && t.period === 'night') {
                    return correctTime.hour === (t.hour - 6);
                }
                return false;
            });
            
            // Add confusing times first
            shuffleArray(confusingTimes).slice(0, 2).forEach(t => {
                if (options.length < 4 && !options.includes(t)) options.push(t);
            });
            
            // Fill remaining with random times from different periods
            const otherTimes = thaiTimeData.filter(t => 
                !options.some(o => o.thai === t.thai) && t.period !== correctTime.period
            );
            shuffleArray(otherTimes).slice(0, 4 - options.length).forEach(t => {
                if (options.length < 4) options.push(t);
            });
            
            return shuffleArray(options);
        }
        
        // Render the analog clock
        function renderAnalogClock(hour, minute) {
            const hour12 = hour % 12;
            const hourAngle = (hour12 * 30) + (minute * 0.5); // 30 degrees per hour + minute offset
            const minuteAngle = minute * 6; // 6 degrees per minute
            
            let ticksHtml = '';
            // Add hour ticks
            for (let i = 0; i < 12; i++) {
                const isMajor = i % 3 === 0;
                ticksHtml += `<div class="clock-tick ${isMajor ? 'major' : ''}" style="transform: translateX(-50%) rotate(${i * 30}deg);"></div>`;
            }
            
            // Add hour numbers
            const numbers = [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
            const radius = 60; // Distance from center
            numbers.forEach((num, i) => {
                const angle = (i * 30 - 90) * Math.PI / 180; // Start from 12 o'clock
                const x = 90 + radius * Math.cos(angle) - 12; // Center at 90px, offset by half width
                const y = 90 + radius * Math.sin(angle) - 12;
                ticksHtml += `<div class="clock-number" style="left: ${x}px; top: ${y}px;">${num}</div>`;
            });
            
            return `
                <div class="analog-clock">
                    <div class="clock-face">
                        ${ticksHtml}
                        <div class="clock-hand minute-hand" style="transform: rotate(${minuteAngle}deg);"></div>
                        <div class="clock-hand hour-hand" style="transform: rotate(${hourAngle}deg);"></div>
                        <div class="clock-center"></div>
                    </div>
                </div>
            `;
        }
        
        // Format time for display (12-hour format)
        function formatTimeDisplay(hour, minute) {
            const hour12 = hour % 12 || 12;
            const ampm = hour < 12 ? 'AM' : 'PM';
            if (hour === 0) return '12:00 AM';
            if (hour === 12) return '12:00 PM';
            return `${hour12}:${minute.toString().padStart(2, '0')} ${ampm}`;
        }
        
        // Start clock practice
        function startClockPractice() {
            clockPracticeState = {
                currentTime: null,
                options: [],
                answered: false,
                score: { correct: 0, total: 0 },
                questionNumber: 0
            };
            nextClockQuestion();
        }
        
        // Generate next clock question
        function nextClockQuestion() {
            clockPracticeState.questionNumber++;
            clockPracticeState.answered = false;
            
            // Pick a random time
            const timeIndex = Math.floor(Math.random() * thaiTimeData.length);
            clockPracticeState.currentTime = thaiTimeData[timeIndex];
            clockPracticeState.options = generateClockOptions(clockPracticeState.currentTime);
            
            renderClockPractice();
        }
        
        // Render clock practice UI
        function renderClockPractice() {
            const container = document.getElementById('clockPracticeContainer');
            if (!container) return;
            
            const time = clockPracticeState.currentTime;
            const period = periodInfo[time.period];
            
            let optionsHtml = '';
            clockPracticeState.options.forEach((opt, idx) => {
                optionsHtml += `
                    <div class="clock-option" data-index="${idx}" onclick="selectClockOption(${idx}, event)">
                        <div class="clock-option-thai">${opt.thai}</div>
                        ${showRomanization ? `<div class="clock-option-roman">${opt.roman}</div>` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = `
                <div class="clock-practice-container" onclick="handleClockContainerTap(event)">
                    <div class="clock-score">Question ${clockPracticeState.questionNumber}  Score: ${clockPracticeState.score.correct}/${clockPracticeState.score.total}</div>
                    ${renderAnalogClock(time.hour, time.minute)}
                    <div class="clock-period-indicator" style="background: ${period.color};">${period.name}</div>
                    <div class="clock-time-display">${formatTimeDisplay(time.hour, time.minute)}</div>
                    <div class="clock-hint">How do you say this time in Thai?</div>
                    <div class="clock-options" id="clockOptions">
                        ${optionsHtml}
                    </div>
                    <div id="clockFeedback"></div>
                </div>
            `;
        }
        
        // Handle option selection
        function selectClockOption(index, event) {
            // Stop event from bubbling to container
            if (event) {
                event.stopPropagation();
            }
            
            // If already answered, tap goes to next question
            if (clockPracticeState.answered) {
                nextClockQuestion();
                return;
            }
            
            // Guard against invalid index
            if (!clockPracticeState.options || index >= clockPracticeState.options.length) {
                console.error('Invalid clock option index:', index);
                return;
            }
            
            clockPracticeState.answered = true;
            clockPracticeState.score.total++;
            
            const selected = clockPracticeState.options[index];
            const correct = clockPracticeState.currentTime;
            const isCorrect = selected.thai === correct.thai;
            
            if (isCorrect) {
                clockPracticeState.score.correct++;
                playCorrectSound();
            } else {
                playIncorrectSound();
            }
            
            // Add glow effect to the clock
            const clockEl = document.querySelector('.analog-clock');
            if (clockEl) {
                clockEl.classList.add(isCorrect ? 'clock-correct-glow' : 'clock-incorrect-glow');
            }
            
            // Update option styles
            document.querySelectorAll('.clock-option').forEach((opt, idx) => {
                const optData = clockPracticeState.options[idx];
                if (optData && optData.thai === correct.thai) {
                    opt.classList.add('correct-answer');
                    if (isCorrect) opt.classList.add('correct');
                } else if (idx === index) {
                    opt.classList.add('incorrect');
                }
            });
            
            // Show feedback (no button, tap to continue)
            const feedbackEl = document.getElementById('clockFeedback');
            if (isCorrect) {
                feedbackEl.innerHTML = `
                    <div class="clock-feedback correct">
                         Correct! ${correct.hint}
                    </div>
                    <div class="tap-to-continue">Tap anywhere to continue</div>
                `;
            } else {
                feedbackEl.innerHTML = `
                    <div class="clock-feedback incorrect">
                         The answer is <strong>${correct.thai}</strong><br>
                        <span style="font-size: 0.9em;">${correct.hint}</span>
                    </div>
                    <div class="tap-to-continue">Tap anywhere to continue</div>
                `;
            }
            
            // Add tap-to-advance class for styling
            const practiceContainer = document.querySelector('.clock-practice-container');
            if (practiceContainer) {
                practiceContainer.classList.add('tap-to-advance');
            }
        }
        
        // Handle tap on clock practice container (for advancing after answer)
        function handleClockContainerTap(event) {
            // Only advance if already answered
            if (clockPracticeState.answered) {
                nextClockQuestion();
            }
        }
        
        // Show clock practice in a fullscreen modal mode
        function showClockPracticeModal() {
            // Hide lesson view, show practice view with clock
            document.getElementById('grammarLessonsList').style.display = 'none';
            document.getElementById('grammarLessonView').style.display = 'none';
            document.getElementById('grammarPracticeView').style.display = 'block';
            
            // Reset clock practice state
            clockPracticeState = {
                currentTime: null,
                options: [],
                answered: false,
                score: { correct: 0, total: 0 },
                questionNumber: 0
            };
            
            // Render clock practice in practice content area
            var container = document.getElementById('practiceContent');
            container.innerHTML = '<div id="clockPracticeContainer"></div>';
            document.getElementById('practiceScore').textContent = '0 / 0';
            
            nextClockQuestion();
            
            // Update back button to return to lesson
            document.getElementById('practiceBackBtn').onclick = function() {
                document.getElementById('grammarPracticeView').style.display = 'none';
                document.getElementById('grammarLessonView').style.display = 'block';
            };
        }
        
        // ============== END CLOCK PRACTICE ==============
        
        // Guided Fill-in-Blank (single question within lesson flow)
        function startGuidedFillBlank(lessonId) {
            var templates = grammarPracticeTemplates[lessonId];
            if (!templates || !templates.fillBlanks.length) return;
            
            // Pick a random fill-blank item
            var item = templates.fillBlanks[Math.floor(Math.random() * templates.fillBlanks.length)];
            var container = document.getElementById('guidedFillBlankContainer');
            
            window.guidedFillItem = item;
            window.guidedFillChecked = false;
            
            // Create sentence with blanks
            var sentenceHtml = item.sentence;
            var blankIndex = 0;
            while (sentenceHtml.indexOf('___') !== -1) {
                sentenceHtml = sentenceHtml.replace('___', '<span class="blank guided-blank" data-index="' + blankIndex + '" data-answer="' + item.blanks[blankIndex] + '"></span>');
                blankIndex++;
            }
            
            // Create word options (correct answers + distractors, shuffled)
            var options = [...item.blanks];
            var distractors = shuffleArray([...templates.distractors]).slice(0, Math.max(3, 6 - item.blanks.length));
            options = shuffleArray([...options, ...distractors]);
            
            var optionsHtml = '';
            options.forEach(function(word) {
                optionsHtml += '<div class="practice-word-option guided-option" data-word="' + word + '">' + word + '</div>';
            });
            
            container.innerHTML = 
                '<div class="practice-question">' +
                    '<div class="practice-english">' + item.english + '</div>' +
                    '<div class="practice-sentence" id="guidedSentence">' + sentenceHtml + '</div>' +
                '</div>' +
                '<div class="practice-word-options" id="guidedOptions">' + optionsHtml + '</div>' +
                '<div class="practice-buttons" id="guidedButtons">' +
                    '<button class="practice-check-btn" id="guidedSubmitBtn" disabled>Check Answer</button>' +
                '</div>' +
                '<div class="practice-result" id="guidedResult" style="display:none;"></div>';
            
            // Add click listeners to word options
            document.querySelectorAll('.guided-option').forEach(function(opt) {
                opt.addEventListener('click', function() {
                    if (!window.guidedFillChecked) {
                        handleGuidedFillSelect(this.getAttribute('data-word'), this);
                    }
                });
            });
            
            // Add click listeners to blanks (to remove filled words)
            document.querySelectorAll('.guided-blank').forEach(function(blank) {
                blank.addEventListener('click', function() {
                    if (!window.guidedFillChecked) {
                        handleGuidedBlankClick(this);
                    }
                });
            });
            
            // Submit button listener
            document.getElementById('guidedSubmitBtn').addEventListener('click', checkGuidedFillAnswer);
        }
        
        function handleGuidedFillSelect(word, optionEl) {
            var blanks = document.querySelectorAll('.guided-blank');
            
            // Find first empty blank
            var targetBlank = null;
            for (var i = 0; i < blanks.length; i++) {
                if (!blanks[i].hasAttribute('data-filled')) {
                    targetBlank = blanks[i];
                    break;
                }
            }
            
            if (!targetBlank) return;
            
            targetBlank.innerHTML = '<span class="filled-word">' + word + '</span>';
            targetBlank.setAttribute('data-filled', word);
            targetBlank.classList.add('filled');
            optionEl.classList.add('used');
            
            updateGuidedSubmitState();
        }
        
        function handleGuidedBlankClick(blank) {
            var filledWord = blank.getAttribute('data-filled');
            if (!filledWord) return;
            
            blank.innerHTML = '';
            blank.removeAttribute('data-filled');
            blank.classList.remove('filled');
            
            var option = document.querySelector('.guided-option[data-word="' + filledWord + '"]');
            if (option) option.classList.remove('used');
            
            updateGuidedSubmitState();
        }
        
        function updateGuidedSubmitState() {
            var blanks = document.querySelectorAll('.guided-blank');
            var allFilled = true;
            for (var i = 0; i < blanks.length; i++) {
                if (!blanks[i].hasAttribute('data-filled')) {
                    allFilled = false;
                    break;
                }
            }
            document.getElementById('guidedSubmitBtn').disabled = !allFilled;
        }
        
        function checkGuidedFillAnswer() {
            var item = window.guidedFillItem;
            var blanks = document.querySelectorAll('.guided-blank');
            
            var userAnswers = [];
            blanks.forEach(function(blank) {
                userAnswers.push(blank.getAttribute('data-filled') || '');
            });
            
            var allCorrect = true;
            for (var i = 0; i < item.blanks.length; i++) {
                if (userAnswers[i] !== item.blanks[i]) {
                    allCorrect = false;
                    break;
                }
            }
            
            window.guidedFillChecked = true;
            
            // Show visual feedback
            blanks.forEach(function(blank, i) {
                if (userAnswers[i] === item.blanks[i]) {
                    blank.classList.add('correct');
                    blank.classList.remove('filled');
                } else {
                    blank.classList.add('incorrect');
                    blank.classList.remove('filled');
                }
            });
            
            document.querySelectorAll('.guided-option').forEach(function(opt) {
                opt.style.pointerEvents = 'none';
            });
            
            var resultEl = document.getElementById('guidedResult');
            var buttonsEl = document.getElementById('guidedButtons');
            
            if (allCorrect) {
                resultEl.style.display = 'block';
                resultEl.className = 'practice-result correct';
                resultEl.innerHTML = ' Correct! Click Next to continue to sentence building.';
                buttonsEl.innerHTML = '';
                
                // Enable the Next button
                window.guidedPracticeCompleted = true;
                document.getElementById('lessonNextBtn').disabled = false;
            } else {
                resultEl.style.display = 'block';
                resultEl.className = 'practice-result incorrect';
                resultEl.innerHTML = ' Not quite right...';
                
                buttonsEl.innerHTML = 
                    '<button class="btn-action" id="guidedTryAgainBtn" style="margin-right: 10px;"> Try Again</button>' +
                    '<button class="btn-flip" id="guidedRevealBtn"> Show Answer</button>';
                
                document.getElementById('guidedTryAgainBtn').addEventListener('click', function() {
                    resetGuidedFillBlank();
                });
                
                document.getElementById('guidedRevealBtn').addEventListener('click', function() {
                    revealGuidedAnswer();
                });
            }
        }
        
        function resetGuidedFillBlank() {
            var blanks = document.querySelectorAll('.guided-blank');
            
            blanks.forEach(function(blank) {
                blank.innerHTML = '';
                blank.removeAttribute('data-filled');
                blank.classList.remove('filled', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.guided-option').forEach(function(opt) {
                opt.classList.remove('used');
                opt.style.pointerEvents = '';
            });
            
            window.guidedFillChecked = false;
            
            document.getElementById('guidedButtons').innerHTML = 
                '<button class="practice-check-btn" id="guidedSubmitBtn" disabled>Check Answer</button>';
            document.getElementById('guidedSubmitBtn').addEventListener('click', checkGuidedFillAnswer);
            
            document.getElementById('guidedResult').style.display = 'none';
        }
        
        function revealGuidedAnswer() {
            var item = window.guidedFillItem;
            var blanks = document.querySelectorAll('.guided-blank');
            
            // Show the correct answer
            var resultEl = document.getElementById('guidedResult');
            resultEl.className = 'practice-result incorrect';
            resultEl.innerHTML = 'The correct answer is: <strong>' + item.blanks.join(' ... ') + '</strong><br>Now fill it in correctly to continue.';
            
            // Reset blanks so user can try again with the answer visible
            blanks.forEach(function(blank) {
                blank.innerHTML = '';
                blank.removeAttribute('data-filled');
                blank.classList.remove('filled', 'correct', 'incorrect');
            });
            
            // Reset all options
            document.querySelectorAll('.guided-option').forEach(function(opt) {
                opt.classList.remove('used');
                opt.style.pointerEvents = '';
            });
            
            // Reset state but mark that answer was revealed
            window.guidedFillChecked = false;
            window.guidedAnswerRevealed = true;
            
            // Reset buttons
            document.getElementById('guidedButtons').innerHTML = 
                '<button class="practice-check-btn" id="guidedSubmitBtn" disabled>Check Answer</button>';
            document.getElementById('guidedSubmitBtn').addEventListener('click', checkGuidedFillAnswer);
        }
        
        // Practice Mode Functions
        function startPractice(lessonId, mode) {
            currentPracticeLesson = lessonId;
            currentPracticeMode = mode || 'build';
            currentPracticeIndex = 0;
            practiceScore = { correct: 0, total: 0 };
            
            var templates = grammarPracticeTemplates[lessonId];
            if (!templates) {
                showToast('No practice available for this lesson');
                return;
            }
            
            // Only use build mode now
            currentPracticeItems = shuffleArray([...templates.sentenceBuilds]);
            
            // Hide both lessons list and lesson view, show practice view
            document.getElementById('grammarLessonsList').style.display = 'none';
            document.getElementById('grammarLessonView').style.display = 'none';
            document.getElementById('grammarPracticeView').style.display = 'block';
            
            renderPracticeQuestion();
        }
        
        function renderPracticeQuestion() {
            var container = document.getElementById('practiceContent');
            var item = currentPracticeItems[currentPracticeIndex];
            var templates = grammarPracticeTemplates[currentPracticeLesson];
            
            document.getElementById('practiceScore').textContent = practiceScore.correct + ' / ' + practiceScore.total;
            
            if (!item) {
                // Practice complete
                renderPracticeComplete();
                return;
            }
            
            renderBuildQuestion(item, templates);
        }
        
        function renderFillBlankQuestion(item, templates) {
            var container = document.getElementById('practiceContent');
            
            // Reset state
            currentBlankIndex = 0;
            filledBlanks = [];
            window.fillBlankItem = item;
            window.fillBlankChecked = false;
            
            // Create sentence with blanks
            var sentenceHtml = item.sentence;
            var blankIndex = 0;
            while (sentenceHtml.indexOf('___') !== -1) {
                sentenceHtml = sentenceHtml.replace('___', '<span class="blank" data-index="' + blankIndex + '" data-answer="' + item.blanks[blankIndex] + '"></span>');
                blankIndex++;
            }
            
            // Create word options (correct answers + distractors, shuffled)
            var options = [...item.blanks];
            var distractors = shuffleArray([...templates.distractors]).slice(0, Math.max(3, 6 - item.blanks.length));
            options = shuffleArray([...options, ...distractors]);
            
            var optionsHtml = '';
            options.forEach(function(word) {
                optionsHtml += '<div class="practice-word-option" data-word="' + word + '">' + word + '</div>';
            });
            
            container.innerHTML = 
                '<div class="practice-question">' +
                    '<div class="practice-english">' + item.english + '</div>' +
                    '<div class="practice-sentence" id="practiceSentence">' + sentenceHtml + '</div>' +
                '</div>' +
                '<div class="practice-word-options" id="practiceOptions">' + optionsHtml + '</div>' +
                '<div class="practice-buttons" id="practiceButtons">' +
                    '<button class="practice-check-btn" id="fillBlankSubmitBtn" disabled>Check Answer</button>' +
                '</div>' +
                '<div class="practice-result" id="practiceResult" style="display:none;"></div>';
            
            // Add click listeners to word options
            document.querySelectorAll('.practice-word-option').forEach(function(opt) {
                opt.addEventListener('click', function() {
                    if (!window.fillBlankChecked) {
                        handleFillBlankSelect(this.getAttribute('data-word'), this);
                    }
                });
            });
            
            // Add click listeners to blanks (to remove filled words)
            document.querySelectorAll('.practice-sentence .blank').forEach(function(blank) {
                blank.addEventListener('click', function() {
                    if (!window.fillBlankChecked) {
                        handleBlankClick(this);
                    }
                });
            });
            
            // Submit button listener
            document.getElementById('fillBlankSubmitBtn').addEventListener('click', checkFillBlankAnswer);
            
            disablePracticeClickAdvance();
        }
        
        var currentBlankIndex = 0;
        var filledBlanks = [];
        
        function handleFillBlankSelect(word, optionEl) {
            var blanks = document.querySelectorAll('.practice-sentence .blank');
            
            // Find first empty blank
            var targetBlank = null;
            for (var i = 0; i < blanks.length; i++) {
                if (!blanks[i].hasAttribute('data-filled')) {
                    targetBlank = blanks[i];
                    break;
                }
            }
            
            if (!targetBlank) return; // All blanks filled
            
            // Fill the blank
            targetBlank.innerHTML = '<span class="filled-word">' + word + '</span>';
            targetBlank.setAttribute('data-filled', word);
            targetBlank.classList.add('filled');
            
            // Mark the option as used
            optionEl.classList.add('used');
            
            // Update submit button state
            updateSubmitButtonState();
        }
        
        function handleBlankClick(blank) {
            var filledWord = blank.getAttribute('data-filled');
            if (!filledWord) return;
            
            // Clear the blank
            blank.innerHTML = '';
            blank.removeAttribute('data-filled');
            blank.classList.remove('filled');
            
            // Un-mark the option
            var option = document.querySelector('.practice-word-option[data-word="' + filledWord + '"]');
            if (option) option.classList.remove('used');
            
            // Update submit button state
            updateSubmitButtonState();
        }
        
        function updateSubmitButtonState() {
            var blanks = document.querySelectorAll('.practice-sentence .blank');
            var allFilled = true;
            for (var i = 0; i < blanks.length; i++) {
                if (!blanks[i].hasAttribute('data-filled')) {
                    allFilled = false;
                    break;
                }
            }
            document.getElementById('fillBlankSubmitBtn').disabled = !allFilled;
        }
        
        function checkFillBlankAnswer() {
            var item = window.fillBlankItem;
            var blanks = document.querySelectorAll('.practice-sentence .blank');
            
            // Gather user answers
            var userAnswers = [];
            blanks.forEach(function(blank) {
                userAnswers.push(blank.getAttribute('data-filled') || '');
            });
            
            // Check if correct
            var allCorrect = true;
            for (var i = 0; i < item.blanks.length; i++) {
                if (userAnswers[i] !== item.blanks[i]) {
                    allCorrect = false;
                    break;
                }
            }
            
            window.fillBlankChecked = true;
            
            // Show visual feedback on blanks
            blanks.forEach(function(blank, i) {
                if (userAnswers[i] === item.blanks[i]) {
                    blank.classList.add('correct');
                    blank.classList.remove('filled');
                } else {
                    blank.classList.add('incorrect');
                    blank.classList.remove('filled');
                }
            });
            
            // Disable word options
            document.querySelectorAll('.practice-word-option').forEach(function(opt) {
                opt.style.pointerEvents = 'none';
            });
            
            var resultEl = document.getElementById('practiceResult');
            var buttonsEl = document.getElementById('practiceButtons');
            
            if (allCorrect) {
                // Correct!
                practiceScore.total++;
                practiceScore.correct++;
                document.getElementById('practiceScore').textContent = practiceScore.correct + ' / ' + practiceScore.total;
                
                // Award XP for correct grammar practice
                awardXP(XP_REWARDS.grammarPracticeCorrect);
                
                resultEl.style.display = 'block';
                resultEl.className = 'practice-result correct';
                resultEl.innerHTML = ' Correct!';
                
                buttonsEl.innerHTML = '';
                enablePracticeClickAdvance();
            } else {
                // Incorrect - offer try again or reveal
                resultEl.style.display = 'block';
                resultEl.className = 'practice-result incorrect';
                resultEl.innerHTML = ' Not quite right...';
                
                buttonsEl.innerHTML = 
                    '<button class="btn-action" id="tryAgainBtn" style="margin-right: 10px;"> Try Again</button>' +
                    '<button class="btn-flip" id="revealAnswerBtn"> Reveal Answer</button>';
                
                document.getElementById('tryAgainBtn').addEventListener('click', function() {
                    resetFillBlankQuestion();
                });
                
                document.getElementById('revealAnswerBtn').addEventListener('click', function() {
                    revealFillBlankAnswer();
                });
            }
        }
        
        function resetFillBlankQuestion() {
            var item = window.fillBlankItem;
            var blanks = document.querySelectorAll('.practice-sentence .blank');
            
            // Clear all blanks
            blanks.forEach(function(blank) {
                blank.innerHTML = '';
                blank.removeAttribute('data-filled');
                blank.classList.remove('filled', 'correct', 'incorrect');
            });
            
            // Reset all options
            document.querySelectorAll('.practice-word-option').forEach(function(opt) {
                opt.classList.remove('used');
                opt.style.pointerEvents = '';
            });
            
            // Reset state
            window.fillBlankChecked = false;
            
            // Reset buttons
            document.getElementById('practiceButtons').innerHTML = 
                '<button class="practice-check-btn" id="fillBlankSubmitBtn" disabled>Check Answer</button>';
            document.getElementById('fillBlankSubmitBtn').addEventListener('click', checkFillBlankAnswer);
            
            // Hide result
            document.getElementById('practiceResult').style.display = 'none';
        }
        
        function revealFillBlankAnswer() {
            var item = window.fillBlankItem;
            var blanks = document.querySelectorAll('.practice-sentence .blank');
            
            // Count as attempted but wrong
            practiceScore.total++;
            document.getElementById('practiceScore').textContent = practiceScore.correct + ' / ' + practiceScore.total;
            
            // Show correct answers in blanks
            blanks.forEach(function(blank, i) {
                blank.innerHTML = '<span class="filled-word">' + item.blanks[i] + '</span>';
                blank.classList.remove('incorrect', 'filled');
                blank.classList.add('correct');
            });
            
            // Update result
            var resultEl = document.getElementById('practiceResult');
            resultEl.className = 'practice-result incorrect';
            resultEl.innerHTML = 'The correct answer is: <strong>' + item.blanks.join(' ... ') + '</strong>';
            
            // Show next button
            document.getElementById('practiceButtons').innerHTML = '';
            enablePracticeClickAdvance();
        }
        
        function renderBuildQuestion(item, templates) {
            var container = document.getElementById('practiceContent');
            
            // Shuffle word order
            var shuffledWords = shuffleArray([...item.words]);
            
            var wordsHtml = '';
            shuffledWords.forEach(function(word, i) {
                wordsHtml += '<div class="build-word-chip" data-word="' + word + '" data-index="' + i + '">' + word + '</div>';
            });
            
            container.innerHTML = 
                '<div class="practice-question">' +
                    '<div class="practice-english">' + item.english + '</div>' +
                '</div>' +
                '<div class="build-target" id="buildTarget">' +
                    '<span class="build-placeholder">Tap words to build the sentence</span>' +
                '</div>' +
                '<div class="build-word-bank" id="buildWordBank">' + wordsHtml + '</div>' +
                '<div class="practice-result" id="practiceResult" style="display:none;"></div>';
            
            // Add click listeners
            document.querySelectorAll('.build-word-chip').forEach(function(chip) {
                chip.addEventListener('click', function() {
                    if (!this.classList.contains('used')) {
                        handleBuildSelect(this);
                    }
                });
            });
            
            disablePracticeClickAdvance();
            window.buildItem = item;
        }
        
        function handleBuildSelect(chip) {
            var word = chip.getAttribute('data-word');
            var target = document.getElementById('buildTarget');
            
            // Remove placeholder if present
            var placeholder = target.querySelector('.build-placeholder');
            if (placeholder) placeholder.remove();
            
            // Add word to target
            var wordEl = document.createElement('div');
            wordEl.className = 'build-word';
            wordEl.textContent = word;
            wordEl.setAttribute('data-word', word);
            wordEl.onclick = function() {
                // Remove from target, add back to bank
                this.remove();
                chip.classList.remove('used');
                
                // Show placeholder if empty
                if (target.querySelectorAll('.build-word').length === 0) {
                    target.innerHTML = '<span class="build-placeholder">Tap words to build the sentence</span>';
                }
            };
            target.appendChild(wordEl);
            
            // Mark chip as used
            chip.classList.add('used');
            
            // Check if all words used
            var allUsed = document.querySelectorAll('.build-word-chip:not(.used)').length === 0;
            if (allUsed) {
                checkBuildAnswer();
            }
        }
        
        function checkBuildAnswer() {
            var item = window.buildItem;
            var target = document.getElementById('buildTarget');
            
            // Get answer from visual order in DOM, not from array
            var wordEls = target.querySelectorAll('.build-word');
            var userAnswer = Array.from(wordEls).map(function(el) { return el.getAttribute('data-word'); }).join('');
            var isCorrect = userAnswer === item.correct;
            
            practiceScore.total++;
            if (isCorrect) {
                practiceScore.correct++;
            }
            
            // Show visual feedback on target
            var target = document.getElementById('buildTarget');
            target.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            // Show result
            var resultEl = document.getElementById('practiceResult');
            resultEl.style.display = 'block';
            resultEl.className = 'practice-result clickable ' + (isCorrect ? 'correct' : 'incorrect');
            
            if (isCorrect) {
                resultEl.innerHTML = ' Correct!<div class="tap-hint">Tap to continue</div>';
            } else {
                resultEl.innerHTML = ' Not quite.<div class="practice-correct-answer">Correct: ' + item.correct + '</div><div class="tap-hint">Tap to continue</div>';
            }
            
            // Allow tap on result to advance
            resultEl.onclick = function() {
                nextPracticeQuestion();
            };
            
            document.getElementById('practiceScore').textContent = practiceScore.correct + ' / ' + practiceScore.total;
            enablePracticeClickAdvance();
        }
        
        function renderPracticeComplete() {
            var container = document.getElementById('practiceContent');
            var percentage = practiceScore.total > 0 ? Math.round((practiceScore.correct / practiceScore.total) * 100) : 0;
            var emoji = percentage >= 80 ? '' : percentage >= 50 ? '' : '';
            
            container.innerHTML = 
                '<div class="practice-complete">' +
                    '<div class="practice-complete-icon">' + emoji + '</div>' +
                    '<div class="practice-complete-title">Practice Complete!</div>' +
                    '<div class="practice-complete-score">' + practiceScore.correct + ' / ' + practiceScore.total + ' (' + percentage + '%)</div>' +
                    '<div class="practice-complete-buttons">' +
                        '<button class="btn-action" onclick="restartPractice()"> Practice Again</button>' +
                        '<button class="btn-flip" onclick="backToLessons()"> Back to Lessons</button>' +
                    '</div>' +
                '</div>';
            
            disablePracticeClickAdvance();
            
            // Mark lesson as completed
            var lesson = grammarLessons[currentLessonIndex];
            if (!lessonProgress[lesson.id]) {
                // First time completing this lesson - award bonus XP
                awardXP(XP_REWARDS.grammarLessonComplete, 'Lesson Complete!');
            }
            lessonProgress[lesson.id] = true;
            localStorage.setItem('thaiGrammarProgress', JSON.stringify(lessonProgress));
        }
        
        function restartPractice() {
            startPractice(currentPracticeLesson, 'build');
        }
        
        function backToLessons() {
            document.getElementById('grammarPracticeView').style.display = 'none';
            document.getElementById('grammarLessonView').style.display = 'none';
            document.getElementById('grammarLessonsList').style.display = '';
            renderGrammarLessonsList();
        }
        
        function enablePracticeClickAdvance() {
            var tapHint = document.getElementById('practiceTapHint');
            if (tapHint) tapHint.style.display = 'block';
            
            document.getElementById('grammarPracticeView').onclick = function(e) {
                // Don't advance if clicking on interactive elements
                if (e.target.closest('button') || e.target.closest('.practice-option') || e.target.closest('.word-option')) return;
                document.getElementById('grammarPracticeView').onclick = null;
                nextPracticeQuestion();
            };
        }
        
        function disablePracticeClickAdvance() {
            var tapHint = document.getElementById('practiceTapHint');
            if (tapHint) tapHint.style.display = 'none';
            document.getElementById('grammarPracticeView').onclick = null;
        }
        
        function nextPracticeQuestion() {
            disablePracticeClickAdvance();
            currentPracticeIndex++;
            renderPracticeQuestion();
        }
        
        function closePractice() {
            document.getElementById('grammarPracticeView').style.display = 'none';
            document.getElementById('grammarLessonView').style.display = 'block';
            renderLessonStep();
        }

        function switchAppMode(mode) {
            currentAppMode = mode;
            // This function is now mostly handled by startApp
            // Keep for backwards compatibility
        }

        // Show main menu
        // Navigation stack for smart back button
        let navigationStack = [];
        
        function navigateTo(level, data = {}) {
            navigationStack.push({ level, data });
            updateBackButton();
        }
        
        function navigateBack() {
            if (navigationStack.length <= 1) {
                showMainMenu();
                return;
            }
            
            navigationStack.pop(); // Remove current
            const previous = navigationStack[navigationStack.length - 1];
            
            if (!previous) {
                showMainMenu();
                return;
            }
            
            // Hide all sections first
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('grammarSection').style.display = 'none';
            document.getElementById('alphabetSection').style.display = 'none';
            document.getElementById('writingSection').style.display = 'none';
            document.getElementById('readingSection').style.display = 'none';
            
            // Navigate to previous level without adding to stack
            switch (previous.level) {
                case 'flashcards':
                    document.getElementById('appContainer').style.display = 'block';
                    break;
                case 'grammar':
                    document.getElementById('grammarSection').style.display = 'block';
                    // If coming back from lesson, show lesson list
                    if (previous.data.showList) {
                        document.getElementById('grammarLessonView').style.display = 'none';
                        document.getElementById('grammarPracticeView').style.display = 'none';
                        document.getElementById('grammarLessonsList').style.display = '';
                    }
                    break;
                case 'alphabet':
                    document.getElementById('alphabetSection').style.display = 'block';
                    // If coming back from a mode, show mode selection
                    if (previous.data.showModes) {
                        document.getElementById('alphabetModes').style.display = 'grid';
                        document.getElementById('alphabetProgressOverview').style.display = 'block';
                        document.getElementById('alphabetPracticeView').style.display = 'none';
                        document.getElementById('alphabetFlashcardView').style.display = 'none';
                        document.getElementById('classSortingView').style.display = 'none';
                        document.getElementById('alphabetChartView').style.display = 'none';
                        document.getElementById('fontStylesView').style.display = 'none';
                        document.getElementById('fontMatchingView').style.display = 'none';
                    }
                    break;
                case 'writing':
                    document.getElementById('writingSection').style.display = 'block';
                    break;
                case 'reading':
                    document.getElementById('readingSection').style.display = 'block';
                    // If coming back from story, show story list
                    if (previous.data.showList) {
                        document.getElementById('readingLevelSelect').style.display = 'block';
                        document.getElementById('readingStoryView').style.display = 'none';
                    }
                    break;
                default:
                    showMainMenu();
            }
            updateBackButton();
        }
        
        function updateBackButton() {
            const backBtn = document.getElementById('backToMenu');
            backBtn.style.display = navigationStack.length > 0 ? 'flex' : 'none';
        }
        
        function showMainMenu() {
            navigationStack = [];
            document.getElementById('mainMenu').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('grammarSection').style.display = 'none';
            document.getElementById('alphabetSection').style.display = 'none';
            document.getElementById('writingSection').style.display = 'none';
            document.getElementById('readingSection').style.display = 'none';
            document.getElementById('backToMenu').style.display = 'none';
            document.getElementById('mainMenuSettingsBtn').style.display = 'flex';
        }

        // Start app from main menu
        function startApp(mode) {
            navigationStack = []; // Reset navigation
            navigateTo(mode, { showList: true, showModes: true });
            
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('backToMenu').style.display = 'flex';
            document.getElementById('mainMenuSettingsBtn').style.display = 'none';
            
            // Hide all sections first
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('grammarSection').style.display = 'none';
            document.getElementById('alphabetSection').style.display = 'none';
            document.getElementById('writingSection').style.display = 'none';
            document.getElementById('readingSection').style.display = 'none';
            
            // Show the appropriate section
            if (mode === 'writing') {
                document.getElementById('writingSection').style.display = 'block';
                initWritingPractice();
            } else if (mode === 'reading') {
                document.getElementById('readingSection').style.display = 'block';
                initReadingPractice();
            } else if (mode === 'grammar') {
                document.getElementById('grammarSection').style.display = 'block';
                renderGrammarLessonsList();
            } else if (mode === 'alphabet') {
                document.getElementById('alphabetSection').style.display = 'block';
                // Reset to main view
                document.getElementById('alphabetModes').style.display = 'grid';
                document.getElementById('alphabetProgressOverview').style.display = 'block';
                document.getElementById('alphabetPracticeView').style.display = 'none';
                document.getElementById('alphabetFlashcardView').style.display = 'none';
                document.getElementById('classSortingView').style.display = 'none';
                document.getElementById('alphabetChartView').style.display = 'none';
                document.getElementById('fontStylesView').style.display = 'none';
                document.getElementById('fontMatchingView').style.display = 'none';
                updateAlphabetProgressDisplay();
            } else {
                // flashcards
                document.getElementById('appContainer').style.display = 'block';
                initApp(true); // Check for resume for flashcards mode
            }
        }

        function initApp(checkResume = true) {
            try {
                loadProgress();
                loadTheme();
                initOptionsPanel();
                updateListSelector();
                // Only show resume if cards have actually been swiped AND we're in flashcards mode
                var hasSwipedCards = checkResume && sessionState.inProgress && sessionState.cardOrder.length > 0 && 
                                     (sessionStats.correct > 0 || sessionStats.incorrect > 0);
                if (hasSwipedCards) {
                    showResumeModal();
                } else {
                    // Reset session stats for fresh start
                    sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
                    initializeCards();
                    updateCard();
                }
                setupEventListeners();
            } catch (e) {
                console.error('initApp error:', e);
                alert('Error initializing app: ' + e.message);
            }
        }

        // ============== WRITING PRACTICE ==============
        
        let writingState = {
            words: [],
            currentIndex: 0,
            correct: 0,
            total: 0,
            answered: false,
            currentMode: 'wordBuilder' // 'freeType' or 'wordBuilder'
        };
        
        function switchWritingMode(mode) {
            writingState.currentMode = mode;
            
            // Update tab styling
            document.querySelectorAll('.writing-mode-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.mode === mode);
            });
            
            // Show/hide mode sections
            document.getElementById('freeTypeMode').style.display = mode === 'freeType' ? 'block' : 'none';
            document.getElementById('wordBuilderMode').style.display = mode === 'wordBuilder' ? 'block' : 'none';
            
            // Initialize the appropriate mode
            if (mode === 'wordBuilder') {
                initWordBuilder();
            } else if (mode === 'freeType') {
                loadFreeTypeWords();
                nextWritingWord();
            }
        }
        
        // Free Type level state
        let freeTypeLevel = 'beginner';
        
        function selectFreeTypeLevel(level, element) {
            freeTypeLevel = level;
            document.querySelectorAll('#freeTypeMode .wordbuilder-level-card').forEach(card => {
                card.classList.remove('active');
            });
            if (element) element.classList.add('active');
            loadFreeTypeWords();
            nextWritingWord();
        }
        
        function loadFreeTypeWords() {
            // Filter words based on level (same character count logic as Word Builder)
            const levelFilters = {
                beginner: word => word.thai.length <= 3,
                intermediate: word => word.thai.length >= 4 && word.thai.length <= 5,
                advanced: word => word.thai.length >= 6
            };
            
            const filter = levelFilters[freeTypeLevel] || levelFilters.beginner;
            
            // Collect words from all themed lists that match the level
            writingState.words = [];
            themedLists.forEach(list => {
                list.words.forEach(word => {
                    if (filter(word)) {
                        writingState.words.push(word);
                    }
                });
            });
            
            // If no words found for this level, use all words
            if (writingState.words.length === 0) {
                themedLists.forEach(list => {
                    writingState.words = writingState.words.concat(list.words);
                });
            }
            
            // Shuffle
            for (let i = writingState.words.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [writingState.words[i], writingState.words[j]] = [writingState.words[j], writingState.words[i]];
            }
            
            writingState.currentIndex = 0;
            writingState.correct = 0;
            writingState.total = 0;
            updateWritingScore();
        }
        
        function updateFreeTypeDisplay() {
            const showEnglish = document.getElementById('freeTypeShowEnglish').checked;
            const showRoman = document.getElementById('freeTypeShowRomanization').checked;
            
            document.getElementById('writingEnglish').style.display = showEnglish ? 'block' : 'none';
            document.getElementById('writingRomanization').style.display = showRoman ? 'block' : 'none';
        }
        
        function initWritingPractice() {
            // Set default mode to Word Builder
            writingState.currentMode = 'wordBuilder';
            document.getElementById('freeTypeMode').style.display = 'none';
            document.getElementById('wordBuilderMode').style.display = 'block';
            
            // Reset tab styling
            document.querySelectorAll('.writing-mode-tab').forEach(tab => {
                tab.classList.toggle('active', tab.dataset.mode === 'wordBuilder');
            });
            
            // Initialize Word Builder
            initWordBuilder();
            
            // Setup event listeners for Free Type
            document.getElementById('writingCheckBtn').addEventListener('click', checkWritingAnswer);
            document.getElementById('writingSkipBtn').addEventListener('click', skipWritingWord);
            document.getElementById('writingNextBtn').addEventListener('click', nextWritingWord);
            document.getElementById('writingInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    if (writingState.answered) {
                        nextWritingWord();
                    } else {
                        checkWritingAnswer();
                    }
                }
            });
            
            loadFreeTypeWords();
        }
        
        function loadWritingWords() {
            // Now using loadFreeTypeWords instead
            loadFreeTypeWords();
        }
        
        function nextWritingWord() {
            if (writingState.currentIndex >= writingState.words.length) {
                writingState.currentIndex = 0;
                // Reshuffle
                for (let i = writingState.words.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [writingState.words[i], writingState.words[j]] = [writingState.words[j], writingState.words[i]];
                }
            }
            
            const word = writingState.words[writingState.currentIndex];
            document.getElementById('writingEnglish').textContent = word.english;
            
            // Get romanization
            const roman = romanization[word.thai] || word.thai;
            document.getElementById('writingRomanization').textContent = roman;
            
            // Apply toggle settings
            const showEnglish = document.getElementById('freeTypeShowEnglish')?.checked ?? true;
            const showRoman = document.getElementById('freeTypeShowRomanization')?.checked ?? true;
            document.getElementById('writingEnglish').style.display = showEnglish ? 'block' : 'none';
            document.getElementById('writingRomanization').style.display = showRoman ? 'block' : 'none';
            
            // Reset input
            const input = document.getElementById('writingInput');
            input.value = '';
            input.className = 'writing-input';
            input.disabled = false;
            input.focus();
            
            // Reset feedback
            document.getElementById('writingFeedback').className = 'writing-feedback';
            
            // Reset buttons
            document.getElementById('writingCheckBtn').style.display = 'inline-block';
            document.getElementById('writingSkipBtn').style.display = 'inline-block';
            document.getElementById('writingNextBtn').style.display = 'none';
            
            writingState.answered = false;
        }
        
        function checkWritingAnswer() {
            const word = writingState.words[writingState.currentIndex];
            const input = document.getElementById('writingInput');
            const userAnswer = input.value.trim();
            
            const isCorrect = userAnswer === word.thai;
            
            writingState.total++;
            if (isCorrect) {
                writingState.correct++;
                input.className = 'writing-input correct';
                document.getElementById('writingFeedback').className = 'writing-feedback show correct';
                document.getElementById('writingFeedbackText').textContent = ' Correct!';
                document.getElementById('writingCorrectAnswer').textContent = '';
                
                // Award XP for free type correct
                awardXP(XP_REWARDS.freeTypeCorrect);
            } else {
                input.className = 'writing-input incorrect';
                document.getElementById('writingFeedback').className = 'writing-feedback show incorrect';
                document.getElementById('writingFeedbackText').textContent = ' Not quite';
                document.getElementById('writingCorrectAnswer').textContent = `Correct: ${word.thai}`;
            }
            
            input.disabled = true;
            document.getElementById('writingCheckBtn').style.display = 'none';
            document.getElementById('writingSkipBtn').style.display = 'none';
            document.getElementById('writingNextBtn').style.display = 'inline-block';
            
            writingState.answered = true;
            writingState.currentIndex++;
            updateWritingScore();
        }
        
        function skipWritingWord() {
            const word = writingState.words[writingState.currentIndex];
            
            document.getElementById('writingFeedback').className = 'writing-feedback show incorrect';
            document.getElementById('writingFeedbackText').textContent = 'Skipped';
            document.getElementById('writingCorrectAnswer').textContent = `Answer: ${word.thai}`;
            
            document.getElementById('writingInput').disabled = true;
            document.getElementById('writingCheckBtn').style.display = 'none';
            document.getElementById('writingSkipBtn').style.display = 'none';
            document.getElementById('writingNextBtn').style.display = 'inline-block';
            
            writingState.answered = true;
            writingState.total++;
            writingState.currentIndex++;
            updateWritingScore();
        }
        
        function updateWritingScore() {
            document.getElementById('writingCorrect').textContent = writingState.correct;
            document.getElementById('writingTotal').textContent = writingState.total;
        }
        
        // ============== WORD BUILDER ==============
        
        // Word Builder state
        let wbState = {
            level: 'beginner',
            words: [],
            currentWordIndex: 0,
            currentCharIndex: 0,
            currentWord: null,
            builtWord: '',
            score: 0,
            total: 0,
            isComplete: false
        };
        
        // Word lists by level - prioritizing commonly used words
        const wbWordLists = {
            beginner: [
                // 2-3 character simple words - most common
                { thai: "", roman: "maa", english: "come" },
                { thai: "", roman: "bpai", english: "go" },
                { thai: "", roman: "gin", english: "eat" },
                { thai: "", roman: "dm", english: "drink" },
                { thai: "", roman: "nn", english: "sleep" },
                { thai: "", roman: "duu", english: "watch/look" },
                { thai: "", roman: "put", english: "speak" },
                { thai: "", roman: "fang", english: "listen" },
                { thai: "", roman: "an", english: "read" },
                { thai: "", roman: "kan", english: "write" },
                { thai: "", roman: "rk", english: "love" },
                { thai: "", roman: "chp", english: "like" },
                { thai: "", roman: "chi", english: "yes" },
                { thai: "", roman: "mi", english: "no/not" },
                { thai: "", roman: "dii", english: "good" },
                { thai: "", roman: "mak", english: "very/much" },
                { thai: "", roman: "nam", english: "water" },
                { thai: "", roman: "kao", english: "rice" },
                { thai: "", roman: "ban", english: "house" },
                { thai: "", roman: "kon", english: "person" },
                { thai: "", roman: "wan", english: "day" },
                { thai: "", roman: "bpii", english: "year" },
                { thai: "", roman: "nng", english: "one" },
                { thai: "", roman: "sng", english: "two" },
                { thai: "", roman: "sam", english: "three" },
                { thai: "", roman: "me", english: "mother" },
                { thai: "", roman: "p", english: "father" },
                { thai: "", roman: "ma", english: "dog" },
                { thai: "", roman: "maeo", english: "cat" },
                { thai: "", roman: "rt", english: "car" },
                { thai: "", roman: "rn", english: "hot" },
                { thai: "", roman: "yen", english: "cold/cool" },
                { thai: "", roman: "say", english: "beautiful" },
                { thai: "", roman: "hu", english: "hungry" },
                { thai: "", roman: "m", english: "full" }
            ],
            intermediate: [
                // 4-5 character common words
                { thai: "", roman: "s-wt-dii", english: "hello" },
                { thai: "", roman: "kp-kun", english: "thank you" },
                { thai: "", roman: "k-tot", english: "sorry" },
                { thai: "", roman: "-ri", english: "delicious" },
                { thai: "", roman: "s-baai", english: "comfortable" },
                { thai: "", roman: "pan", english: "friend" },
                { thai: "", roman: "aa-han", english: "food" },
                { thai: "", roman: "roong-rian", english: "school" },
                { thai: "", roman: "tam-ngaan", english: "work" },
                { thai: "", roman: "rian", english: "study" },
                { thai: "", roman: "paa-sa", english: "language" },
                { thai: "", roman: "too-r-sp", english: "telephone" },
                { thai: "", roman: "s-nk", english: "fun" },
                { thai: "", roman: "nay", english: "tired" },
                { thai: "", roman: "ngang", english: "sleepy" },
                { thai: "", roman: "dtng-gaan", english: "need/want" },
                { thai: "", roman: "kt-tng", english: "miss (someone)" },
                { thai: "", roman: "dt-lat", english: "market" },
                { thai: "", roman: "roong-p-yaa-baan", english: "hospital" },
                { thai: "", roman: "s-ta-nii", english: "station" },
                { thai: "", roman: "aa-gat", english: "weather" },
                { thai: "", roman: "mang", english: "city" },
                { thai: "", roman: "bpr-tet", english: "country" },
                { thai: "", roman: "krp-krua", english: "family" },
                { thai: "", roman: "kwaam-sk", english: "happiness" },
                { thai: "", roman: "lng-jak", english: "after" },
                { thai: "", roman: "gn", english: "before" },
                { thai: "", roman: "r-wang", english: "between" },
                { thai: "", roman: "pr", english: "because" },
                { thai: "", roman: "dte-wa", english: "but" }
            ],
            advanced: [
                // 6+ character complex words
                { thai: "", roman: "m-ha-wt-t-yaa-lai", english: "university" },
                { thai: "", roman: "roong-p-yaa-baan", english: "hospital" },
                { thai: "", roman: "in-t-nt", english: "internet" },
                { thai: "", roman: "km-piu-dt", english: "computer" },
                { thai: "", roman: "hang-sp-p-sn-ka", english: "department store" },
                { thai: "", roman: "s-nam-bin", english: "airport" },
                { thai: "", roman: "rt-fai-fa", english: "electric train" },
                { thai: "", roman: "dtt-sn-jai", english: "decide" },
                { thai: "", roman: "bpr-sp-gaan", english: "experience" },
                { thai: "", roman: "kwaam-rp-pt-chp", english: "responsibility" },
                { thai: "", roman: "un-h-puum", english: "temperature" },
                { thai: "", roman: "krang-bin", english: "airplane" },
                { thai: "", roman: "bpr-chum", english: "meeting" },
                { thai: "", roman: "bpr-wt-dt-sat", english: "history" },
                { thai: "", roman: "wt-t-n-tam", english: "culture" },
                { thai: "", roman: "sng-wet-lm", english: "environment" },
                { thai: "", roman: "set-t-gt", english: "economy" },
                { thai: "", roman: "gaan-sk-sa", english: "education" },
                { thai: "", roman: "rt-t-baan", english: "government" },
                { thai: "", roman: "bpr-chaa-tp-bp-dtai", english: "democracy" }
            ]
        };
        
        // Thai character categories for generating distractors (Word Builder)
        const wbConsonants = ''.split('');
        const wbVowels = ''.split('');
        const wbToneMarks = ''.split('');
        const wbSpecials = ''.split('');
        
        // Determine what type of character
        function getCharType(char) {
            if (wbConsonants.includes(char)) return 'consonant';
            if (wbVowels.includes(char)) return 'vowel';
            if (wbToneMarks.includes(char)) return 'tone';
            if (wbSpecials.includes(char)) return 'special';
            return 'other';
        }
        
        // Get similar characters for distractors
        function getSimilarChars(char, count = 2) {
            const type = getCharType(char);
            let pool;
            switch(type) {
                case 'consonant': pool = wbConsonants; break;
                case 'vowel': pool = wbVowels; break;
                case 'tone': pool = wbToneMarks; break;
                case 'special': pool = wbSpecials; break;
                default: pool = wbConsonants.concat(wbVowels);
            }
            
            // Filter out the correct character
            pool = pool.filter(c => c !== char);
            
            // Shuffle and pick
            const shuffled = pool.sort(() => Math.random() - 0.5);
            return shuffled.slice(0, count);
        }
        
        function initWordBuilder() {
            wbState.level = 'beginner';
            document.getElementById('wordBuilderLevelSelect').style.display = 'block';
            document.getElementById('wordBuilderGameView').style.display = 'none';
            
            // Reset level selection highlighting
            document.querySelectorAll('.wordbuilder-level-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.level === 'beginner') {
                    card.classList.add('active');
                }
            });
        }
        
        function selectWordBuilderLevel(level, element) {
            wbState.level = level;
            document.querySelectorAll('.wordbuilder-level-card').forEach(card => {
                card.classList.remove('active');
            });
            if (element) element.classList.add('active');
        }
        
        function startWordBuilder() {
            // Get words for selected level
            const allWords = [...wbWordLists[wbState.level]];
            
            if (!allWords || allWords.length === 0) {
                console.error('No words found for level:', wbState.level);
                return;
            }
            
            // Shuffle and take 10 words
            wbState.words = allWords.sort(() => Math.random() - 0.5).slice(0, 10);
            wbState.currentWordIndex = 0;
            wbState.score = 0;
            wbState.total = wbState.words.length;
            wbState.isComplete = false;
            
            // Show game view
            document.getElementById('wordBuilderLevelSelect').style.display = 'none';
            document.getElementById('wordBuilderGameView').style.display = 'block';
            
            // Update level badge
            const levelNames = { beginner: ' Beginner', intermediate: ' Intermediate', advanced: ' Advanced' };
            document.getElementById('wbLevelBadge').textContent = levelNames[wbState.level];
            
            loadWordBuilderWord();
        }
        
        function loadWordBuilderWord() {
            if (wbState.currentWordIndex >= wbState.words.length) {
                showWordBuilderComplete();
                return;
            }
            
            wbState.currentWord = wbState.words[wbState.currentWordIndex];
            wbState.currentCharIndex = 0;
            wbState.builtWord = '';
            
            // Check toggle settings
            const showEnglish = document.getElementById('wbShowEnglish')?.checked ?? true;
            const showRoman = document.getElementById('wbShowRomanization')?.checked ?? true;
            
            // Update display
            document.getElementById('wbEnglish').textContent = wbState.currentWord.english;
            document.getElementById('wbEnglish').style.display = showEnglish ? 'block' : 'none';
            document.getElementById('wbRomanization').textContent = wbState.currentWord.roman;
            document.getElementById('wbRomanization').style.display = showRoman ? 'block' : 'none';
            document.getElementById('wbBuilt').textContent = '';
            document.getElementById('wbCorrect').textContent = wbState.score;
            document.getElementById('wbTotal').textContent = wbState.currentWordIndex + '/' + wbState.total;
            
            // Hide feedback and next button, show skip
            document.getElementById('wbFeedback').style.display = 'none';
            const nextBtn = document.getElementById('wbNextBtn');
            if (nextBtn) nextBtn.style.display = 'none';
            document.getElementById('wbSkipBtn').style.display = 'inline-block';
            
            showNextCharChoices();
        }
        
        function showNextCharChoices() {
            const word = wbState.currentWord.thai;
            const chars = [...word];
            
            if (wbState.currentCharIndex >= chars.length) {
                // Word complete!
                wordBuilderSuccess();
                return;
            }
            
            const correctChar = chars[wbState.currentCharIndex];
            
            // Different number of choices based on level: beginner=3, intermediate=5, advanced=7
            const distractorCounts = { beginner: 2, intermediate: 4, advanced: 6 };
            const numDistractors = distractorCounts[wbState.level] || 2;
            const distractors = getSimilarChars(correctChar, numDistractors);
            
            // Create choices array with correct answer and distractors
            let choices = [correctChar, ...distractors];
            choices = choices.sort(() => Math.random() - 0.5); // Shuffle
            
            // Update step info
            const stepNum = wbState.currentCharIndex + 1;
            const totalSteps = chars.length;
            document.getElementById('wbStepInfo').textContent = `Character ${stepNum} of ${totalSteps}:`;
            
            // Render choices
            const choicesContainer = document.getElementById('wbChoices');
            choicesContainer.innerHTML = '';
            
            choices.forEach(char => {
                const btn = document.createElement('button');
                btn.className = 'wordbuilder-choice';
                btn.textContent = char;
                btn.onclick = () => handleCharChoice(char, correctChar, btn);
                choicesContainer.appendChild(btn);
            });
        }
        
        function handleCharChoice(selected, correct, btnElement) {
            const allBtns = document.querySelectorAll('.wordbuilder-choice');
            
            if (selected === correct) {
                // Correct choice
                btnElement.classList.add('correct');
                allBtns.forEach(btn => btn.classList.add('disabled'));
                
                // Add character to built word
                wbState.builtWord += selected;
                wbState.currentCharIndex++;
                
                // Update display
                document.getElementById('wbBuilt').textContent = wbState.builtWord;
                
                // Short delay then show next character
                setTimeout(() => {
                    showNextCharChoices();
                }, 400);
            } else {
                // Wrong choice
                btnElement.classList.add('incorrect');
                
                // Show correct answer
                allBtns.forEach(btn => {
                    if (btn.textContent === correct) {
                        btn.classList.add('correct');
                    }
                    btn.classList.add('disabled');
                });
                
                // Word failed
                wordBuilderFail();
            }
        }
        
        function wordBuilderSuccess() {
            wbState.score++;
            document.getElementById('wbCorrect').textContent = wbState.score;
            
            // Award XP
            awardXP(XP_REWARDS.wordBuilderCorrect);
            
            // Show success feedback
            document.getElementById('wbFeedback').style.display = 'block';
            document.getElementById('wbFeedback').className = 'wordbuilder-feedback correct';
            document.getElementById('wbFeedbackIcon').textContent = '';
            document.getElementById('wbFeedbackText').textContent = 'Correct! ' + wbState.currentWord.thai;
            
            // Hide skip button, show tap hint
            document.getElementById('wbSkipBtn').style.display = 'none';
            var tapHint = document.getElementById('wbTapHint');
            if (tapHint) tapHint.style.display = 'block';
            
            // Enable click anywhere to advance
            document.getElementById('wordBuilderGameView').onclick = function(e) {
                if (e.target.classList.contains('wordbuilder-back-btn')) return;
                document.getElementById('wordBuilderGameView').onclick = null;
                nextWord();
            };
        }
        
        function wordBuilderFail() {
            // Show fail feedback
            document.getElementById('wbFeedback').style.display = 'block';
            document.getElementById('wbFeedback').className = 'wordbuilder-feedback incorrect';
            document.getElementById('wbFeedbackIcon').textContent = '';
            document.getElementById('wbFeedbackText').textContent = 'The word is: ' + wbState.currentWord.thai;
            
            // Show full word in built area
            document.getElementById('wbBuilt').textContent = wbState.currentWord.thai;
            document.getElementById('wbBuilt').style.color = 'var(--error-color)';
            
            // Hide skip button, show tap hint
            document.getElementById('wbSkipBtn').style.display = 'none';
            var tapHint = document.getElementById('wbTapHint');
            if (tapHint) tapHint.style.display = 'block';
            
            // Enable click anywhere to advance AFTER a delay to prevent immediate trigger
            setTimeout(() => {
                document.getElementById('wordBuilderGameView').onclick = function(e) {
                    if (e.target.classList.contains('wordbuilder-back-btn')) return;
                    document.getElementById('wordBuilderGameView').onclick = null;
                    nextWord();
                };
            }, 100);
        }
        
        function nextWord() {
            // Reset built word color
            document.getElementById('wbBuilt').style.color = '';
            
            // Hide tap hint
            var tapHint = document.getElementById('wbTapHint');
            if (tapHint) tapHint.style.display = 'none';
            
            wbState.currentWordIndex++;
            loadWordBuilderWord();
        }
        
        function nextWordBuilderWord() {
            nextWord();
        }
        
        function skipWord() {
            // Count as incorrect but move on
            wordBuilderFail();
        }
        
        function showWordBuilderComplete() {
            wbState.isComplete = true;
            
            // Hide the card and controls, show completion message
            const card = document.querySelector('#wordBuilderGameView .wordbuilder-card');
            const controls = document.querySelector('#wordBuilderGameView .wordbuilder-controls');
            const backBtn = document.querySelector('#wordBuilderGameView .wordbuilder-back-btn');
            const tapHint = document.getElementById('wbTapHint');
            
            if (card) card.style.display = 'none';
            if (controls) controls.style.display = 'none';
            if (backBtn) backBtn.style.display = 'none';
            if (tapHint) tapHint.style.display = 'none';
            
            // Create completion message
            let completionDiv = document.getElementById('wbCompletionDiv');
            if (!completionDiv) {
                completionDiv = document.createElement('div');
                completionDiv.id = 'wbCompletionDiv';
                completionDiv.className = 'wordbuilder-complete';
                document.getElementById('wordBuilderGameView').appendChild(completionDiv);
            }
            
            completionDiv.style.display = 'block';
            completionDiv.innerHTML = `
                <div class="wordbuilder-complete-icon">${wbState.score >= 7 ? '' : wbState.score >= 5 ? '' : ''}</div>
                <div class="wordbuilder-complete-title">Session Complete!</div>
                <div class="wordbuilder-complete-score">You scored ${wbState.score} out of ${wbState.total}</div>
                <button class="wordbuilder-btn-restart" onclick="backToWordBuilderLevels()">Practice Again</button>
            `;
        }
        
        function backToWordBuilderLevels() {
            // Hide completion, restore original elements
            const completionDiv = document.getElementById('wbCompletionDiv');
            if (completionDiv) completionDiv.style.display = 'none';
            
            const card = document.querySelector('#wordBuilderGameView .wordbuilder-card');
            const controls = document.querySelector('#wordBuilderGameView .wordbuilder-controls');
            const backBtn = document.querySelector('#wordBuilderGameView .wordbuilder-back-btn');
            
            if (card) card.style.display = 'block';
            if (controls) controls.style.display = 'block';
            if (backBtn) backBtn.style.display = 'block';
            
            // Hide game view, show level select
            document.getElementById('wordBuilderGameView').style.display = 'none';
            document.getElementById('wordBuilderLevelSelect').style.display = 'block';
        }
        
        // ============== READING PRACTICE ==============
        
        // Stories with spaced words for beginner/intermediate, natural text for advanced
        // Each sentence has: thai (display), spaced (word-separated), roman, english
        const readingStories = {
            beginner: [
                {
                    title: "My Day",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: " ", roman: "s-wt-dii krp", english: "Hello." },
                        { thai: "", spaced: "  ", roman: "pm chue sm-chaai", english: "My name is Somchai." },
                        { thai: "", spaced: "   ", roman: "wan-ni pm dtuen cho", english: "Today I woke up early." },
                        { thai: "", spaced: "   ", roman: "pm gin kao cho", english: "I had breakfast." },
                        { thai: "", spaced: "   ", roman: "lew pm bpai tam-ngaan", english: "Then I went to work." },
                        { thai: "", spaced: "    ", roman: "te tam-ngaan mii kon yh", english: "There were many people at work." },
                        { thai: "", spaced: "   ", roman: "pm tam-ngaan nk mak", english: "I worked very hard." },
                        { thai: "", spaced: "    ", roman: "dton-yen pm glp ban", english: "In the evening, I went home." },
                        { thai: "", spaced: "     ", roman: "pm gin kao yen gp krp-krua", english: "I had dinner with my family." },
                        { thai: "", spaced: "   ", roman: "lew pm gr non", english: "Then I went to sleep." }
                    ]
                },
                {
                    title: "At the Market",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "   ", roman: "wan-ni chn bpai dt-lat", english: "Today I went to the market." },
                        { thai: "", spaced: "  ", roman: "dt-lat yi mak", english: "The market is very big." },
                        { thai: "", spaced: "   ", roman: "mii pn-l-mai lai yang", english: "There are many kinds of fruit." },
                        { thai: "", spaced: "    ", roman: "chn sue m-mang ha luk", english: "I bought five mangoes." },
                        { thai: "", spaced: "  ", roman: "m-mang wan mak", english: "The mangoes are very sweet." },
                        { thai: "", spaced: "   ", roman: "chn sue pk day", english: "I also bought vegetables." },
                        { thai: "", spaced: "    ", roman: "pk st le raa-kaa tuk", english: "The vegetables are fresh and cheap." },
                        { thai: "", spaced: "     ", roman: "chn jai ngern lew glp ban", english: "I paid and went home." }
                    ]
                },
                {
                    title: "My Family",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "     ", roman: "krp-krua kng chn mii si kon", english: "There are four people in my family." },
                        { thai: "", spaced: "    ", roman: "pr kng chn bpen mr", english: "My father is a doctor." },
                        { thai: "", spaced: "    ", roman: "me kng chn bpen kruu", english: "My mother is a teacher." },
                        { thai: "", spaced: "    ", roman: "chn mii nng-sao neng kon", english: "I have one younger sister." },
                        { thai: "", spaced: "   ", roman: "nng-sao aa-y sp kap", english: "My sister is ten years old." },
                        { thai: "", spaced: "   ", roman: "ter chp wat rup", english: "She likes to draw." },
                        { thai: "", spaced: "       ", roman: "rao yu day gan yang mii kwaam-sk", english: "We live together happily." }
                    ]
                },
                {
                    title: "My Pet Dog",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "    ", roman: "chn mii s-nk neng dtua", english: "I have one dog." },
                        { thai: "", spaced: "    ", roman: "s-nk kng chn chue chok", english: "My dog's name is Chok." },
                        { thai: "", spaced: "    ", roman: "chok bpen s-nk si nm-dtaan", english: "Chok is a brown dog." },
                        { thai: "", spaced: "   ", roman: "ko chp wng ln", english: "He likes to run and play." },
                        { thai: "", spaced: "       ", roman: "tk cho chn paa chok bpai dern ln", english: "Every morning I take Chok for a walk." },
                        { thai: "", spaced: "     ", roman: "chok chp gin kao gp nea", english: "Chok likes to eat rice with meat." },
                        { thai: "", spaced: "     ", roman: "dton glaang-keun chok non nai ban", english: "At night Chok sleeps inside the house." },
                        { thai: "", spaced: "   ", roman: "chn rk chok mak", english: "I love Chok very much." }
                    ]
                },
                {
                    title: "At School",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "  ", roman: "chn bpen nk-rian", english: "I am a student." },
                        { thai: "", spaced: "    ", roman: "chn bpai roong-rian tk wan", english: "I go to school every day." },
                        { thai: "", spaced: "     ", roman: "roong-rian rrm dton bpet moong cho", english: "School starts at eight in the morning." },
                        { thai: "", spaced: "    ", roman: "kruu kng chn jai-dii mak", english: "My teacher is very kind." },
                        { thai: "", spaced: "    ", roman: "chn chp rian paa-sa tai", english: "I like learning Thai." },
                        { thai: "", spaced: "   ", roman: "w-chaa k-nt-dt-sat yak nt-ni", english: "Math is a little difficult." },
                        { thai: "", spaced: "      ", roman: "pk glaang-wan chn gin kao gp pean", english: "At lunch break I eat with friends." },
                        { thai: "", spaced: "     ", roman: "roong-rian lrk dton bai si moong", english: "School ends at four in the afternoon." },
                        { thai: "", spaced: "    ", roman: "chn mii gaan-ban tk wan", english: "I have homework every day." }
                    ]
                }
            ],
            intermediate: [
                {
                    title: "A Trip to Chiang Mai",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "      ", roman: "mea deuan te lew pm bpai chiang-mi", english: "Last month I went to Chiang Mai." },
                        { thai: "", spaced: "    ", roman: "pm nng kreang-bin jak grung-typ", english: "I flew from Bangkok." },
                        { thai: "", spaced: "    ", roman: "chi way-laa bpr-maan neng cha-moong", english: "It took about one hour." },
                        { thai: "", spaced: "      ", roman: "aa-gat te chiang-mi yen gwa grung-typ mak", english: "The weather in Chiang Mai is much cooler than Bangkok." },
                        { thai: "", spaced: "     ", roman: "pm bpai tao wt pr-tat doi-s-typ", english: "I visited Wat Phra That Doi Suthep." },
                        { thai: "", spaced: "    ", roman: "wt yu bon puu-ko sung", english: "The temple is on a high mountain." },
                        { thai: "", spaced: "       ", roman: "dtng dern ken ban-dai sam ri gwa kn", english: "You have to climb over 300 steps." },
                        { thai: "", spaced: "     ", roman: "wiw jak bon wt say mak", english: "The view from the temple is beautiful." },
                        { thai: "", spaced: "        ", roman: "pm yang dai bpai dern t-nn kon dern day", english: "I also went to the walking street." },
                        { thai: "", spaced: "       ", roman: "mii aa-han le kng te r-lek yh mak", english: "There was lots of food and souvenirs." },
                        { thai: "", spaced: "     ", roman: "gaan dern-taang krng ni s-nk mak", english: "This trip was really fun." }
                    ]
                },
                {
                    title: "Learning Thai",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "         ", roman: "pm rrm rian paa-sa tai mea hk deuan te lew", english: "I started learning Thai six months ago." },
                        { thai: "", spaced: "        ", roman: "dton rek yak mak prr mii ha sang wan-n-yk", english: "At first it was very hard because there are five tones." },
                        { thai: "", spaced: "     ", roman: "pm dtng fek put tk wan", english: "I have to practice speaking every day." },
                        { thai: "", spaced: "      ", roman: "pm duu l-kon tai pea fek fang", english: "I watch Thai dramas to practice listening." },
                        { thai: "", spaced: "       ", roman: "gaan an paa-sa tai gr yak mean gan", english: "Reading Thai is also difficult." },
                        { thai: "", spaced: "       ", roman: "dtua k-sn tai mii si-sp-si dtua", english: "The Thai alphabet has 44 letters." },
                        { thai: "", spaced: "        ", roman: "dte dton-ni pm an dai dii ken lew", english: "But now I can read much better." },
                        { thai: "", spaced: "     ", roman: "pm chp kui gp kon tai", english: "I like chatting with Thai people." },
                        { thai: "", spaced: "       ", roman: "pak-ko jai-dii le chay ge-ki hi pm", english: "They're kind and help correct my mistakes." },
                        { thai: "", spaced: "         ", roman: "pm wng wa bpii na j put tai dai klng", english: "I hope to speak Thai fluently by next year." }
                    ]
                },
                {
                    title: "Thai Food Adventure",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "           ", roman: "aa-han tai bpen neng nai aa-han te mii chue-sang te-st nai lok", english: "Thai food is one of the most famous cuisines in the world." },
                        { thai: "", spaced: "     ", roman: "pm chp gin pt-tai mak te-st", english: "I like eating Pad Thai the most." },
                        { thai: "", spaced: "        ", roman: "pt-tai mii sn gay-dtao pt gp ki le gng", english: "Pad Thai has rice noodles stir-fried with egg and shrimp." },
                        { thai: "", spaced: "     ", roman: "dtm-yam-gng gr -ri mak chn gan", english: "Tom Yum Goong is also very delicious." },
                        { thai: "", spaced: "        ", roman: "bpen sp rt pt bprao te mii gng st", english: "It's a spicy and sour soup with fresh shrimp." },
                        { thai: "", spaced: "       ", roman: "sm-dtam bpen aa-han ii-san te n-yom ta bpr-tyt", english: "Som Tam is an Isaan dish popular throughout the country." },
                        { thai: "", spaced: "        ", roman: "tam jak m-l-gor dp dtam gp prk le nm-bplaa", english: "It's made from raw papaya pounded with chili and fish sauce." },
                        { thai: "", spaced: "         ", roman: "ta kun maa meuang-tai dtng long gin aa-han rim taang", english: "If you come to Thailand, you must try street food." },
                        { thai: "", spaced: "      ", roman: "aa-han rim taang -ri le raa-kaa tuk", english: "Street food is delicious and cheap." }
                    ]
                },
                {
                    title: "Weekend at the Beach",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "        ", roman: "wan-yt st-sp-daa te lew krp-krua kng chn bpai t-lay", english: "Last weekend my family went to the beach." },
                        { thai: "", spaced: "         ", roman: "rao kp rt bpai ha-hn chi way-laa bpr-maan sam cha-moong", english: "We drove to Hua Hin which took about three hours." },
                        { thai: "", spaced: "        ", roman: "t-lay say mak nam si le hat saai kao", english: "The sea was beautiful with clear water and white sand." },
                        { thai: "", spaced: "       ", roman: "luk-luk chp ln nam le gr bpraa-sat saai", english: "The kids loved playing in the water and building sandcastles." },
                        { thai: "", spaced: "         ", roman: "dton tang rao gin aa-han t-lay te ran rim hat", english: "At noon we ate seafood at a restaurant by the beach." },
                        { thai: "", spaced: "      ", roman: "gng yang le bplaa tt -ri mak", english: "The grilled shrimp and fried fish were delicious." },
                        { thai: "", spaced: "       ", roman: "dton yen rao dern ln duu pr-aa-tt dtk", english: "In the evening we took a walk and watched the sunset." },
                        { thai: "", spaced: "       ", roman: "rao pk te roong-raem gli t-lay keun neng", english: "We stayed at a hotel near the beach for one night." },
                        { thai: "", spaced: "        ", roman: "wan-yt krng ni bpen kwaam song-jam te dii mak", english: "This vacation was a wonderful memory." }
                    ]
                },
                {
                    title: "Visiting the Doctor",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", spaced: "         ", roman: "mea-waan-ni chn ru-sek mi s-baai dtng bpai ha mr", english: "Yesterday I didn't feel well and had to see a doctor." },
                        { thai: "", spaced: "       ", roman: "chn mii aa-gaan bpat ha le jp kor", english: "I had a headache and sore throat." },
                        { thai: "", spaced: "        ", roman: "te roong-p-yaa-baan dtng ror pp mr bpr-maan kreng cha-moong", english: "At the hospital I had to wait about half an hour to see the doctor." },
                        { thai: "", spaced: "       ", roman: "mr dtrat rang-gaai le tam aa-gaan kng chn", english: "The doctor examined me and asked about my symptoms." },
                        { thai: "", spaced: "      ", roman: "mr bk wa chn bpen ki-wt tam-m-daa", english: "The doctor said I have a common cold." },
                        { thai: "", spaced: "        ", roman: "mr sng yaa hi gin wan l sam krng", english: "The doctor prescribed medicine to take three times a day." },
                        { thai: "", spaced: "      ", roman: "chn dtng pk-pn le dem nam mak-mak", english: "I need to rest and drink lots of water." },
                        { thai: "", spaced: "     ", roman: "ka rk-sa p-yaa-baan mi paeng to-ri", english: "The medical fees weren't too expensive." },
                        { thai: "", spaced: "      ", roman: "wan-ni chn ru-sek dii ken mak lew", english: "Today I feel much better already." }
                    ]
                }
            ],
            advanced: [
                {
                    title: "Thai Economy and Tourism",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", roman: "bpr-tyt tai mii syt-t-gt yi bpen an-dp sng nai ay-sia dt-wan-k chang-dti", english: "Thailand has the second largest economy in Southeast Asia." },
                        { thai: "", roman: "gaan tng-tao bpen leng raai-dai sm-kan kng bpr-tyt", english: "Tourism is a major source of income for the country." },
                        { thai: "", roman: "tk bpii mii nk tng-tao dtang chat mak gwa sam-sp-ha lan kon", english: "Over 35 million foreign tourists visit each year." },
                        { thai: "   ", roman: "grung-typ puu-gt le chiang-mi bpen jt-mai yt-n-yom", english: "Bangkok, Phuket, and Chiang Mai are the most popular destinations." },
                        { thai: "", roman: "t-sa-h-gam gaan tng-tao sang ngaan hi kon tai lai lan kon", english: "The tourism industry creates jobs for millions of Thais." },
                        { thai: "", roman: "roong-raem le ran aa-han dai rp bpr-yot mak te-st", english: "Hotels and restaurants benefit the most." },
                        { thai: "", roman: "nk-jak gaan tng-tao lew tai yang mii t-sa-h-gam gaan p-lt te keng-graeng", english: "Besides tourism, Thailand also has a strong manufacturing sector." },
                        { thai: "", roman: "bpr-tyt tai bpen pu sng-k rt-yon raai yi kng lok", english: "Thailand is a major automobile exporter in the world." },
                        { thai: "", roman: "t-sa-h-gam -lk-tr-nk gr mii kwaam sm-kan chn gan", english: "The electronics industry is also important." },
                        { thai: "", roman: "gaan g-syt yang kong bpen aa-chip lk kng kon chon-n-bt", english: "Agriculture remains the main occupation in rural areas." },
                        { thai: "", roman: "kao tai mii chue-sang bpai ta lok", english: "Thai rice is famous worldwide." },
                        { thai: "", roman: "rt-t-baan gam-lang sng-srm syt-t-gt di-ji-tl", english: "The government is promoting the digital economy." },
                        { thai: "", roman: "gaan pt-t-naa yang yng-yeun bpen bpo-mai sm-kan sm-rp -naa-kt", english: "Sustainable development is an important goal for the future." }
                    ]
                },
                {
                    title: "Thai Culture and Traditions",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", roman: "wt-t-n-tam tai bpen gaan p-sm-p-san r-wang t-t-pon lai yang", english: "Thai culture is a blend of many influences." },
                        { thai: "", roman: "pt-t-sat-s-na bpen rak-tan sm-kan kng wt-t-n-tam tai", english: "Buddhism is the important foundation of Thai culture." },
                        { thai: "", roman: "sng-kom tai gam-lang p-chern gp kwaam ta-taai nai gaan rk-sa bpr-pay-nii dng-derm", english: "Thai society faces challenges in preserving traditional customs." },
                        { thai: "", roman: "kon rn mi rp t-t-pon jak wt-t-n-tam dt-wan-dtk mak ken", english: "Younger generations are increasingly influenced by Western culture." },
                        { thai: "", roman: "dte tyt-s-gaan sm-kan chn sng-graan yang kong dai rp kwaam n-yom", english: "But important festivals like Songkran remain popular." },
                        { thai: "", roman: "sng-graan bpen tyt-s-gaan bpii mi tai nai deuan may-sa-yon", english: "Songkran is the Thai New Year festival held in April." },
                        { thai: "", roman: "pu-kon sat nam si gan pea bpen sn-y-lk kng gaan cham-r-lang", english: "People splash water on each other as a symbol of cleansing." },
                        { thai: "", roman: "loi gr-tong bpen tyt-s-gaan te jt nai deuan pret-s-ji-gaa-yon", english: "Loy Krathong is a festival held in November." },
                        { thai: "", roman: "pu-kon loi gr-tong nai me-nam pea kr k-maa pr-me kong-kaa", english: "People float krathongs in rivers to pay respects to the water goddess." },
                        { thai: "", roman: "sat-s-na pt mii bt-bat sm-kan nai chii-wt bpr-jam-wan", english: "Buddhism plays an important role in daily life." },
                        { thai: "", roman: "chaai tai lai kon bat bpen pr yang ni neng krng nai chii-wt", english: "Many Thai men ordain as monks at least once in their lives." },
                        { thai: "", roman: "gaan kao-rp pu aa-w-so bpen ka-n-yom te fng rak lek nai sng-kom tai", english: "Respect for elders is a deeply rooted value in Thai society." },
                        { thai: "", roman: "gaan wi bpen gaan tk-taai bep dng-derm te yang chi gan yu", english: "The wai is a traditional greeting still commonly used." }
                    ]
                },
                {
                    title: "Climate Change and Thailand",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", roman: "gaan bplan-bplaeng s-pap puu-m-aa-gat bpen bpan-ha r-dp lok te gr-tp tk bpr-tyt", english: "Climate change is a global problem that affects every country." },
                        { thai: "", roman: "bpr-tyt tai gam-lang p-chern gp pn gr-tp jak gaan bplan-bplaeng s-pap puu-m-aa-gat", english: "Thailand is facing the impacts of climate change." },
                        { thai: "", roman: "un-h-puum ch-la prm ken tk bpii", english: "The average temperature increases every year." },
                        { thai: "", roman: "r-dp nam t-lay te sung ken kk-kaam pen-te chaai-fng lai heng", english: "Rising sea levels threaten many coastal areas." },
                        { thai: "", roman: "grung-typ at p-chern bpan-ha nam tam run-raeng nai -naa-kt", english: "Bangkok may face severe flooding problems in the future." },
                        { thai: "", roman: "pai leng le nam tam grt ken bi le run-raeng mak ken", english: "Droughts and floods occur more frequently and severely." },
                        { thai: "", roman: "g-syt-dt-gon dtng bprp dtua gp s-pap aa-gat te mi ne-non", english: "Farmers must adapt to unpredictable weather conditions." },
                        { thai: "", roman: "pn-p-lt kao dai rp pn gr-tp jak pai leng", english: "Rice production is affected by drought." },
                        { thai: "", roman: "rt-t-baan gam-nt bpo-mai lt gaan bpli gat reuan gr-jk", english: "The government has set targets to reduce greenhouse gas emissions." },
                        { thai: "", roman: "p-lang-ngaan mn wian gam-lang dai rp gaan sng-srm mak ken", english: "Renewable energy is being increasingly promoted." },
                        { thai: "", roman: "p-lang-ngaan seng aa-tt le p-lang-ngaan lom mii sk-g-y-pap sung", english: "Solar and wind energy have high potential." },
                        { thai: "", roman: "gaan ge bpan-ha ni dtng aa-si kwaam ram-meu jak tk pak san", english: "Solving this problem requires cooperation from all sectors." }
                    ]
                },
                {
                    title: "Thai Education System",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", roman: "gaan sk-sa bpen rak-tan sm-kan kng gaan pt-t-naa bpr-tyt", english: "Education is the important foundation of national development." },
                        { thai: "", roman: "r-bp gaan-sk-sa kng tai beng k bpen lai r-dp dtng-dte -n-baan jon teng -dom-sk-sa", english: "Thailand's education system is divided into several levels from kindergarten to higher education." },
                        { thai: "", roman: "dk tai dtng rian pak bang-kp sp-sawng bpii", english: "Thai children must attend twelve years of compulsory education." },
                        { thai: "", roman: "nk-rian tai dtng sp ko m-ha-wt-t-yaa-lai seng mii gaan keng-kn sung", english: "Thai students must take university entrance exams which are highly competitive." },
                        { thai: "", roman: "gaan sp mii kwaam gt-dan sung sm-rp nk-rian le pu bpk-krong", english: "Exams are highly stressful for students and parents." },
                        { thai: "", roman: "roong-rian gat-w-chaa bpen t-r-gt k-nat yi nai bpr-tyt tai", english: "Tutoring schools are a big business in Thailand." },
                        { thai: "", roman: "roong-rian naa-naa-chat gam-lang bpen te n-yom mak ken nai glm krp-krua ta-n dii", english: "International schools are becoming more popular among affluent families." },
                        { thai: "", roman: "ka lo-rian nai roong-rian naa-naa-chat sung mak", english: "Tuition fees at international schools are very high." },
                        { thai: "", roman: "kwaam leam-lm taang gaan-sk-sa r-wang meuang le chon-n-bt yang kong bpen bpan-ha sm-kan", english: "Educational inequality between urban and rural areas remains a significant problem." },
                        { thai: "", roman: "roong-rian nai chon-n-bt mk kat-klaen -bp-gon le kruu te mii kun-n-pap", english: "Rural schools often lack equipment and quality teachers." },
                        { thai: "", roman: "rt-t-baan gam-lang p-yaa-yaam bp-dt-rup r-bp gaan-sk-sa", english: "The government is trying to reform the education system." },
                        { thai: "", roman: "m-ha-wt-t-yaa-lai chn-nam kng tai mii chue-sang nai r-dp puu-m-pak", english: "Thailand's leading universities have regional recognition." }
                    ]
                },
                {
                    title: "Thai History and Monarchy",
                    titleThai: "",
                    icon: "",
                    sentences: [
                        { thai: "", roman: "bpr-wt-dt-sat tai mii kwaam yaao-naan lai pan bpii", english: "Thai history spans thousands of years." },
                        { thai: "", roman: "bpr-tyt tai bpen bpr-tyt diao nai ay-sia dt-wan-k chang-dti te mi koei dtk bpen aa-naa-n-kom", english: "Thailand is the only Southeast Asian country that was never colonized." },
                        { thai: "", roman: "kam wa tai bplae wa sy-rii rue t-s-r", english: "The word 'Thai' means free or independent." },
                        { thai: "", roman: "chue derm kng bpr-tyt keu s-yam", english: "The country's former name was Siam." },
                        { thai: " 13", roman: "s-ko-tai bpen aa-naa-jk tai heng rek te gr-dtng ken nai s-dt-wt te sp-sam", english: "Sukhothai was the first Thai kingdom established in the 13th century." },
                        { thai: "", roman: "pr-kn raam-kam-heng song bpr-dt k-sn tai", english: "King Ramkhamhaeng invented the Thai alphabet." },
                        { thai: "", roman: "grung-si--yt-t-yaa bpen meuang lang kng tai naan gwa si-ri bpii", english: "Ayutthaya was Thailand's capital for over 400 years." },
                        { thai: "", roman: "-yt-t-yaa bpen sun-glaang gaan-ka te sm-kan nai ay-sia dt-wan-k chang-dti", english: "Ayutthaya was an important trading center in Southeast Asia." },
                        { thai: " .. 2310", roman: "p-ma tam-laai grung-si--yt-t-yaa nai bpii por-sor sawng-pan-sam-ri-sp", english: "Burma destroyed Ayutthaya in 1767." },
                        { thai: " 2325", roman: "rat-ch-wong jk-grii bpk-krong bpr-tyt tai maa dtng-dte pt-t-sk-g-rat sawng-pan-sam-ri-yi-sp-ha", english: "The Chakri dynasty has ruled Thailand since 1782." },
                        { thai: " 1", roman: "grung-typ glaai bpen meuang lang mi nai s-mi rt-ch-gaan te neng", english: "Bangkok became the new capital during the reign of King Rama I." },
                        { thai: "", roman: "s-ta-ban pr-m-ha-g-st yang kong mii bt-bat sm-kan nai sng-kom tai bpt-j-ban", english: "The monarchy continues to play an important role in modern Thai society." }
                    ]
                }
            ]
        };
        
        let currentReadingLevel = 'beginner';
        let currentStory = null;
        let activeSentenceIndex = null;
        
        // Reading progress tracking
        let readingProgress = JSON.parse(localStorage.getItem('thaiReadingProgress')) || {};
        
        function getStoryKey(level, index) {
            return `${level}_${index}`;
        }
        
        function isStoryComplete(level, index) {
            return !!readingProgress[getStoryKey(level, index)];
        }
        
        function markStoryComplete(level, index) {
            readingProgress[getStoryKey(level, index)] = true;
            localStorage.setItem('thaiReadingProgress', JSON.stringify(readingProgress));
        }
        
        function initReadingPractice() {
            showStoryList();
        }
        
        function selectReadingLevel(level, element) {
            currentReadingLevel = level;
            
            // Update active state
            document.querySelectorAll('.reading-level-card').forEach(card => {
                card.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }
            
            showStoryList();
        }
        
        function showStoryList() {
            const stories = readingStories[currentReadingLevel];
            const container = document.getElementById('readingStoryList');
            
            // Sort stories: incomplete first, completed last
            const sortedStories = stories.map((story, i) => ({ story, index: i, completed: isStoryComplete(currentReadingLevel, i) }));
            sortedStories.sort((a, b) => {
                if (a.completed === b.completed) return a.index - b.index;
                return a.completed ? 1 : -1;
            });
            
            container.innerHTML = sortedStories.map(({ story, index, completed }) => `
                <div class="reading-story-card ${completed ? 'completed' : ''}" onclick="openStory(${index})">
                    <div class="reading-story-icon">${story.icon}</div>
                    <div class="reading-story-info">
                        <div class="reading-story-title">${story.titleThai}</div>
                        <div class="reading-story-subtitle">${story.title}</div>
                        ${completed ? '<div class="reading-story-status"> Complete</div>' : ''}
                    </div>
                    <div class="reading-story-arrow"></div>
                </div>
            `).join('');
            
            document.getElementById('readingLevelSelect').style.display = 'block';
            document.getElementById('readingStoryView').style.display = 'none';
        }
        
        // Track current story index for completion marking
        let currentStoryIndex = null;
        
        function openStory(index) {
            currentStoryIndex = index;
            currentStory = readingStories[currentReadingLevel][index];
            activeSentenceIndex = null;
            
            // Set titles
            document.getElementById('storyTitleThai').textContent = currentStory.titleThai;
            document.getElementById('storyTitleEnglish').textContent = currentStory.title;
            
            // Build story text
            renderStoryText();
            
            // Hide translation box
            document.getElementById('readingTranslationBox').classList.remove('show');
            
            // Reset reveal button
            document.getElementById('readingFullTranslation').style.display = 'none';
            document.getElementById('revealStoryBtn').textContent = ' Reveal Full Translation';
            document.getElementById('revealStoryBtn').classList.remove('active');
            
            // Show/hide mark complete button
            const markCompleteBtn = document.getElementById('markStoryCompleteBtn');
            if (markCompleteBtn) {
                markCompleteBtn.style.display = isStoryComplete(currentReadingLevel, currentStoryIndex) ? 'none' : 'inline-block';
            }
            
            document.getElementById('readingLevelSelect').style.display = 'none';
            document.getElementById('readingStoryView').style.display = 'block';
        }
        
        function renderStoryText() {
            const storyText = document.getElementById('readingStoryText');
            const useSpacing = currentReadingLevel !== 'advanced';
            const showRoman = document.getElementById('showInlineRoman')?.checked || false;
            
            if (showRoman) {
                storyText.classList.add('with-romanization');
                storyText.innerHTML = currentStory.sentences.map((s, i) => {
                    const displayText = useSpacing ? (s.spaced || s.thai) : s.thai;
                    // Show romanization above each sentence as a block
                    return `<span class="reading-sentence-block" data-index="${i}" onclick="showSentenceTranslation(${i})">
                        <span class="reading-roman-line">${s.roman}</span>
                        <span class="reading-sentence">${displayText}</span>
                    </span>`;
                }).join(' ');
            } else {
                storyText.classList.remove('with-romanization');
                storyText.innerHTML = currentStory.sentences.map((s, i) => {
                    const displayText = useSpacing ? s.spaced : s.thai;
                    return `<span class="reading-sentence" data-index="${i}" onclick="showSentenceTranslation(${i})">${displayText || s.thai}</span>`;
                }).join(' ');
            }
        }
        
        function toggleInlineRomanization() {
            renderStoryText();
        }
        
        function markCurrentStoryComplete() {
            if (currentStoryIndex !== null) {
                markStoryComplete(currentReadingLevel, currentStoryIndex);
                
                // Award XP
                const xpKey = 'readingStory' + currentReadingLevel.charAt(0).toUpperCase() + currentReadingLevel.slice(1);
                awardXP(XP_REWARDS[xpKey], 'Story Complete!');
                
                showToast('Story marked complete!', 'success');
                
                // Hide the button
                const btn = document.getElementById('markStoryCompleteBtn');
                if (btn) btn.style.display = 'none';
            }
        }
        
        function showSentenceTranslation(index) {
            const sentence = currentStory.sentences[index];
            
            // Update active state
            document.querySelectorAll('.reading-sentence').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelector(`.reading-sentence[data-index="${index}"]`).classList.add('active');
            
            // Show translation box
            document.getElementById('transBoxThai').textContent = sentence.thai;
            document.getElementById('transBoxRoman').textContent = sentence.roman;
            document.getElementById('transBoxEnglish').textContent = sentence.english;
            document.getElementById('readingTranslationBox').classList.add('show');
            
            activeSentenceIndex = index;
        }
        
        function backToStoryList() {
            // Refresh the story list (will show any newly completed stories)
            showStoryList();
        }
        
        function toggleRevealStory() {
            const translationDiv = document.getElementById('readingFullTranslation');
            const btn = document.getElementById('revealStoryBtn');
            const isShowing = translationDiv.style.display !== 'none';
            
            if (isShowing) {
                translationDiv.style.display = 'none';
                btn.textContent = ' Reveal Full Translation';
                btn.classList.remove('active');
            } else {
                // Build full translation
                const fullText = currentStory.sentences.map(s => s.english).join(' ');
                document.getElementById('fullTranslationText').textContent = fullText;
                translationDiv.style.display = 'block';
                btn.textContent = ' Hide Translation';
                btn.classList.add('active');
            }
        }


        function init() {
            loadTheme();
            initOptionsPanel();
            initXPSystem(); // Initialize XP and streak system
            // Always show main menu on load
            document.getElementById('mainMenu').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('grammarSection').style.display = 'none';
            document.getElementById('alphabetSection').style.display = 'none';
            document.getElementById('backToMenu').style.display = 'none';
            document.getElementById('mainMenuSettingsBtn').style.display = 'flex';
            document.getElementById('writingSection').style.display = 'none';
            document.getElementById('readingSection').style.display = 'none';
        }
        
        function loadTheme() {
            // Always use light mode
            document.documentElement.removeAttribute('data-theme');
        }
        
        function toggleTheme() {
            // Theme toggle removed
        }
        
        function switchViewMode(newMode) {
            if (newMode === viewMode) return;
            
            viewMode = newMode;
            localStorage.setItem('thaiFlashcardsViewMode', viewMode);
            
            // Update button states
            document.querySelectorAll('.option-toggle-btn[data-view]').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === viewMode);
            });
            
            // Show/hide mixed list size option
            document.getElementById('mixedListSizeGroup').style.display = viewMode === 'mixed' ? 'block' : 'none';
            
            // Update vocabulary lists
            vocabularyLists = getActiveVocabularyLists();
            
            // Reset to first list of new view
            currentListIndex = 0;
            vocabulary = vocabularyLists[currentListIndex].words;
            
            // Update UI
            updateListSelector();
            initializeCards();
            updateCard();
            
            showToast(viewMode === 'themed' ? 'Switched to Themed Lists' : 'Switched to Mixed Lists');
        }
        
        function reshuffleMixedLists() {
            const sizeInput = document.getElementById('mixedListSizeInput');
            let newSize = parseInt(sizeInput.value);
            
            // Validate input
            if (isNaN(newSize) || newSize < 10) {
                newSize = 10;
                sizeInput.value = 10;
            } else if (newSize > 500) {
                newSize = 500;
                sizeInput.value = 500;
            }
            
            // Save the new size
            mixedListSize = newSize;
            localStorage.setItem('thaiFlashcardsMixedListSize', mixedListSize);
            
            // Regenerate mixed lists
            mixedLists = generateMixedLists(mixedListSize);
            
            // If currently in mixed mode, update the view
            if (viewMode === 'mixed') {
                vocabularyLists = getActiveVocabularyLists();
                currentListIndex = 0;
                vocabulary = vocabularyLists[currentListIndex].words;
                updateListSelector();
                initializeCards();
                updateCard();
            }
            
            const numLists = mixedLists.length;
            showToast(`Reshuffled into ${numLists} list${numLists > 1 ? 's' : ''} of ~${mixedListSize} cards`);
        }
        
        function initOptionsPanel() {
            // Initialize romanization toggle
            romanizationToggle.checked = showRomanization;
            romanizationToggle.addEventListener('change', () => {
                showRomanization = romanizationToggle.checked;
                localStorage.setItem('thaiFlashcardsRomanization', showRomanization);
                updateCard();
                showToast(showRomanization ? 'Romanization enabled' : 'Romanization disabled');
            });
            
            // Initialize auto-play toggle
            const autoPlayToggle = document.getElementById('autoPlayToggle');
            autoPlayToggle.checked = autoPlayAudio;
            autoPlayToggle.addEventListener('change', () => {
                autoPlayAudio = autoPlayToggle.checked;
                localStorage.setItem('thaiFlashcardsAutoPlay', autoPlayAudio);
                showToast(autoPlayAudio ? 'Auto-play enabled' : 'Auto-play disabled');
            });
            
            // Initialize view mode buttons
            document.querySelectorAll('.option-toggle-btn[data-view]').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === viewMode);
                btn.addEventListener('click', () => switchViewMode(btn.dataset.view));
            });
            
            // Initialize mixed list size controls
            const mixedListSizeGroup = document.getElementById('mixedListSizeGroup');
            const mixedListSizeInput = document.getElementById('mixedListSizeInput');
            const reshuffleMixedBtn = document.getElementById('reshuffleMixedBtn');
            
            mixedListSizeGroup.style.display = viewMode === 'mixed' ? 'block' : 'none';
            mixedListSizeInput.value = mixedListSize;
            
            reshuffleMixedBtn.addEventListener('click', reshuffleMixedLists);
            
            // Allow Enter key to trigger reshuffle
            mixedListSizeInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    reshuffleMixedLists();
                }
            });
            
            // Initialize card direction buttons
            document.querySelectorAll('.option-toggle-btn[data-direction]').forEach(btn => {
                btn.classList.toggle('active', 
                    (btn.dataset.direction === 'thai' && showThaiFront) ||
                    (btn.dataset.direction === 'english' && !showThaiFront)
                );
                btn.addEventListener('click', () => {
                    const newDirection = btn.dataset.direction === 'thai';
                    if (newDirection !== showThaiFront) {
                        showThaiFront = newDirection;
                        localStorage.setItem('thaiFlashcardsThaiFront', showThaiFront);
                        document.querySelectorAll('.option-toggle-btn[data-direction]').forEach(b => {
                            b.classList.toggle('active', 
                                (b.dataset.direction === 'thai' && showThaiFront) ||
                                (b.dataset.direction === 'english' && !showThaiFront)
                            );
                        });
                        updateCard();
                        showToast(showThaiFront ? 'Thai  English' : 'English  Thai');
                    }
                });
            });
            
            // Options modal open/close
            optionsBtn.addEventListener('click', () => optionsModal.classList.add('open'));
            document.getElementById('closeOptions').addEventListener('click', () => optionsModal.classList.remove('open'));
            optionsModal.addEventListener('click', (e) => {
                if (e.target === optionsModal) optionsModal.classList.remove('open');
            });
            
            // Vocab list modal
            var vocabListModal = document.getElementById('vocabListModal');
            document.getElementById('viewVocabListBtn').addEventListener('click', () => {
                optionsModal.classList.remove('open');
                showVocabList();
            });
            document.getElementById('closeVocabList').addEventListener('click', () => vocabListModal.classList.remove('open'));
            vocabListModal.addEventListener('click', (e) => {
                if (e.target === vocabListModal) vocabListModal.classList.remove('open');
            });
            document.getElementById('vocabListFilter').addEventListener('change', showVocabList);
            
            // Stats button
            document.getElementById('viewStatsBtn').addEventListener('click', () => {
                optionsModal.classList.remove('open');
                statsModal.classList.add('open');
                updateStatsModal();
            });
            
            // Import/Export button (opens settings modal)
            document.getElementById('importExportBtn').addEventListener('click', () => {
                optionsModal.classList.remove('open');
                settingsModal.classList.add('open');
            });
            
            // Restore Defaults button
            var resetConfirmModal = document.getElementById('resetConfirmModal');
            document.getElementById('restoreDefaultsBtn').addEventListener('click', function() {
                optionsModal.classList.remove('open');
                resetConfirmModal.classList.add('open');
            });
            document.getElementById('cancelResetBtn').addEventListener('click', function() {
                resetConfirmModal.classList.remove('open');
            });
            document.getElementById('confirmResetBtn').addEventListener('click', function() {
                resetConfirmModal.classList.remove('open');
                restoreDefaultSettings();
            });
            resetConfirmModal.addEventListener('click', function(e) {
                if (e.target === resetConfirmModal) resetConfirmModal.classList.remove('open');
            });
        }
        
        function restoreDefaultSettings() {
            // Clear ALL localStorage data for this app
            localStorage.removeItem('thaiFlashcardsProgress');
            localStorage.removeItem('thaiFlashcardsSession');
            localStorage.removeItem('thaiFlashcardsViewMode');
            localStorage.removeItem('thaiFlashcardsThaiFront');
            localStorage.removeItem('thaiFlashcardsRomanization');
            localStorage.removeItem('thaiFlashcardsAutoPlay');
            localStorage.removeItem('thaiFlashcardsTheme');
            localStorage.removeItem('thaiFlashcardsMixedListSize');
            localStorage.removeItem('thaiFlashcardsVisited');
            
            // Reset all variables to defaults
            viewMode = 'mixed';
            showThaiFront = true;
            showRomanization = true;
            autoPlayAudio = false;
            mixedListSize = 200;
            cardStats = { global: {} };
            sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
            sessionState = { cardOrder: [], currentIndex: 0, listIndex: 0, mode: 'all', inProgress: false };
            favorites = new Set();
            currentMode = 'all';
            currentListIndex = 0;
            
            // Update UI elements
            // View mode buttons
            document.querySelectorAll('.option-toggle-btn[data-view]').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.view === viewMode);
            });
            document.getElementById('mixedListSizeGroup').style.display = viewMode === 'mixed' ? 'block' : 'none';
            document.getElementById('mixedListSizeInput').value = mixedListSize;
            
            // Card direction buttons
            document.querySelectorAll('.option-toggle-btn[data-direction]').forEach(btn => {
                btn.classList.toggle('active', 
                    (btn.dataset.direction === 'thai' && showThaiFront) ||
                    (btn.dataset.direction === 'english' && !showThaiFront)
                );
            });
            
            // Mode buttons
            modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === currentMode));
            
            // Toggles
            document.getElementById('romanizationToggle').checked = showRomanization;
            document.getElementById('autoPlayToggle').checked = autoPlayAudio;
            
            // Regenerate mixed lists with default size
            mixedLists = generateMixedLists(mixedListSize);
            
            // Update vocabulary lists
            vocabularyLists = getActiveVocabularyLists();
            vocabulary = vocabularyLists[currentListIndex].words;
            
            // Update UI
            updateListSelector();
            initializeCards();
            updateCard();
            updateScoreDisplay();
            
            showToast('App completely reset');
        }
        
        function getMasteryStatus(card) {
            const key = getCardKey(card);
            
            // Use global stats
            const globalStats = getCardStats();
            const stats = globalStats[key];
            
            if (!stats || (stats.consecutiveCorrect === 0 && stats.incorrect === 0)) {
                return { status: 'new', label: 'New', class: 'mastery-new' };
            }
            
            // Check if struggling: more incorrect than correct, or high incorrect count with no streak
            const isStruggling = stats.incorrect >= 3 && stats.consecutiveCorrect === 0 && stats.incorrect > stats.correct;
            
            if (isStruggling) {
                return { status: 'struggling', label: 'Hard', class: 'mastery-struggling' };
            } else if (stats.consecutiveCorrect >= LEARNING_THRESHOLD) {
                // Check if it's been too long since last review (based on difficulty)
                if (stats.lastReviewed) {
                    const daysSinceReview = (Date.now() - new Date(stats.lastReviewed).getTime()) / (1000 * 60 * 60 * 24);
                    const reviewInterval = getReviewInterval(stats);
                    
                    if (daysSinceReview > reviewInterval) {
                        // Needs review
                        return { 
                            status: 'learning', 
                            label: 'Review', 
                            class: 'mastery-learning',
                            reviewInterval: reviewInterval,
                            daysSinceReview: daysSinceReview
                        };
                    }
                }
                // Show days until review in mastered label
                const reviewInterval = getReviewInterval(stats);
                const daysSinceReview = stats.lastReviewed ? 
                    (Date.now() - new Date(stats.lastReviewed).getTime()) / (1000 * 60 * 60 * 24) : 0;
                const daysUntilReview = Math.max(0, Math.round(reviewInterval - daysSinceReview));
                
                return { 
                    status: 'mastered', 
                    label: 'Learned', 
                    class: 'mastery-mastered',
                    reviewInterval: reviewInterval,
                    daysUntilReview: daysUntilReview
                };
            } else if (stats.consecutiveCorrect === 0) {
                return { status: 'new', label: 'New', class: 'mastery-new' };
            } else {
                // Show progress toward mastery
                const remaining = LEARNING_THRESHOLD - stats.consecutiveCorrect;
                return { 
                    status: 'learning', 
                    label: `Learning (${stats.consecutiveCorrect}/${LEARNING_THRESHOLD})`, 
                    class: 'mastery-learning' 
                };
            }
        }
        
        function getRomanization(thaiText) {
            return romanization[thaiText] || '';
        }
        
        function getCardsForSmartReview(cardList) {
            if (!smartReviewMode) return cardList;
            
            // Helper to get stats for a card (from global stats)
            function getCardStatsFor(card) {
                const key = getCardKey(card);
                const globalStats = getCardStats();
                return globalStats[key] || { consecutiveCorrect: 0, incorrect: 0 };
            }
            
            // Sort cards: due cards first, then by difficulty
            return [...cardList].sort((a, b) => {
                const statsA = getCardStatsFor(a);
                const statsB = getCardStatsFor(b);
                
                const masteryA = getMasteryStatus(a);
                const masteryB = getMasteryStatus(b);
                
                // Priority: struggling > new > learning/review > mastered
                const priorityOrder = { 'struggling': 0, 'new': 1, 'learning': 2, 'mastered': 3 };
                const priorityDiff = priorityOrder[masteryA.status] - priorityOrder[masteryB.status];
                if (priorityDiff !== 0) return priorityDiff;
                
                // Within learning/review, prioritize more overdue cards
                if (masteryA.status === 'learning' && masteryA.daysSinceReview && masteryB.daysSinceReview) {
                    const overdueA = masteryA.daysSinceReview - (masteryA.reviewInterval || 7);
                    const overdueB = masteryB.daysSinceReview - (masteryB.reviewInterval || 7);
                    if (overdueA !== overdueB) return overdueB - overdueA; // More overdue first
                }
                
                // Within mastered, prioritize cards closer to needing review
                if (masteryA.status === 'mastered' && masteryA.daysUntilReview !== undefined && masteryB.daysUntilReview !== undefined) {
                    if (masteryA.daysUntilReview !== masteryB.daysUntilReview) {
                        return masteryA.daysUntilReview - masteryB.daysUntilReview; // Sooner review first
                    }
                }
                
                // Within same priority, sort by incorrect count (higher = harder = first)
                return (statsB.incorrect || 0) - (statsA.incorrect || 0);
            });
        }
        
        function updateMilestones(progress) {
            const milestones = document.querySelectorAll('.milestone');
            milestones.forEach(m => {
                const percent = parseInt(m.dataset.percent);
                if (progress >= percent) {
                    m.classList.add('reached');
                } else {
                    m.classList.remove('reached');
                }
            });
        }

        // Custom example sentences for words that don't fit templates well
        const customSentences = {
            // Particles and grammar words
            "": [{ thai: "", roman: "yak bpai dte mi mii wee-laa", english: "Want to go but don't have time" }],
            "": [{ thai: "", roman: "p le me", english: "Father and mother" }],
            "": [{ thai: "", roman: "gaa-fae r chaa", english: "Coffee or tea?" }],
            "": [{ thai: "", roman: "mi bpai pr wa fn dtk", english: "Not going because it's raining" }],
            "": [{ thai: "", roman: "ta wang g maa", english: "If you're free, come" }],
            "": [{ thai: "", roman: "dii g dii", english: "That's fine" }],
            "": [{ thai: "", roman: "bpai dai gan", english: "Go together" }],
            "": [{ thai: "", roman: "mi ru li", english: "Don't know at all" }],
            "": [{ thai: "", roman: "bpai n", english: "I'm going, okay?" }],
            "": [{ thai: "", roman: "kp-kun krp", english: "Thank you (male)" }],
            "": [{ thai: "", roman: "kp-kun k", english: "Thank you (female)" }],
            "": [{ thai: "", roman: "-rai k", english: "What? (female)" }],
            "": [{ thai: "", roman: "bpai mi", english: "Are you going?" }],
            "": [{ thai: "", roman: "bpai s", english: "Go on then!" }],
            "": [{ thai: "", roman: "jing r", english: "Really?" }],
            
            // Pronouns
            "": [{ thai: "...", roman: "chn ch...", english: "My name is..." }],
            "": [{ thai: "", roman: "pm bpen kon tai", english: "I am Thai (male)" }],
            "": [{ thai: "", roman: "kun ch -rai", english: "What's your name?" }],
            "": [{ thai: "", roman: "ko bpai lew", english: "He/she already left" }],
            "": [{ thai: "", roman: "rao bpai gan", english: "Let's go" }],
            "": [{ thai: "", roman: "man -ri", english: "It's delicious" }],
            "": [{ thai: "", roman: "ni -rai", english: "What's this?" }],
            "": [{ thai: "", roman: "nn -rai", english: "What's that?" }],
            "": [{ thai: "", roman: "non ngai", english: "Over there, see?" }],
            
            // Common phrases
            "": [{ thai: "", roman: "s-wt-dii krp", english: "Hello (male)" }],
            "": [{ thai: "", roman: "kp-kun mak", english: "Thank you very much" }],
            "": [{ thai: "", roman: "k-tot n", english: "Sorry about that" }],
            "": [{ thai: "", roman: "mi bpen rai krp", english: "No problem" }],
            "": [{ thai: "", roman: "mi ko-jai krp", english: "I don't understand" }],
            "": [{ thai: "", roman: "put cha cha ni", english: "Please speak slowly" }],
            "": [{ thai: "", roman: "dai li krp", english: "Sure, go ahead" }],
            "": [{ thai: "", roman: "mi ao krp", english: "No thanks" }],
            "": [{ thai: "", roman: "mi ru krp", english: "I don't know" }],
            "": [{ thai: "", roman: "mi mii krp", english: "Don't have any" }],
            "": [{ thai: "", roman: "st lew", english: "Done/finished" }],
            "": [{ thai: "", roman: "dao gn", english: "Wait a moment" }],
            "": [{ thai: "", roman: "dao gn n", english: "Hold on a sec" }],
            
            // Question words
            "": [{ thai: "", roman: "ni -rai", english: "What is this?" }],
            "": [{ thai: "", roman: "tam-mai mi bpai", english: "Why not go?" }],
            "": [{ thai: "", roman: "tam yang-rai", english: "How to do it?" }],
            "": [{ thai: "", roman: "tam yang-ngai", english: "How do you do it?" }],
            "": [{ thai: "", roman: "maa ma-ri", english: "When did you come?" }],
            "": [{ thai: "", roman: "gi bat", english: "How many baht?" }],
            "": [{ thai: "", roman: "krai maa", english: "Who came?" }],
            "": [{ thai: "", roman: "yu ti-ni", english: "Where is it?" }],
            "": [{ thai: "", roman: "chay dai mi krp", english: "Can you help me?" }],
            
            // Time/tense markers
            "": [{ thai: "", roman: "gin lew", english: "Already ate" }],
            "": [{ thai: "", roman: "yang mi st", english: "Not finished yet" }],
            "": [{ thai: "", roman: "gam-lang tam yu", english: "Currently doing it" }],
            "": [{ thai: "", roman: "j bpai prng-ni", english: "Will go tomorrow" }],
            "": [{ thai: "", roman: "ki bpai mi", english: "Have you ever been?" }],
            "": [{ thai: "", roman: "maa dtrong wee-laa", english: "Come on time" }],
            "": [{ thai: "", roman: "maa sai", english: "Come late" }],
            "": [{ thai: "", roman: "bpai bi mi", english: "Do you go often?" }],
            "": [{ thai: "", roman: "maa s-m", english: "Always come" }],
            "": [{ thai: "", roman: "mi ki bpai", english: "Never been" }],
            "": [{ thai: "", roman: "maa tan-tii", english: "Come immediately" }],
            "": [{ thai: "", roman: "ik krng", english: "One more time" }],
            
            // Quantifiers
            "": [{ thai: "", roman: "kng kun", english: "Yours" }],
            "": [{ thai: "", roman: "ti ni", english: "Here" }],
            "": [{ thai: "", roman: "mi ao", english: "Don't want" }],
            "": [{ thai: "", roman: "chi krp", english: "Yes, correct" }],
            "": [{ thai: "", roman: "mi chi krp", english: "No, not correct" }],
            "": [{ thai: "", roman: "p lew", english: "That's enough" }],
            "": [{ thai: "", roman: "kp-kun mak", english: "Thank you very much" }],
            "": [{ thai: "", roman: "ni bpai", english: "Too little" }],
            "": [{ thai: "", roman: "tk wan", english: "Every day" }],
            "": [{ thai: "", roman: "baang krng", english: "Sometimes" }],
            "": [{ thai: "", roman: "ke ni", english: "Just this" }],
            "": [{ thai: "", roman: "tam eeng", english: "Do it yourself" }],
            
            // Tricky verbs
            "": [{ thai: "", roman: "bpen -rai", english: "What's wrong?" }],
            "": [{ thai: "", roman: "mii -rai mi", english: "Anything else?" }],
            "": [{ thai: "", roman: "yu ni", english: "Where are you?" }],
            "": [{ thai: "", roman: "tam -rai", english: "What are you doing?" }],
            "": [{ thai: "", roman: "dai li", english: "Sure, go ahead" }],
            "": [{ thai: "", roman: "ao an ni", english: "I'll take this one" }],
            "": [{ thai: "", roman: "yak gin -rai", english: "What do you want to eat?" }],
            "": [{ thai: "", roman: "dtng bpai lew", english: "Have to go now" }],
            "": [{ thai: "", roman: "chay ni", english: "Help please" }],
            "": [{ thai: "", roman: "lng duu", english: "Try it/let's see" }],
            "": [{ thai: "", roman: "ru lew", english: "I know already" }],
            
            // Shopping/restaurant
            "": [{ thai: "", roman: "raa-kaa to-ri", english: "What's the price?" }],
            "": [{ thai: "", roman: "an ni to-ri", english: "How much is this?" }],
            "": [{ thai: "", roman: "paeng gn bpai krp", english: "Too expensive" }],
            "": [{ thai: "", roman: "lt ni dai mi", english: "Can you discount?" }],
            "": [{ thai: "", roman: "k mee-nuu ni", english: "Menu please" }],
            "": [{ thai: "", roman: "prm sng aa-han", english: "Ready to order" }],
            "": [{ thai: "", roman: "chk bin krp", english: "Check please" }],
            
            // Travel
            "": [{ thai: "", roman: "j bpai ni", english: "Where are you going?" }],
            "": [{ thai: "", roman: "lao sai dtrong ni", english: "Turn left here" }],
            "": [{ thai: "", roman: "lao kwa kang na", english: "Turn right ahead" }],
            "": [{ thai: "", roman: "dtrong bpai li", english: "Go straight" }],
            "": [{ thai: "", roman: "ti ni krp", english: "Here please" }],
            "": [{ thai: "", roman: "dtrong ti nn", english: "Right there" }],
            "": [{ thai: "", roman: "lng taang", english: "I'm lost" }],
            
            // Banking/money
            "": [{ thai: "", roman: "oon ngn hi", english: "Transfer money to" }],
            "": [{ thai: "", roman: "oon ngn dai mi", english: "Can you transfer?" }],
            "": [{ thai: "", roman: "maa fak ngn", english: "Come to deposit" }],
            "": [{ thai: "", roman: "tn ngn ni", english: "Withdraw money" }],
            "": [{ thai: "", roman: "lek ngn ti ni", english: "Where to exchange?" }],
            "": [{ thai: "", roman: "fak kng ni", english: "Leave this with you" }],
            
            // Work
            "": [{ thai: "", roman: "bpai tam-ngaan", english: "Go to work" }],
            "": [{ thai: "", roman: "ngaan yng", english: "Work is busy" }],
            "": [{ thai: "", roman: "mii bpr-chum", english: "Have a meeting" }],
            
            // Abstract
            "": [{ thai: "", roman: "chok dii n", english: "Good luck!" }],
            "": [{ thai: "", roman: "mii bpan-ha mi", english: "Any problems?" }],
            "": [{ thai: "", roman: "ru kam-dtp mi", english: "Know the answer?" }],
            "": [{ thai: "", roman: "mii kam-tam mi", english: "Any questions?" }],
            "": [{ thai: "", roman: "kwaam-kt dii", english: "Good idea" }],
            "": [{ thai: "", roman: "mii pen mi", english: "Have a plan?" }],
            
            // Tech
            "": [{ thai: "", roman: "dtng chat bet", english: "Need to charge" }],
            "": [{ thai: "", roman: "tai rup hi ni", english: "Take a photo please" }],
            "": [{ thai: "", roman: "kn-ha nai guu-gn", english: "Search on Google" }],
            
            // Misc
            "": [{ thai: "", roman: "kon ae-t", english: "Crowded with people" }],
            "": [{ thai: "", roman: "ym ni dai mi", english: "Can I borrow?" }],
            "": [{ thai: "", roman: "gp kng", english: "Put things away" }],
            "": [{ thai: "", roman: "tng k-y", english: "Throw away trash" }],
            "": [{ thai: "", roman: "ha -rai", english: "Looking for what?" }],
            "": [{ thai: "", roman: "j gan n", english: "See you" }],
            "": [{ thai: "", roman: "si -rai", english: "What color?" }],
            "": [{ thai: "", roman: "rt-chat dii", english: "Tastes good" }],
            
            // Common phrases - use them as examples of themselves
            "": [{ thai: "", roman: "kun s-baai dii mi", english: "How are you?" }],
            "": [{ thai: "", roman: "s-baai dii krp", english: "I'm fine (male)" }],
            "": [{ thai: "", roman: "wan-ni mi s-baai", english: "Not feeling well today" }],
            "": [{ thai: "", roman: "mi j gan naan li", english: "It's been so long!" }],
            "": [{ thai: "", roman: "yin-dii ti di ru-jk krp", english: "Nice to meet you" }],
            "": [{ thai: "", roman: "gin kao r yang krp", english: "Have you eaten yet?" }],
            "": [{ thai: "", roman: "gin lew krp", english: "I've already eaten" }],
            "": [{ thai: "", roman: "wa ngai krp", english: "What's up?" }],
            "": [{ thai: "", roman: "lew j gan n", english: "See you later" }],
            "": [{ thai: "", roman: "lew dte kun li", english: "It's up to you" }],
            "": [{ thai: "", roman: "chang man t krp", english: "Forget about it" }],
            "": [{ thai: "", roman: "jing r krp", english: "Really?" }],
            "": [{ thai: "", roman: "ne-nn krp", english: "Of course!" }],
            "": [{ thai: "", roman: "mi dtng hang krp", english: "Don't worry" }],
            "": [{ thai: "", roman: "r-wang day n", english: "Be careful" }],
            
            // === ANIMALS & NATURE ===
            "": [
                { thai: "", roman: "ma kng chn chp wng", english: "My dog likes to run" },
                { thai: "", roman: "ma ho dang mak", english: "The dog barks very loudly" }
            ],
            "": [
                { thai: "", roman: "maew nn yu bon dtiang", english: "The cat is sleeping on the bed" },
                { thai: "", roman: "maew chp gin bplaa", english: "Cats like to eat fish" }
            ],
            "": [
                { thai: "", roman: "nk bin yu bon fa", english: "The bird is flying in the sky" },
                { thai: "", roman: "nk rng pleeng dtn chao", english: "Birds sing in the morning" }
            ],
            "": [
                { thai: "", roman: "bplaa wai nam nai me-nam", english: "Fish swim in the river" },
                { thai: "", roman: "chn chp gin bplaa", english: "I like to eat fish" }
            ],
            "": [
                { thai: "", roman: "chang dtua yi mak", english: "Elephants are very big" },
                { thai: "", roman: "chang bpen st bpr-jam chat tai", english: "The elephant is Thailand's national animal" }
            ],
            "": [
                { thai: "", roman: "dtn-mai nai san say mak", english: "The trees in the garden are very beautiful" },
                { thai: "", roman: "rao bpluk dtn-mai mi", english: "We planted new trees" }
            ],
            "": [
                { thai: "", roman: "dk-mai si daeng say", english: "The red flower is beautiful" },
                { thai: "", roman: "ko s dk-mai hi faen", english: "He bought flowers for his girlfriend" }
            ],
            "": [
                { thai: "", roman: "puu-ko sung mak", english: "The mountain is very tall" },
                { thai: "", roman: "rao bpai tao puu-ko", english: "We went to visit the mountains" }
            ],
            "": [
                { thai: "", roman: "t-lee si fa say mak", english: "The blue sea is very beautiful" },
                { thai: "", roman: "dk dk chp ln ti t-lee", english: "Children like to play at the sea" }
            ],
            "": [
                { thai: "", roman: "fn dtk nk mak", english: "It's raining very heavily" },
                { thai: "", roman: "prng-ni fn j dtk", english: "It will rain tomorrow" }
            ],
            
            // === FOOD & DRINKS ===
            "": [
                { thai: "", roman: "kon tai gin kao tk wan", english: "Thai people eat rice every day" },
                { thai: "", roman: "kao say rn rn -ri", english: "Hot steamed rice is delicious" }
            ],
            "": [
                { thai: "", roman: "chn gin ki dtn chao", english: "I eat eggs in the morning" },
                { thai: "", roman: "ki jiao -ri mak", english: "Thai omelet is very delicious" }
            ],
            "": [
                { thai: "", roman: "dm nam y y n", english: "Drink lots of water, okay?" },
                { thai: "", roman: "nam yen -ri", english: "Cold water is refreshing" }
            ],
            "": [
                { thai: "", roman: "chn chp dm gaa-fae dtn chao", english: "I like to drink coffee in the morning" },
                { thai: "", roman: "gaa-fae rn nng gew", english: "One cup of hot coffee" }
            ],
            "": [
                { thai: "", roman: "chaa kao dii dt sk-k-pap", english: "Green tea is good for health" },
                { thai: "", roman: "k chaa yen krp", english: "I'd like iced tea please" }
            ],
            "": [
                { thai: "", roman: "bia yen yen dii mak", english: "Cold beer is great" },
                { thai: "", roman: "kn ni bpai dm bia gan", english: "Let's go drink beer tonight" }
            ],
            "": [
                { thai: "", roman: "pn-l-mai tai -ri mak", english: "Thai fruits are very delicious" },
                { thai: "", roman: "gin pn-l-mai dii dt sk-k-pap", english: "Eating fruit is good for health" }
            ],
            "": [
                { thai: "", roman: "dk dtng gin pk y y", english: "Children must eat lots of vegetables" },
                { thai: "", roman: "pk st -ri gwa pk gr-bpng", english: "Fresh vegetables are tastier than canned" }
            ],
            "": [
                { thai: "", roman: "na wua paeng mak", english: "Beef is very expensive" },
                { thai: "", roman: "chn mi gin na", english: "I don't eat meat" }
            ],
            "": [
                { thai: "", roman: "mu grp -ri mak", english: "Crispy pork is very delicious" },
                { thai: "", roman: "kao mu daeng jaan nng", english: "One plate of red pork rice" }
            ],
            
            // === FAMILY & PEOPLE ===
            "": [
                { thai: "", roman: "p tam-ngaan nk", english: "Dad works hard" },
                { thai: "", roman: "p kng chn aa-y ha-sp bpii", english: "My father is fifty years old" }
            ],
            "": [
                { thai: "", roman: "me tam aa-han -ri", english: "Mom cooks delicious food" },
                { thai: "", roman: "chn rk me mak", english: "I love my mom very much" }
            ],
            "": [
                { thai: "", roman: "pi chaai kng chn rian m-ha-wt-t-yaa-lai", english: "My older brother studies at university" },
                { thai: "", roman: "pi sao chay tam gaan-ban", english: "My older sister helps with homework" }
            ],
            "": [
                { thai: "", roman: "nng chaai aa-y sp kap", english: "My younger brother is ten years old" },
                { thai: "", roman: "nng sao na-rk mak", english: "My younger sister is very cute" }
            ],
            "": [
                { thai: "", roman: "luk luk gam-lang ln yu", english: "The children are playing" },
                { thai: "", roman: "luk chaai chp ln ft-bn", english: "My son likes to play football" }
            ],
            "": [
                { thai: "", roman: "pan maa ha ti ban", english: "A friend came to visit at home" },
                { thai: "", roman: "pan ti dii ha yak", english: "Good friends are hard to find" }
            ],
            "": [
                { thai: "", roman: "faen kng chn na-rk mak", english: "My boyfriend/girlfriend is very cute" },
                { thai: "", roman: "kun mii faen r yang", english: "Do you have a boyfriend/girlfriend yet?" }
            ],
            "": [
                { thai: "", roman: "kon tai jai dii", english: "Thai people are kind" },
                { thai: "", roman: "mii kon mak ti dt-lat", english: "There are many people at the market" }
            ],
            
            // === BODY & HEALTH ===
            "": [
                { thai: "", roman: "ha kng chn yi", english: "My head is big" },
                { thai: "", roman: "bpat ha mak", english: "I have a bad headache" },
                { thai: "", roman: "ko doon dtii ti ha", english: "He got hit on the head" },
                { thai: "", roman: "ta bpat ha bi bi kuan bpai ha m", english: "If you have frequent headaches, you should see a doctor" }
            ],
            "": [
                { thai: "", roman: "dtaa si nm-dtaan", english: "Brown eyes" },
                { thai: "", roman: "ko mii dtaa say", english: "She has beautiful eyes" },
                { thai: "", roman: "chn bpat dtaa pr duu j naan gn bpai", english: "My eyes hurt because I looked at the screen too long" },
                { thai: "", roman: "m bk wa dtaa kng chn bp-g-dt dii", english: "The doctor said my eyes are normal" }
            ],
            "": [
                { thai: "", roman: "hu kng chang yi mak", english: "Elephant ears are very big" },
                { thai: "", roman: "chn mi dai yin pr hu mi dii", english: "I can't hear because my ears aren't good" },
                { thai: "", roman: "ko si dtang-hu say mak", english: "She wears very beautiful earrings" }
            ],
            "": [
                { thai: "", roman: "j-muk kng ko dong", english: "His nose is high/prominent" },
                { thai: " ", roman: "chn bpen wt j-muk dtan", english: "I have a cold, my nose is blocked" },
                { thai: " ", roman: "dk-mai ni hm lng dom duu s", english: "This flower smells nice, try smelling it" }
            ],
            "": [
                { thai: "", roman: "a bpak", english: "Open your mouth" },
                { thai: "", roman: "ko bpak wan", english: "He/she has a sweet mouth (flatters)" },
                { thai: "", roman: "ya put bpak mak", english: "Don't talk too much" },
                { thai: "", roman: "m fan bk hi a bpak gwang gwang", english: "The dentist told me to open my mouth wide" }
            ],
            "": [
                { thai: "", roman: "lang m gn gin kao", english: "Wash your hands before eating" },
                { thai: "", roman: "m kng ko yi", english: "His hands are big" },
                { thai: "", roman: "ko jp m gan", english: "They held hands" },
                { thai: "", roman: "chay yn m maa ni dai mi", english: "Can you reach out your hand a bit?" }
            ],
            "": [
                { thai: "", roman: "tao kng chn lk", english: "My feet are small" },
                { thai: "", roman: "dn jon tao jp", english: "Walked until my feet hurt" },
                { thai: "", roman: "tt rng-tao gn ko ban", english: "Take off your shoes before entering the house" },
                { thai: "", roman: "ko yap tao chn dooi mi dtng-jai", english: "He stepped on my foot accidentally" }
            ],
            "": [
                { thai: "", roman: "ha-jai dtn rew", english: "My heart is beating fast" },
                { thai: "", roman: "ko bpen kon dii mii ha-jai", english: "He's a good person with heart" },
                { thai: "", roman: "rk t mt ha-jai", english: "I love you with all my heart" },
                { thai: "", roman: "m bk wa ha-jai kng ko keng-raeng", english: "The doctor said his heart is strong" }
            ],
            "": [
                { thai: "", roman: "tng hu", english: "I'm hungry (stomach is hungry)" },
                { thai: "", roman: "bpat tng mak", english: "I have a bad stomachache" },
                { thai: "", roman: "t tng dai sam dan lew", english: "She's been pregnant for three months" },
                { thai: "", roman: "gin mak bpai jon tng t", english: "Ate too much until my stomach is bloated" }
            ],
            "": [
                { thai: "", roman: "wan-ni bpay", english: "I'm sick today" },
                { thai: "", roman: "ko bpay maa sam wan lew", english: "He's been sick for three days" },
                { thai: "", roman: "ta bpay dtng pk-pn", english: "If you're sick, you need to rest" },
                { thai: "", roman: "chn bpay bi pr nn dk tk kn", english: "I get sick often because I stay up late every night" }
            ],
            "": [
                { thai: "", roman: "bpai ha m", english: "Go see a doctor" },
                { thai: "", roman: "m bk wa mi bpen -rai", english: "The doctor said it's nothing" },
                { thai: "", roman: "ko yak bpen m dtng-dte dk", english: "He's wanted to be a doctor since childhood" },
                { thai: " ", roman: "m kon ni gng mak krai krai g yak maa ha", english: "This doctor is very skilled, everyone wants to see him" }
            ],
            "": [
                { thai: "", roman: "gin yaa lew r yang", english: "Have you taken your medicine yet?" },
                { thai: "", roman: "yaa ni km", english: "This medicine is bitter" },
                { thai: "", roman: "dtng gin yaa wan l sam krng", english: "You need to take medicine three times a day" },
                { thai: "", roman: "chn pe yaa baang ch-nt", english: "I'm allergic to some types of medicine" }
            ],
            
            // === COLORS & DESCRIPTIONS ===
            "": [
                { thai: "", roman: "si daeng", english: "Red color" },
                { thai: "", roman: "rt si daeng kan nn", english: "That red car" },
                { thai: "", roman: "na daeng pr rn", english: "Face is red because of heat" },
                { thai: "", roman: "t chp si sa si daeng pr man duu dot-dn", english: "She likes wearing red shirts because they look outstanding" }
            ],
            "": [
                { thai: "", roman: "bai-mai si kao", english: "Green leaves" },
                { thai: "", roman: "chaa kao -ri", english: "Green tea is delicious" },
                { thai: " ", roman: "fai kao lew bpai dai", english: "The light is green, you can go" },
                { thai: "", roman: "ko gin dte pk kao pa sk-k-pap", english: "He only eats green vegetables for his health" }
            ],
            "": [
                { thai: "", roman: "tng-fa si nm-ngn", english: "The sky is blue" },
                { thai: "", roman: "cht si nm-ngn say mak", english: "The blue outfit is very beautiful" },
                { thai: "", roman: "t-lee si nm-ngn si", english: "The sea is clear blue" }
            ],
            "": [
                { thai: "", roman: "mek si kao", english: "White clouds" },
                { thai: "", roman: "fan kao", english: "White teeth" },
                { thai: "", roman: "ko si sa kao", english: "He wears a white shirt" },
                { thai: "", roman: "kon tai chp si cht kao bpai wt", english: "Thai people like to wear white to the temple" }
            ],
            "": [
                { thai: "", roman: "maew dam", english: "Black cat" },
                { thai: "", roman: "pm si dam", english: "Black hair" },
                { thai: "", roman: "gaa-fae dam mi si nm-dtaan", english: "Black coffee without sugar" },
                { thai: "", roman: "tng-fa mt dam pr j mii paa-y", english: "The sky is dark because there will be a storm" }
            ],
            "": [
                { thai: "", roman: "ban yi", english: "Big house" },
                { thai: "", roman: "chang dtua yi mak", english: "The elephant is very big" },
                { thai: "", roman: "bpan-ha yi", english: "Big problem" },
                { thai: "", roman: "mang ni yi gwa ti chn kt wi mak", english: "This city is much bigger than I thought" }
            ],
            "": [
                { thai: "", roman: "ma dtua lk", english: "Small dog" },
                { thai: "", roman: "hng lk bpai ni", english: "The room is a bit small" },
                { thai: "", roman: "dk lk na-rk", english: "Small children are cute" },
                { thai: "", roman: "me j lk dte g keng-raeng", english: "Although small, it's still strong" }
            ],
            "": [
                { thai: "", roman: "dk-mai say", english: "Beautiful flower" },
                { thai: "", roman: "t say mak", english: "She's very beautiful" },
                { thai: "", roman: "wiu say jang", english: "What a beautiful view!" },
                { thai: "", roman: "paa-sa tai fang duu say-ngaam mak", english: "The Thai language sounds very beautiful" }
            ],
            "": [
                { thai: "", roman: "ko l", english: "He's handsome" },
                { thai: "", roman: "daa-raa kon ni l mak", english: "This actor is very handsome" },
                { thai: " ", roman: "mi dtng l ke ruay g p", english: "Don't need to be handsome, just rich is enough (joking)" }
            ],
            "": [
                { thai: "", roman: "wan-ni rn mak", english: "Today is very hot" },
                { thai: "", roman: "nam rn", english: "Hot water" },
                { thai: "", roman: "aa-gat rn jon ton mi wi", english: "The weather is so hot I can't stand it" },
                { thai: "", roman: "bpr-tet tai rn dt-lt tng bpii", english: "Thailand is hot all year round" }
            ],
            "": [
                { thai: "", roman: "nam yen", english: "Cold water" },
                { thai: "", roman: "aa-gat yen s-baai", english: "The weather is cool and comfortable" },
                { thai: "", roman: "dtn yen bpai wng", english: "In the evening, I go running" },
                { thai: "", roman: "puu-ko sung aa-gat yen gwa kang lang", english: "High mountains have cooler weather than below" }
            ],
            
            // === BASIC ACTIONS ===
            "": [
                { thai: "", roman: "gin kao r yang", english: "Have you eaten yet?" },
                { thai: "", roman: "gin -rai dii", english: "What should we eat?" },
                { thai: "", roman: "ko gin y mak", english: "He eats a lot" },
                { thai: "", roman: "chn mi chp gin pk dtn bpen dk", english: "I didn't like eating vegetables when I was a child" }
            ],
            "": [
                { thai: "", roman: "dm nam", english: "Drink water" },
                { thai: "", roman: "dm -rai krp", english: "What would you like to drink?" },
                { thai: "", roman: "ko dm bia tk wan", english: "He drinks beer every day" },
                { thai: "", roman: "m bk wa kuan dm nam wan l bpet gew", english: "The doctor said you should drink eight glasses of water a day" }
            ],
            "": [
                { thai: "", roman: "nn lp fn dii", english: "Sleep well, sweet dreams" },
                { thai: "", roman: "nn gi moong", english: "What time do you sleep?" },
                { thai: "", roman: "ma-kn nn mi lp", english: "Last night I couldn't sleep" },
                { thai: "", roman: "ta nn mi p j nay tng wan", english: "If you don't sleep enough, you'll be tired all day" }
            ],
            "": [
                { thai: "", roman: "dtn gi moong", english: "What time do you wake up?" },
                { thai: "", roman: "dtn sai wan-ni", english: "Woke up late today" },
                { thai: "", roman: "prng-ni dtng dtn chao", english: "Tomorrow I have to wake up early" },
                { thai: "", roman: "chn dtn dtng-dte dtii-ha tk wan", english: "I wake up at 5 AM every day" }
            ],
            "": [
                { thai: "", roman: "bpai ni", english: "Where are you going?" },
                { thai: "", roman: "bpai tao gan", english: "Let's go travel" },
                { thai: "", roman: "ko bpai tam-ngaan lew", english: "He already went to work" },
                { thai: "", roman: "ta mi mii rt j bpai yang-ngai", english: "If there's no car, how will you go?" }
            ],
            "": [
                { thai: "", roman: "maa ti-ni", english: "Come here" },
                { thai: "", roman: "maa tng lew", english: "Already arrived" },
                { thai: "", roman: "ko maa jak ni", english: "Where does he come from?" },
                { thai: "", roman: "rt-mee yang mi maa li r naan mak", english: "The bus still hasn't come so I waited a long time" }
            ],
            "": [
                { thai: "", roman: "dn cha cha", english: "Walk slowly" },
                { thai: "", roman: "dn bpai roong-rian", english: "Walk to school" },
                { thai: "", roman: "chp dn ln dtn yen", english: "I like to take walks in the evening" },
                { thai: "", roman: "dn maa jak ban tng ti-ni chi wee-laa krng cha-moong", english: "Walking from home to here takes half an hour" }
            ],
            "": [
                { thai: "", roman: "wng rew mak", english: "Run very fast" },
                { thai: "", roman: "k bpai wng tk chao", english: "Go out running every morning" },
                { thai: "", roman: "ma wng li maew", english: "The dog runs chasing the cat" },
                { thai: "", roman: "chn wng maa-raa-tn krng rek ma bpii ti lew", english: "I ran my first marathon last year" }
            ],
            "": [
                { thai: "", roman: "tam -rai", english: "What are you doing?" },
                { thai: "", roman: "tam-ngaan", english: "Work" },
                { thai: "", roman: "tam aa-han", english: "Cook food" },
                { thai: " ", roman: "ta mi ru j tam yang-ngai g tam dai li", english: "If you don't know what to do, just ask" }
            ],
            "": [
                { thai: "", roman: "put tai dai mi", english: "Can you speak Thai?" },
                { thai: "", roman: "put cha cha ni", english: "Please speak slowly" },
                { thai: "", roman: "ko put gng mak", english: "He speaks very well" },
                { thai: "", roman: "chn put paa-sa tai mi gng dte p-yaa-yaam fk tk wan", english: "I don't speak Thai well but I try to practice every day" }
            ],
            "": [
                { thai: "", roman: "fang pleeng", english: "Listen to music" },
                { thai: "", roman: "fang mi tan", english: "Can't catch what you said" },
                { thai: "", roman: "fang dii dii n", english: "Listen carefully, okay?" },
                { thai: "", roman: "chn chp fang pleeng tai pa fk paa-sa", english: "I like listening to Thai songs to practice the language" }
            ],
            "": [
                { thai: "", roman: "duu nng", english: "Watch a movie" },
                { thai: "", roman: "duu tii-wii", english: "Watch TV" },
                { thai: "", roman: "lng duu s", english: "Try it and see" },
                { thai: "", roman: "ma-waan duu nng jon dk mak", english: "Yesterday I watched movies until very late" }
            ],
            "": [
                { thai: "", roman: "an nng-s", english: "Read a book" },
                { thai: "", roman: "an paa-sa tai yak mi", english: "Is reading Thai difficult?" },
                { thai: "", roman: "chp an gn nn", english: "I like to read before bed" },
                { thai: "", roman: "chn an nng-s lm ni sam rp lew", english: "I've read this book three times already" }
            ],
            "": [
                { thai: "", roman: "kan ch", english: "Write your name" },
                { thai: "", roman: "kan paa-sa tai yak", english: "Writing Thai is difficult" },
                { thai: "", roman: "kan jt-mai hi me", english: "Write a letter to mom" },
                { thai: "", roman: "ko kan n-yaai lm rek dtn aa-y yi-sp bpii", english: "He wrote his first novel when he was twenty" }
            ],
            
            // === NUMBERS & TIME ===
            "": [
                { thai: "", roman: "k nng an", english: "I'd like one, please" },
                { thai: "", roman: "r bpep nng", english: "Wait a moment" },
                { thai: "", roman: "la ik nng chn", english: "There's one piece left" },
                { thai: "", roman: "chn mii maew nng dtua gp ma sng dtua", english: "I have one cat and two dogs" }
            ],
            "": [
                { thai: "", roman: "sng kon", english: "Two people" },
                { thai: "", roman: "k sng ti-nng", english: "I'd like two seats" },
                { thai: "", roman: "r sng naa-tii", english: "Wait two minutes" },
                { thai: "", roman: "rao kp gan maa sng bpii lew", english: "We've been dating for two years" }
            ],
            "": [
                { thai: "", roman: "sam moong chao", english: "9 AM (three o'clock morning)" },
                { thai: "", roman: "mii luk sam kon", english: "Have three children" },
                { thai: "", roman: "dtng gin yaa wan l sam krng", english: "Must take medicine three times a day" }
            ],
            "": [
                { thai: "", roman: "sp bat", english: "Ten baht" },
                { thai: "", roman: "r ik sp naa-tii", english: "Wait another ten minutes" },
                { thai: "", roman: "ko aa-y sp kap", english: "He's ten years old" },
                { thai: "", roman: "chn rian paa-sa tai maa sp dan lew", english: "I've been studying Thai for ten months" }
            ],
            "": [
                { thai: "", roman: "ri bat", english: "One hundred baht" },
                { thai: "", roman: "nng ri bp-sen", english: "One hundred percent" },
                { thai: "", roman: "mii kon maa ri gwa kon", english: "More than a hundred people came" }
            ],
            "": [
                { thai: "", roman: "nng pan bat", english: "One thousand baht" },
                { thai: "", roman: "ka cho dan l ha pan", english: "Rent is five thousand per month" },
                { thai: "", roman: "mang ni mii bpr-chaa-gn lai pan kon", english: "This city has several thousand inhabitants" }
            ],
            "": [
                { thai: "", roman: "wan-ni", english: "Today" },
                { thai: "", roman: "tk wan", english: "Every day" },
                { thai: "", roman: "wan yt", english: "Holiday/day off" },
                { thai: "", roman: "wan-ni bpen wan ti dii ti-st nai chii-wt", english: "Today is the best day of my life" }
            ],
            "": [
                { thai: "", roman: "dan ni", english: "This month" },
                { thai: "", roman: "dan na", english: "Next month" },
                { thai: "", roman: "ngn-dan to-ri", english: "What's your salary?" },
                { thai: "", roman: "chn yu mang tai maa sam dan lew", english: "I've been in Thailand for three months" }
            ],
            "": [
                { thai: "", roman: "bpii ni", english: "This year" },
                { thai: "", roman: "bpii na", english: "Next year" },
                { thai: "", roman: "s-wt-dii bpii mi", english: "Happy New Year" },
                { thai: "", roman: "ko tam-ngaan ti-ni maa yi-sp bpii lew", english: "He's been working here for twenty years" }
            ],
            "": [
                { thai: "", roman: "nng cha-moong", english: "One hour" },
                { thai: "", roman: "r ik krng cha-moong", english: "Wait another half hour" },
                { thai: "", roman: "tam-ngaan wan l bpet cha-moong", english: "Work eight hours a day" },
                { thai: "", roman: "dn-taang maa chi wee-laa sam cha-moong", english: "The journey here took three hours" }
            ],
            "": [
                { thai: "", roman: "dtn chao", english: "In the morning" },
                { thai: "", roman: "-run s-wt", english: "Good morning" },
                { thai: "", roman: "dtn chao tk wan", english: "Wake up early every day" },
                { thai: "", roman: "chn chp k-gam-lang-gaai dtn chao pr aa-gat yen", english: "I like exercising in the morning because the weather is cool" }
            ],
            "": [
                { thai: "", roman: "dtn bai", english: "In the afternoon" },
                { thai: "", roman: "bai sng moong", english: "2 PM" },
                { thai: "", roman: "bai ni wang mi", english: "Are you free this afternoon?" },
                { thai: "", roman: "rao j bpr-chum gan dtn bai sam moong", english: "We'll have a meeting at 3 PM" }
            ],
            "": [
                { thai: "", roman: "dtn glaang-kn", english: "At night" },
                { thai: "", roman: "glaang-kn ngap mak", english: "It's very quiet at night" },
                { thai: "", roman: "tam-ngaan glaang-kn", english: "Work at night" },
                { thai: "", roman: "grung-typ dtn glaang-kn say mak", english: "Bangkok at night is very beautiful" }
            ],
            
            // === EMOTIONS & FEELINGS ===
            "": [
                { thai: "", roman: "dii-jai mak", english: "Very happy" },
                { thai: "", roman: "dii-jai ti dai j", english: "Happy to meet you" },
                { thai: "", roman: "ko dii-jai ti sp pan", english: "He's happy that he passed the exam" },
                { thai: "", roman: "chn dii-jai mak ti kun maa ha", english: "I'm so happy that you came to visit" }
            ],
            "": [
                { thai: "", roman: "sa-jai day", english: "I'm sorry (condolences)" },
                { thai: "", roman: "ya sa-jai", english: "Don't be sad" },
                { thai: "", roman: "ko sa-jai ti tam pt", english: "He's sorry that he made a mistake" },
                { thai: "", roman: "chn sa-jai mak ti mi dai bpai ngaan-dteng kng t", english: "I'm very sorry I couldn't go to her wedding" }
            ],
            "": [
                { thai: "", roman: "grot mi", english: "Are you angry?" },
                { thai: "", roman: "ya grot n", english: "Don't be angry, okay?" },
                { thai: "", roman: "ko grot mak ti r naan", english: "He was very angry for waiting long" },
                { thai: "", roman: "chn mi ki grot ngai dte wan-ni ton mi wi", english: "I don't get angry easily but today I couldn't take it" }
            ],
            "": [
                { thai: "", roman: "glua mak", english: "Very scared" },
                { thai: "", roman: "glua pi", english: "Afraid of ghosts" },
                { thai: "", roman: "mi dtng glua", english: "Don't be afraid" },
                { thai: "", roman: "chn glua kwaam sung mak jon mi gla kn dtk sung", english: "I'm so afraid of heights that I don't dare go up tall buildings" }
            ],
            "": [
                { thai: "", roman: "nay mak", english: "Very tired" },
                { thai: "", roman: "tam-ngaan jon nay", english: "Worked until tired" },
                { thai: " ", roman: "nay mi pk gn", english: "Are you tired? Rest first" },
                { thai: "", roman: "wan-ni nay mak pr bpr-chum tng wan", english: "Today I'm very tired because I had meetings all day" }
            ],
            "": [
                { thai: "", roman: "ba jang", english: "So bored" },
                { thai: "", roman: "ba aa-han dm dm", english: "Bored of the same food" },
                { thai: "", roman: "tam-ngaan dm dm jon ba", english: "Doing the same work until bored" },
                { thai: "", roman: "chn ba ti dtng r naan tk krng", english: "I'm tired of having to wait long every time" }
            ],
            "": [
                { thai: "", roman: "rk kun", english: "I love you" },
                { thai: "", roman: "rk n", english: "Love you" },
                { thai: "", roman: "ko rk krp-krua mak", english: "He loves his family very much" },
                { thai: "", roman: "chn rk mang tai pr kon jai-dii le aa-han -ri", english: "I love Thailand because the people are kind and the food is delicious" }
            ],
            "": [
                { thai: "", roman: "kt-tng mak", english: "Miss you a lot" },
                { thai: "", roman: "kt-tng ban", english: "Miss home" },
                { thai: "", roman: "kt-tng tk wan", english: "Miss you every day" },
                { thai: "", roman: "chn kt-tng me tk krng ti gin aa-han tai", english: "I miss my mom every time I eat Thai food" }
            ],
            "": [
                { thai: "", roman: "s-baai dii", english: "I'm fine" },
                { thai: "", roman: "nn s-baai", english: "Sleep comfortably" },
                { thai: "", roman: "ti-ni aa-gat s-baai", english: "The weather here is comfortable" },
                { thai: "", roman: "chii-wt ti-ni s-baai gwa nai mang yi", english: "Life here is more comfortable than in the big city" }
            ],
            
            // === TRAVEL & TRANSPORT ===
            "": [
                { thai: "", roman: "kp rt", english: "Drive a car" },
                { thai: "", roman: "rt dtt mak", english: "Traffic is really bad" },
                { thai: "", roman: "rt kng chn sa", english: "My car is broken" },
                { thai: "", roman: "grung-typ rt dtt tk wan dooi ch-p dtn chao le yen", english: "Bangkok has traffic jams every day, especially morning and evening" }
            ],
            "": [
                { thai: "", roman: "nng rt-fai", english: "Take the train" },
                { thai: "", roman: "rt-fai maa gi moong", english: "What time does the train come?" },
                { thai: "", roman: "rt-fai dti-din s-dak mak", english: "The subway is very convenient" },
                { thai: "", roman: "chn chp nng rt-fai pr mi dtng gang-won rang rt dtt", english: "I like taking the train because I don't have to worry about traffic" }
            ],
            "": [
                { thai: "", roman: "nng krang-bin", english: "Take a plane" },
                { thai: "", roman: "krang-bin dii-li", english: "The plane is delayed" },
                { thai: "", roman: "glua kn krang-bin", english: "Afraid of flying" },
                { thai: "", roman: "jak grung-typ bpai chiang-mi nng krang-bin chi wee-laa cha-moong diao", english: "From Bangkok to Chiang Mai by plane takes only one hour" }
            ],
            "": [
                { thai: "", roman: "s-ta-nii rt-fai", english: "Train station" },
                { thai: "", roman: "s-ta-nii yu glai mi", english: "Is the station far?" },
                { thai: "", roman: "long s-ta-nii ni", english: "Which station do you get off at?" },
                { thai: "", roman: "s-ta-nii rt-fai ha-lam-poong bpen s-ta-nii go-ge ti-st nai grung-typ", english: "Hua Lamphong station is the oldest train station in Bangkok" }
            ],
            "": [
                { thai: "", roman: "kam t-nn", english: "Cross the street" },
                { thai: "", roman: "t-nn sn ni", english: "This road" },
                { thai: "", roman: "t-nn s-km-wt yaao mak", english: "Sukhumvit Road is very long" },
                { thai: " ", roman: "r-wang day n t-nn sn ni rt y mak", english: "Be careful, this road has a lot of cars" }
            ],
            "": [
                { thai: "", roman: "duu pen-ti", english: "Look at the map" },
                { thai: "", roman: "mii pen-ti mi", english: "Do you have a map?" },
                { thai: "", roman: "chi pen-ti nai too-r-sp", english: "Use the map on the phone" },
                { thai: "", roman: "s-mi ni mi ki mii krai chi pen-ti gr-dat lew", english: "Nowadays hardly anyone uses paper maps anymore" }
            ],
            "": [
                { thai: "", roman: "ha ti-pk", english: "Find accommodation" },
                { thai: "", roman: "ti-pk yu ni", english: "Where's your accommodation?" },
                { thai: "", roman: "jng ti-pk lew", english: "Already booked accommodation" },
                { thai: "", roman: "ti-pk gli t-lee paeng gwa nai mang", english: "Accommodation near the beach is more expensive than in town" }
            ],
            
            // === SHOPPING & MONEY ===
            "": [
                { thai: "", roman: "s -rai", english: "What are you buying?" },
                { thai: "", roman: "yak s", english: "Want to buy" },
                { thai: "", roman: "s kng ti dt-lat", english: "Buy things at the market" },
                { thai: "", roman: "chn s kng n-lai pr s-dak gwa bpai ran", english: "I buy things online because it's more convenient than going to the store" }
            ],
            "": [
                { thai: "", roman: "kai -rai", english: "What do you sell?" },
                { thai: "", roman: "ran ni kai -rai", english: "What does this shop sell?" },
                { thai: "", roman: "ko kai ban lew", english: "He sold his house" },
                { thai: "", roman: "me-ka kon ni kai pk st tk wan", english: "This vendor sells fresh vegetables every day" }
            ],
            "": [
                { thai: "", roman: "raa-kaa to-ri", english: "How much is the price?" },
                { thai: "", roman: "raa-kaa paeng", english: "The price is expensive" },
                { thai: "", roman: "lt raa-kaa dai mi", english: "Can you reduce the price?" },
                { thai: "", roman: "raa-kaa nm-man kn tk dan", english: "Gas prices go up every month" }
            ],
            "": [
                { thai: "", roman: "paeng mak", english: "Very expensive" },
                { thai: "", roman: "paeng bpai ni", english: "A bit expensive" },
                { thai: "", roman: "paeng gn bpai", english: "Too expensive" },
                { thai: "", roman: "kng ti hang paeng gwa ti dt-lat y", english: "Things at the mall are much more expensive than at the market" }
            ],
            "": [
                { thai: "", roman: "tuk mak", english: "Very cheap" },
                { thai: "", roman: "ran ni tuk dii", english: "This shop has good prices" },
                { thai: "", roman: "tuk gwa ran n", english: "Cheaper than other shops" },
                { thai: "", roman: "aa-han kang taang tuk le -ri mak", english: "Street food is cheap and very delicious" }
            ],
            "": [
                { thai: "", roman: "mii ngn mi", english: "Do you have money?" },
                { thai: "", roman: "ngn mi p", english: "Not enough money" },
                { thai: "", roman: "fak ngn", english: "Deposit money" },
                { thai: "", roman: "dtng gp ngn wi chi yaam chk-chn", english: "You should save money for emergencies" }
            ],
            "": [
                { thai: "", roman: "bt kree-dt", english: "Credit card" },
                { thai: "", roman: "jai bt dai mi", english: "Can I pay by card?" },
                { thai: "", roman: "bt bpr-chaa-chon", english: "ID card" },
                { thai: "", roman: "ran ni rp bt kree-dt dte dtng s kn-dtm sam ri bat", english: "This shop accepts credit cards but requires a minimum purchase of 300 baht" }
            ],
            "": [
                { thai: "", roman: "bpai dt-lat", english: "Go to the market" },
                { thai: "", roman: "dt-lat nt", english: "Weekend market" },
                { thai: "", roman: "dt-lat bpt gi moong", english: "What time does the market open?" },
                { thai: "", roman: "dt-lat j-dt-jk bpen dt-lat nt ti yi ti-st nai grung-typ", english: "Chatuchak is the biggest weekend market in Bangkok" }
            ],
            "": [
                { thai: "", roman: "ran aa-han", english: "Restaurant" },
                { thai: "", roman: "ran gaa-fae", english: "Coffee shop" },
                { thai: "", roman: "ran bpt lew", english: "The shop is closed" },
                { thai: "", roman: "ran ni kai dii mak pr aa-han -ri le raa-kaa mi paeng", english: "This restaurant sells well because the food is delicious and not expensive" }
            ],
            
            // === WORK & BUSINESS ===
            "": [
                { thai: "", roman: "bpai tam-ngaan", english: "Go to work" },
                { thai: "", roman: "ngaan yng mak", english: "Work is very busy" },
                { thai: "", roman: "ha ngaan mi", english: "Looking for a new job" },
                { thai: "", roman: "ngaan ti tam dtn-ni nay dte ngn-dan dii", english: "My current job is tiring but the salary is good" }
            ],
            "": [
                { thai: "", roman: "tam-ngaan b-r-st", english: "Work at a company" },
                { thai: "", roman: "b-r-st yi", english: "Big company" },
                { thai: "", roman: "b-r-st yu ti-ni", english: "Where is the company located?" },
                { thai: "", roman: "b-r-st ni mii p-nk-ngaan mak gwa ha ri kon", english: "This company has more than five hundred employees" }
            ],
            "": [
                { thai: "", roman: "mii bpr-chum", english: "Have a meeting" },
                { thai: "", roman: "bpr-chum gi moong", english: "What time is the meeting?" },
                { thai: "", roman: "bpr-chum st lew", english: "The meeting is finished" },
                { thai: "", roman: "wan-ni bpr-chum tng wan jon mi mii wee-laa gin kao", english: "Today I had meetings all day with no time to eat" }
            ],
            "": [
                { thai: "", roman: "jo-naai jai-dii", english: "The boss is kind" },
                { thai: "", roman: "jo-naai rak", english: "The boss is calling" },
                { thai: "", roman: "jo-naai kon mi km-ngat mak", english: "The new boss is very strict" },
                { thai: "", roman: "chn chok-dii ti mii jo-naai ti ko-jai luk-nng", english: "I'm lucky to have a boss who understands their employees" }
            ],
            "": [
                { thai: "", roman: "luk-ka maa lew", english: "The customer has arrived" },
                { thai: "", roman: "luk-ka bpr-jam", english: "Regular customer" },
                { thai: "", roman: "dtng duu-lae luk-ka hi dii", english: "Must take good care of customers" },
                { thai: "", roman: "luk-ka rng-rian wa sn-ka mii bpan-ha", english: "The customer complained that the product has problems" }
            ],
            "": [
                { thai: "", roman: "too-r-sp dang mak", english: "The phone is ringing loudly" },
                { thai: "", roman: "b too-r-sp", english: "Phone number" },
                { thai: "", roman: "too-r-sp m-t", english: "Mobile phone" },
                { thai: "", roman: "s-mi ni tk kon chi too-r-sp dt-lt wee-laa", english: "Nowadays everyone uses their phone all the time" }
            ],
            "": [
                { thai: "", roman: "sng ii-meo", english: "Send an email" },
                { thai: "", roman: "chk ii-meo", english: "Check email" },
                { thai: "", roman: "dai rp ii-meo lew", english: "Already received the email" },
                { thai: "", roman: "chn dai ii-meo wan l ri gwa ch-bp", english: "I get over a hundred emails a day" }
            ],
            
            // === HOME & FURNITURE ===
            "": [
                { thai: "", roman: "glp ban", english: "Go home" },
                { thai: "", roman: "ban yu ti-ni", english: "Where is your home?" },
                { thai: "", roman: "yu ban wan-ni", english: "Staying home today" },
                { thai: "", roman: "ban kng chn yu glai jak ti tam-ngaan mak", english: "My home is very far from work" }
            ],
            "": [
                { thai: "", roman: "hng nn", english: "Bedroom" },
                { thai: "", roman: "hng-nam", english: "Bathroom" },
                { thai: "", roman: "hng krua", english: "Kitchen" },
                { thai: "", roman: "hng ni lk dte s-dak s-baai dii", english: "This room is small but comfortable" }
            ],
            "": [
                { thai: "", roman: "bpt bpr-dtuu", english: "Open the door" },
                { thai: "", roman: "bpt bpr-dtuu day", english: "Please close the door" },
                { thai: "", roman: "mii kon k bpr-dtuu", english: "Someone is knocking on the door" },
                { thai: "", roman: "bpr-dtuu ban pang pr lom raeng", english: "The house door broke because of strong wind" }
            ],
            "": [
                { thai: "", roman: "bpt na-dtang", english: "Open the window" },
                { thai: "", roman: "na-dtang hng ni yi", english: "The windows in this room are big" },
                { thai: "", roman: "bpt na-dtang gn nn", english: "Close the windows before sleeping" },
                { thai: "", roman: "bpt na-dtang hi lom ko maa", english: "Open the window to let the breeze in" }
            ],
            "": [
                { thai: "", roman: "dt gin kao", english: "Dining table" },
                { thai: "", roman: "waang bon dt", english: "Put it on the table" },
                { thai: "", roman: "dt tam-ngaan", english: "Work desk" },
                { thai: "", roman: "dt dtua ni tam jak mai sk aa-y gwa ri bpii", english: "This table is made of teak wood over a hundred years old" }
            ],
            "": [
                { thai: "", roman: "nng go-i", english: "Sit on a chair" },
                { thai: "", roman: "go-i dtua ni nm dii", english: "This chair is nicely soft" },
                { thai: "", roman: "dng go-i maa nng", english: "Pull up a chair and sit" },
                { thai: "", roman: "go-i nai p-ft mi dii tam hi bpat lng", english: "The office chair is bad and gives me back pain" }
            ],
            "": [
                { thai: "", roman: "nn dtiang", english: "Sleep on the bed" },
                { thai: "", roman: "dtiang nm mak", english: "The bed is very soft" },
                { thai: "", roman: "dtiang ku r dtiang dao", english: "Double bed or single bed?" },
                { thai: "", roman: "chn s dtiang mi pr dtiang go lk gn bpai", english: "I bought a new bed because the old one was too small" }
            ],
            "": [
                { thai: "", roman: "bpt dtu-yen", english: "Open the refrigerator" },
                { thai: "", roman: "nai dtu-yen mii -rai", english: "What's in the fridge?" },
                { thai: "", roman: "dtu-yen wang bplo", english: "The fridge is empty" },
                { thai: "", roman: "lm bpt dtu-yen tam hi fai-fa sung kn", english: "Forgetting to close the fridge made the electricity bill higher" }
            ],
            
            // === EDUCATION & LEARNING ===
            "": [
                { thai: "", roman: "rian paa-sa tai", english: "Study Thai" },
                { thai: "", roman: "rian ti-ni", english: "Where do you study?" },
                { thai: "", roman: "rian jp lew", english: "Finished studying" },
                { thai: "", roman: "chn rian paa-sa tai pr yak put gp faen dai", english: "I study Thai because I want to be able to talk with my partner" }
            ],
            "": [
                { thai: "", roman: "sn paa-sa", english: "Teach language" },
                { thai: "", roman: "krai sn", english: "Who teaches?" },
                { thai: "", roman: "sn dai dii mak", english: "Teaches very well" },
                { thai: "", roman: "kruu kon ni sn gng mak tam hi ko-jai ngai", english: "This teacher teaches so well that it makes understanding easy" }
            ],
            "": [
                { thai: "", roman: "bpai roong-rian", english: "Go to school" },
                { thai: "", roman: "roong-rian yu gli ban", english: "The school is near home" },
                { thai: "", roman: "roong-rian bpt wan-ni", english: "School is closed today" },
                { thai: "", roman: "luk rian roong-rian rt-t-baan pr ka tm tuk gwa", english: "My child goes to public school because the tuition is cheaper" }
            ],
            "": [
                { thai: "", roman: "rian m-ha-wt-t-yaa-lai", english: "Study at university" },
                { thai: "", roman: "jp m-ha-wt-t-yaa-lai lew", english: "Graduated from university" },
                { thai: "", roman: "m-ha-wt-t-yaa-lai ni dii", english: "Which university is good?" },
                { thai: "", roman: "ko rian m-ha-wt-t-yaa-lai ti -mee-r-gaa si bpii", english: "He studied at university in America for four years" }
            ],
            "": [
                { thai: "", roman: "sp pan", english: "Passed the exam" },
                { thai: "", roman: "sp dtk", english: "Failed the exam" },
                { thai: "", roman: "prng-ni mii sp", english: "Tomorrow there's an exam" },
                { thai: "", roman: "chn an nng-s tng kn pa dtriiam sp", english: "I read books all night to prepare for the exam" }
            ],
            "": [
                { thai: "", roman: "tam gaan-ban", english: "Do homework" },
                { thai: "", roman: "gaan-ban y mak", english: "A lot of homework" },
                { thai: "", roman: "sng gaan-ban lew", english: "Already submitted homework" },
                { thai: "", roman: "kruu hi gaan-ban y jon mi mii wee-laa ln", english: "The teacher gives so much homework there's no time to play" }
            ],
            "": [
                { thai: "", roman: "an nng-s", english: "Read a book" },
                { thai: "", roman: "s nng-s", english: "Buy a book" },
                { thai: "", roman: "nng-s lm ni dii mak", english: "This book is very good" },
                { thai: "", roman: "chn chp an nng-s gn nn tk kn", english: "I like reading books before bed every night" }
            ],
            
            // === ENTERTAINMENT & SPORTS ===
            "": [
                { thai: "", roman: "duu nng", english: "Watch a movie" },
                { thai: "", roman: "nng rang ni s-nk", english: "This movie is fun" },
                { thai: "", roman: "bpai duu nng gan", english: "Let's go watch a movie" },
                { thai: "", roman: "nng tai dt-lk mak gwa nng f-rng", english: "Thai movies are funnier than Western movies" }
            ],
            "": [
                { thai: "", roman: "fang pleeng", english: "Listen to music" },
                { thai: "", roman: "pleeng ni pr mak", english: "This song is very beautiful" },
                { thai: "", roman: "rng pleeng", english: "Sing a song" },
                { thai: "", roman: "chn chp fang pleeng tai pa fk fang sm-niang", english: "I like listening to Thai songs to practice hearing the accent" }
            ],
            "": [
                { thai: "", roman: "ln geem", english: "Play games" },
                { thai: "", roman: "geem ni s-nk", english: "This game is fun" },
                { thai: "", roman: "dtt geem mak", english: "Very addicted to games" },
                { thai: "", roman: "luk-chaai ln geem tng wan jon mi ym tam gaan-ban", english: "My son plays games all day and won't do homework" }
            ],
            "": [
                { thai: "", roman: "ln gii-laa", english: "Play sports" },
                { thai: "", roman: "chp gii-laa -rai", english: "What sport do you like?" },
                { thai: "", roman: "gii-laa dii dt sk-k-pap", english: "Sports are good for health" },
                { thai: "", roman: "chn ln gii-laa tk wan pa hi rang-gaai keng-raeng", english: "I play sports every day to keep my body strong" }
            ],
            "": [
                { thai: "", roman: "ln ft-bn", english: "Play football" },
                { thai: "", roman: "duu ft-bn", english: "Watch football" },
                { thai: "", roman: "tiim ft-bn tai", english: "Thai football team" },
                { thai: "", roman: "kon tai chp duu ft-bn prii-mia liik mak", english: "Thai people really like watching the Premier League" }
            ],
            "": [
                { thai: "", roman: "wai-nam bpen mi", english: "Can you swim?" },
                { thai: "", roman: "chp wai-nam", english: "Like to swim" },
                { thai: "", roman: "bpai wai-nam tk chao", english: "Go swimming every morning" },
                { thai: "", roman: "wai-nam bpen gaan k-gam-lang-gaai ti dii ti-st", english: "Swimming is the best exercise" }
            ],
            "": [
                { thai: "", roman: "pk-pn bang", english: "Rest a bit" },
                { thai: "", roman: "dtng-gaan pk-pn", english: "Need to rest" },
                { thai: "", roman: "wan yt bpai pk-pn", english: "Go rest on the day off" },
                { thai: " ", roman: "tam-ngaan nk maa lai dan lew dtng bpai pk-pn bang", english: "I've been working hard for many months, need to take a break" }
            ],
            
            // === MORE COMMON VERBS ===
            "": [
                { thai: "", roman: "chp mak", english: "Like it a lot" },
                { thai: "", roman: "chp -rai", english: "What do you like?" },
                { thai: "", roman: "mi chp li", english: "Don't like it at all" },
                { thai: "", roman: "chn chp mang tai pr aa-han -ri le kon jai-dii", english: "I like Thailand because the food is delicious and people are kind" }
            ],
            "": [
                { thai: "", roman: "yak gin", english: "Want to eat" },
                { thai: "", roman: "yak bpai mi", english: "Do you want to go?" },
                { thai: "", roman: "mi yak tam", english: "Don't want to do it" },
                { thai: "", roman: "chn yak put paa-sa tai dai klng man kon tai", english: "I want to speak Thai fluently like Thai people" }
            ],
            "": [
                { thai: "", roman: "dtng bpai", english: "Must go" },
                { thai: "", roman: "dtng tam", english: "Must do it" },
                { thai: "", roman: "mi dtng", english: "Don't have to" },
                { thai: "", roman: "ta yak gng paa-sa dtng fk tk wan", english: "If you want to be good at a language, you must practice every day" }
            ],
            "": [
                { thai: "", roman: "dai li", english: "Go ahead / Sure" },
                { thai: "", roman: "tam dai", english: "Can do it" },
                { thai: "", roman: "dai-yin mi", english: "Can you hear?" },
                { thai: "", roman: "chn put paa-sa tai dai nt-ni dte yang mi klng", english: "I can speak Thai a little bit but not fluently yet" }
            ],
            "": [
                { thai: "", roman: "mi ru", english: "Don't know" },
                { thai: "", roman: "ru lew", english: "Already know" },
                { thai: "", roman: "ru-jk mi", english: "Do you know (someone)?" },
                { thai: "", roman: "chn ru wa paa-sa tai yak dte g mi ym pe", english: "I know Thai is hard but I won't give up" }
            ],
            "": [
                { thai: "", roman: "ko-jai mi", english: "Do you understand?" },
                { thai: "", roman: "ko-jai lew", english: "Understood" },
                { thai: "", roman: "mi ko-jai", english: "Don't understand" },
                { thai: " ", roman: "put cha cha ni dai mi chn mi ki ko-jai", english: "Can you speak slowly please? I don't really understand" }
            ],
            "": [
                { thai: "", roman: "kt -rai", english: "What are you thinking?" },
                { thai: "", roman: "kt wa dii", english: "Think it's good" },
                { thai: "...", roman: "chn kt wa...", english: "I think that..." },
                { thai: "", roman: "pm kt wa paa-sa tai bpen paa-sa ti say mak", english: "I think Thai is a very beautiful language" }
            ],
            "": [
                { thai: "", roman: "chay day", english: "Help!" },
                { thai: "", roman: "chay ni", english: "Please help" },
                { thai: "", roman: "chay dai mi", english: "Can you help?" },
                { thai: "", roman: "chay put cha cha ni dai mi krp", english: "Could you please speak more slowly?" }
            ],
            "": [
                { thai: "", roman: "r bpep", english: "Wait a moment" },
                { thai: "", roman: "r naan mi", english: "Did you wait long?" },
                { thai: "", roman: "r gn n", english: "Wait first, okay?" },
                { thai: "", roman: "chn r maa sng cha-moong lew dte ko yang mi maa", english: "I've been waiting for two hours but he still hasn't come" }
            ],
            "": [
                { thai: "", roman: "ha -rai", english: "What are you looking for?" },
                { thai: "", roman: "ha j lew", english: "Found it" },
                { thai: "", roman: "ha mi j", english: "Can't find it" },
                { thai: "", roman: "chn ha gun-jae maa sp naa-tii lew dte ha mi j", english: "I've been looking for my keys for ten minutes but can't find them" }
            ],
            "": [
                { thai: "", roman: "chi an ni", english: "Use this one" },
                { thai: "", roman: "chi dai", english: "Can use it / It works" },
                { thai: "", roman: "chi yang-ngai", english: "How do you use it?" },
                { thai: "", roman: "kon tai chi soo-chian mii-dia y mak", english: "Thai people use social media a lot" }
            ],
            
            // === CLOTHING & ACCESSORIES ===
            "": [
                { thai: "", roman: "si sa", english: "Wear a shirt" },
                { thai: "", roman: "sa dtua ni say", english: "This shirt is beautiful" },
                { thai: "", roman: "s sa mi", english: "Buy a new shirt" },
                { thai: " ", roman: "sa dtua ni yi gn bpai mii sai lk gwa ni mi", english: "This shirt is too big, do you have a smaller size?" }
            ],
            "": [
                { thai: "", roman: "gaang-geeng yiin", english: "Jeans" },
                { thai: "", roman: "si gaang-geeng ka sn", english: "Wear shorts" },
                { thai: "", roman: "gaang-geeng dtua ni p-dii", english: "These pants fit well" },
                { thai: "", roman: "chn chp si gaang-geeng mak gwa gr-bproong", english: "I prefer wearing pants over skirts" }
            ],
            "": [
                { thai: "", roman: "tt rng-tao", english: "Take off shoes" },
                { thai: "", roman: "rng-tao ku mi", english: "New pair of shoes" },
                { thai: "", roman: "rng-tao kp", english: "The shoes are tight" },
                { thai: "", roman: "dtng tt rng-tao gn ko ban kon tai", english: "You must take off shoes before entering a Thai home" }
            ],
            "": [
                { thai: "", roman: "gr-bpo dn-taang", english: "Travel bag/suitcase" },
                { thai: "", roman: "lm gr-bpo", english: "Forgot my bag" },
                { thai: "", roman: "gr-bpo nk mak", english: "The bag is very heavy" },
                { thai: "", roman: "ao gr-bpo bpai fak ti roong-raem dai mi", english: "Can I leave my bag at the hotel?" }
            ],
            "": [
                { thai: "", roman: "si wen-dtaa", english: "Wear glasses" },
                { thai: "", roman: "lm wen-dtaa", english: "Forgot my glasses" },
                { thai: "", roman: "wen-dtaa gan-det", english: "Sunglasses" },
                { thai: "", roman: "chn mng mi cht ta mi si wen-dtaa", english: "I can't see clearly if I don't wear glasses" }
            ],
            "": [
                { thai: "", roman: "duu naa-l-gaa", english: "Look at the clock/watch" },
                { thai: "", roman: "naa-l-gaa dn", english: "The clock is working" },
                { thai: "", roman: "naa-l-gaa k-m", english: "Wristwatch" },
                { thai: "", roman: "naa-l-gaa rew bpai ha naa-tii", english: "The clock is five minutes fast" }
            ],
            
            // === WEATHER & SEASONS ===
            "": [
                { thai: "", roman: "aa-gat dii", english: "Nice weather" },
                { thai: "", roman: "aa-gat rn mak", english: "Very hot weather" },
                { thai: "", roman: "aa-gat bpen yang-ngai", english: "How's the weather?" },
                { thai: "", roman: "aa-gat mang tai rn gwa bpr-tet chn y", english: "Thailand's weather is much hotter than my country" }
            ],
            "": [
                { thai: "", roman: "det jt", english: "Strong sunlight" },
                { thai: "", roman: "dtak det", english: "Sunbathe / dry in sun" },
                { thai: "", roman: "rm gan det", english: "Umbrella/parasol" },
                { thai: "", roman: "ya k bpai dtn det jt pr j bpen lom", english: "Don't go out when the sun is strong or you'll faint" }
            ],
            "": [
                { thai: "", roman: "lom raeng", english: "Strong wind" },
                { thai: "", roman: "lom yen", english: "Cool breeze" },
                { thai: "", roman: "lom pt", english: "The wind blows" },
                { thai: "", roman: "wan-ni lom raeng mak jon dn tep mi wi", english: "Today the wind is so strong I can barely walk" }
            ],
            "": [
                { thai: "", roman: "mek mak", english: "Many clouds / Cloudy" },
                { thai: "", roman: "mek si kao", english: "White clouds" },
                { thai: "", roman: "tng-fa mi mii mek", english: "The sky has no clouds" },
                { thai: " ", roman: "duu mek gn nn s na-dtaa man chang", english: "Look at that cloud, it looks like an elephant" }
            ],
            "": [
                { thai: "", roman: "nao mak", english: "Very cold" },
                { thai: "", roman: "nao mi", english: "Are you cold?" },
                { thai: "", roman: "r-duu nao", english: "Winter" },
                { thai: "", roman: "chiang-mi nao gwa grung-typ y", english: "Chiang Mai is much colder than Bangkok" }
            ],
            "": [
                { thai: "", roman: "rn mak", english: "Very hot" },
                { thai: "", roman: "r-duu rn", english: "Summer/hot season" },
                { thai: "", roman: "rn jon nga k", english: "So hot I'm sweating" },
                { thai: "", roman: "mang tai rn dt-lt tng bpii yk-wn na nao", english: "Thailand is hot all year except winter" }
            ],
            
            // === DIRECTIONS & LOCATION ===
            "": [
                { thai: "", roman: "lao sai", english: "Turn left" },
                { thai: "", roman: "taang sai m", english: "On the left side" },
                { thai: "", roman: "yu taang sai", english: "It's on the left" },
                { thai: "", roman: "lao sai lew dtrong bpai ik ri met", english: "Turn left then go straight another 100 meters" }
            ],
            "": [
                { thai: "", roman: "lao kwa", english: "Turn right" },
                { thai: "", roman: "taang kwa m", english: "On the right side" },
                { thai: "", roman: "mng kwa", english: "Look right" },
                { thai: "", roman: "hng-nam yu taang kwa st taang", english: "The bathroom is at the end on the right" }
            ],
            "": [
                { thai: "", roman: "dtrong bpai", english: "Go straight" },
                { thai: "", roman: "dtrong ni", english: "Right here" },
                { thai: "", roman: "dtrong kam", english: "Opposite / Across" },
                { thai: "", roman: "dtrong bpai ray ray jon tng si-yek", english: "Go straight until you reach the intersection" }
            ],
            "": [
                { thai: "", roman: "yu gli mi", english: "Is it nearby?" },
                { thai: "", roman: "gli mak", english: "Very close" },
                { thai: "", roman: "yu gli gli", english: "It's nearby" },
                { thai: "", roman: "ran aa-han gli ti-st yu ti-ni", english: "Where is the nearest restaurant?" }
            ],
            "": [
                { thai: "", roman: "glai mak", english: "Very far" },
                { thai: "", roman: "glai mi", english: "Is it far?" },
                { thai: "", roman: "mi glai", english: "Not far" },
                { thai: "", roman: "jak ti-ni bpai s-nam-bin glai mi", english: "Is the airport far from here?" }
            ],
            "": [
                { thai: "", roman: "yu kang-bon", english: "It's upstairs/above" },
                { thai: "", roman: "chn kang-bon", english: "Upper floor" },
                { thai: "", roman: "waang wi kang-bon", english: "Put it on top" },
                { thai: " ", roman: "hng-nn yu kang-bon hng-nng-ln yu kang-lang", english: "Bedroom is upstairs, living room is downstairs" }
            ],
            "": [
                { thai: "", roman: "yu kang-lang", english: "It's downstairs/below" },
                { thai: "", roman: "long bpai kang-lang", english: "Go downstairs" },
                { thai: "", roman: "r kang-lang", english: "Wait downstairs" },
                { thai: "", roman: "ran aa-han yu kang-lang dtk", english: "The restaurant is at the bottom of the building" }
            ],
            
            // === COOKING & TASTE ===
            "": [
                { thai: "", roman: "-ri mak", english: "Very delicious" },
                { thai: "", roman: "-ri mi", english: "Is it delicious?" },
                { thai: "", roman: "mi -ri li", english: "Not delicious at all" },
                { thai: "", roman: "aa-han tai -ri ti-st nai lok", english: "Thai food is the most delicious in the world" }
            ],
            "": [
                { thai: "", roman: "pt mak", english: "Very spicy" },
                { thai: "", roman: "mi pt", english: "Not spicy" },
                { thai: "", roman: "pt mi", english: "Is it spicy?" },
                { thai: "", roman: "kon tai chp gin pt mak gwa kon dtang-chat", english: "Thai people like eating spicy more than foreigners" }
            ],
            "": [
                { thai: "", roman: "wan mak", english: "Very sweet" },
                { thai: "", roman: "wan bpai", english: "Too sweet" },
                { thai: "", roman: "mi wan", english: "Not sweet" },
                { thai: "", roman: "k mi wan n k", english: "Not sweet please (female)" }
            ],
            "": [
                { thai: "", roman: "kem bpai", english: "Too salty" },
                { thai: "", roman: "mi kem", english: "Not salty" },
                { thai: "", roman: "kem p-dii", english: "Just right saltiness" },
                { thai: "", roman: "aa-han kem mi dii dt sk-k-pap", english: "Salty food is not good for health" }
            ],
            "": [
                { thai: "", roman: "bprao mak", english: "Very sour" },
                { thai: "", roman: "dtm-yam dtng bprao", english: "Tom yum must be sour" },
                { thai: "", roman: "m-naao bprao", english: "Lime is sour" }
            ],
            
            // === ABSTRACT & CONCEPTS ===
            "": [
                { thai: "", roman: "mi mii wee-laa", english: "No time / Don't have time" },
                { thai: "", roman: "wee-laa to-ri", english: "What time is it?" },
                { thai: "", roman: "chi wee-laa naan", english: "Takes a long time" },
                { thai: "", roman: "wee-laa pan bpai rew mak ma yu gp kon ti rk", english: "Time passes quickly when with someone you love" }
            ],
            "": [
                { thai: "", roman: "mii bpan-ha", english: "Have a problem" },
                { thai: "", roman: "mi mii bpan-ha", english: "No problem" },
                { thai: "", roman: "bpan-ha yi", english: "Big problem" },
                { thai: "", roman: "tk bpan-ha mii taang-k s-m", english: "Every problem always has a solution" }
            ],
            "": [
                { thai: "", roman: "mii oo-gat", english: "Have a chance" },
                { thai: "", roman: "oo-gat dii", english: "Good opportunity" },
                { thai: "", roman: "mi mii oo-gat", english: "No chance" },
                { thai: "", roman: "ya bpli hi oo-gat lt m bpai", english: "Don't let the opportunity slip away" }
            ],
            "": [
                { thai: "", roman: "mii kwaam-sk", english: "Be happy" },
                { thai: "", roman: "k hi mii kwaam-sk", english: "Wish you happiness" },
                { thai: "", roman: "kwaam-sk ti te-jing", english: "True happiness" },
                { thai: "", roman: "kwaam-sk mi dai maa jak ngn s-m bpai", english: "Happiness doesn't always come from money" }
            ],
            "": [
                { thai: "", roman: "mii kwaam-ru", english: "Have knowledge" },
                { thai: "", roman: "kwaam-ru mak", english: "A lot of knowledge" },
                { thai: "", roman: "beng-bpan kwaam-ru", english: "Share knowledge" },
                { thai: "", roman: "kwaam-ru k am-nat", english: "Knowledge is power" }
            ],
            "": [
                { thai: "", roman: "mii bpr-sp-gaan", english: "Have experience" },
                { thai: "", roman: "bpr-sp-gaan dii", english: "Good experience" },
                { thai: "", roman: "mi mii bpr-sp-gaan", english: "No experience" },
                { thai: "", roman: "bpr-sp-gaan sm-kan gwa bai bp-rin-yaa", english: "Experience is more important than a degree" }
            ],
            
            // === MORE PHYSICAL ACTIONS ===
            "": [
                { thai: "", roman: "nng long", english: "Sit down" },
                { thai: "", roman: "nng rt", english: "Ride in a car" },
                { thai: "", roman: "nng dtrong ni", english: "Sit here" },
                { thai: "", roman: "chn nng tam-ngaan tng wan jon bpat lng", english: "I sit working all day until my back hurts" }
            ],
            "": [
                { thai: "", roman: "yn dtrong ni", english: "Stand here" },
                { thai: "", roman: "yn r", english: "Stand and wait" },
                { thai: "", roman: "yn naan", english: "Stand for a long time" },
                { thai: "", roman: "yn r rt-mee maa krng cha-moong lew", english: "I've been standing waiting for the bus for half an hour" }
            ],
            "": [
                { thai: "", roman: "bpt bpr-dtuu", english: "Open the door" },
                { thai: "", roman: "bpt fai", english: "Turn on the light" },
                { thai: "", roman: "ran bpt gi moong", english: "What time does the shop open?" },
                { thai: "", roman: "chay bpt na-dtang hi ni dai mi", english: "Can you open the window for me please?" }
            ],
            "": [
                { thai: "", roman: "bpt bpr-dtuu", english: "Close the door" },
                { thai: "", roman: "bpt fai", english: "Turn off the light" },
                { thai: "", roman: "ran bpt lew", english: "The shop is closed" },
                { thai: "", roman: "ya lm bpt ae gn k jak hng", english: "Don't forget to turn off the AC before leaving the room" }
            ],
            "": [
                { thai: "", roman: "yp hi ni", english: "Pick it up for me please" },
                { thai: "", roman: "yp an nn", english: "Pick up that one" },
                { thai: "", roman: "yp kng jak chn", english: "Pick something from the shelf" },
                { thai: "", roman: "chay yp nam nai dtu-yen hi ni", english: "Can you grab water from the fridge for me?" }
            ],
            "": [
                { thai: "", roman: "waang dtrong ni", english: "Put it here" },
                { thai: "", roman: "waang bon dt", english: "Put it on the table" },
                { thai: "", roman: "ya waang dtrong nn", english: "Don't put it there" },
                { thai: "", roman: "waang kng nk nk wi kang-lang", english: "Put heavy things at the bottom" }
            ],
            "": [
                { thai: "", roman: "t -rai", english: "What are you holding?" },
                { thai: "", roman: "t hi ni", english: "Hold this for me" },
                { thai: "", roman: "t nk mi", english: "Is it heavy to hold?" },
                { thai: " ", roman: "chn t kng mi wi lew chay ni dai mi", english: "I can't hold the things anymore, can you help?" }
            ],
            "": [
                { thai: "", roman: "yoon maa li", english: "Throw it here" },
                { thai: "", roman: "ya yoon", english: "Don't throw" },
                { thai: "", roman: "yoon luk-bn", english: "Throw the ball" },
                { thai: "", roman: "yoon k-y long tng day", english: "Throw the trash in the bin please" }
            ],
            "": [
                { thai: "", roman: "dng bpr-dtuu", english: "Pull the door" },
                { thai: "", roman: "dng raeng raeng", english: "Pull hard" },
                { thai: "", roman: "dng k", english: "Pull out" },
                { thai: "", roman: "bpr-dtuu ni dtng dng mi chi plk", english: "This door you have to pull, not push" }
            ],
            "": [
                { thai: "", roman: "plk bpr-dtuu", english: "Push the door" },
                { thai: "", roman: "ya plk", english: "Don't push" },
                { thai: "", roman: "plk bao bao", english: "Push gently" },
                { thai: "", roman: "plk rt ti jt kwang taang", english: "Push the car that's blocking the way" }
            ],
            "": [
                { thai: "", roman: "lang m", english: "Wash hands" },
                { thai: "", roman: "lang jaan", english: "Wash dishes" },
                { thai: "", roman: "lang rt", english: "Wash the car" },
                { thai: "", roman: "dtng lang m gn gin kao tk krng", english: "Must wash hands before eating every time" }
            ],
            "": [
                { thai: "", roman: "cht dt", english: "Wipe the table" },
                { thai: "", roman: "cht dtua", english: "Dry off (body)" },
                { thai: "", roman: "cht m", english: "Wipe hands" },
                { thai: "", roman: "cht pn hi heng gn j ln", english: "Wipe the floor dry or it'll be slippery" }
            ],
            "": [
                { thai: "", roman: "gwat ban", english: "Sweep the house" },
                { thai: "", roman: "gwat pn", english: "Sweep the floor" },
                { thai: "", roman: "gwat tk wan", english: "Sweep every day" },
                { thai: "", roman: "me hi gwat ban gn bpai ln", english: "Mom told me to sweep the house before going to play" }
            ],
            
            // === MORE FOOD ITEMS ===
            "": [
                { thai: "", roman: "gin gay-dtao", english: "Eat noodles" },
                { thai: "", roman: "gay-dtao nam si", english: "Clear soup noodles" },
                { thai: "", roman: "gay-dtao pt", english: "Stir-fried noodles" },
                { thai: "", roman: "gay-dtao ra bpen aa-han ti dtng lng", english: "Boat noodles is a must-try dish" }
            ],
            "": [
                { thai: "", roman: "k pt-tai", english: "I'd like pad thai" },
                { thai: "", roman: "pt-tai h ki", english: "Pad thai wrapped in egg" },
                { thai: "", roman: "pt-tai -ri mak", english: "Pad thai is very delicious" },
                { thai: "", roman: "pt-tai bpen aa-han tai ti kon dtang-chat ru-jk mak ti-st", english: "Pad thai is the Thai food foreigners know best" }
            ],
            "": [
                { thai: "", roman: "dtm-yam gng", english: "Tom yum with shrimp" },
                { thai: "", roman: "dtm-yam pt mak", english: "Tom yum is very spicy" },
                { thai: "", roman: "k dtm-yam mi pt", english: "Tom yum not spicy please" },
                { thai: "", roman: "dtm-yam dtng mii rt bprao le pt", english: "Tom yum must have sour and spicy taste" }
            ],
            "": [
                { thai: "", roman: "sm-dtam tai", english: "Thai papaya salad" },
                { thai: "", roman: "sm-dtam bpuu bplaa-ra", english: "Papaya salad with crab and fermented fish" },
                { thai: "", roman: "sm-dtam pt mak", english: "Papaya salad is very spicy" },
                { thai: "", roman: "kon ii-san gin sm-dtam tk wan", english: "Isaan people eat som tam every day" }
            ],
            "": [
                { thai: "", roman: "gaeng kao wan", english: "Green curry" },
                { thai: "", roman: "gaeng pt", english: "Spicy curry" },
                { thai: "", roman: "gaeng mt-s-mn", english: "Massaman curry" },
                { thai: "", roman: "gaeng tai dtang jak gaeng in-dia", english: "Thai curry is different from Indian curry" }
            ],
            "": [
                { thai: "", roman: "kao nao m-mang", english: "Sticky rice with mango" },
                { thai: "", roman: "gin kao nao", english: "Eat sticky rice" },
                { thai: "", roman: "kao nao mu bpng", english: "Sticky rice with grilled pork" },
                { thai: "", roman: "kon ii-san gin kao nao taen kao say", english: "Isaan people eat sticky rice instead of steamed rice" }
            ],
            "": [
                { thai: "", roman: "gng st", english: "Fresh shrimp" },
                { thai: "", roman: "gng po", english: "Grilled shrimp" },
                { thai: "", roman: "pe gng", english: "Allergic to shrimp" },
                { thai: "", roman: "gng me-nam yi gwa gng t-lee", english: "River prawns are bigger than sea shrimp" }
            ],
            "": [
                { thai: "", roman: "gi tt", english: "Fried chicken" },
                { thai: "", roman: "gi yang", english: "Grilled chicken" },
                { thai: "", roman: "kao man gi", english: "Chicken rice" },
                { thai: "", roman: "gi tt hat-yi bpen gi tt ti dang ti-st", english: "Hat Yai fried chicken is the most famous fried chicken" }
            ],
            "": [
                { thai: "", roman: "m-mang sk", english: "Ripe mango" },
                { thai: "", roman: "m-mang bprao", english: "Sour mango" },
                { thai: "", roman: "chp gin m-mang", english: "Like to eat mango" },
                { thai: "", roman: "m-mang nam-dk-mai bpen m-mang ti -ri ti-st", english: "Nam dok mai mango is the most delicious mango" }
            ],
            "": [
                { thai: "", roman: "t-rian mn-tng", english: "Monthong durian" },
                { thai: "", roman: "t-rian mii gln raeng", english: "Durian has a strong smell" },
                { thai: "", roman: "ham nam t-rian ko roong-raem", english: "Durian not allowed in hotel" },
                { thai: "", roman: "kon tai rk t-rian dte kon dtang-chat lai kon mi chp", english: "Thais love durian but many foreigners don't like it" }
            ],
            
            // === MORE PLACES ===
            "": [
                { thai: "", roman: "bpai roong-p-yaa-baan", english: "Go to the hospital" },
                { thai: "", roman: "roong-p-yaa-baan yu ni", english: "Where is the hospital?" },
                { thai: "", roman: "nn roong-p-yaa-baan", english: "Stay in hospital" },
                { thai: "", roman: "roong-p-yaa-baan rt tuk gwa ek-g-chon", english: "Public hospitals are cheaper than private ones" }
            ],
            "": [
                { thai: "", roman: "bpai t-naa-kaan", english: "Go to the bank" },
                { thai: "", roman: "t-naa-kaan bpt lew", english: "The bank is closed" },
                { thai: "", roman: "bpt ban-chii t-naa-kaan", english: "Open a bank account" },
                { thai: "", roman: "t-naa-kaan nai tai bpt bai sam moong krng", english: "Banks in Thailand close at 3:30 PM" }
            ],
            "": [
                { thai: "", roman: "bpai wt", english: "Go to the temple" },
                { thai: "", roman: "wt poo", english: "Wat Pho temple" },
                { thai: "", roman: "tam bun ti wt", english: "Make merit at temple" },
                { thai: "", roman: "kon tai bpai wt dtn wan-pr", english: "Thai people go to temple on Buddhist holy days" }
            ],
            "": [
                { thai: "", roman: "bpai s-nam-bin", english: "Go to the airport" },
                { thai: "", roman: "tng s-nam-bin", english: "Arrive at airport" },
                { thai: "", roman: "s-nam-bin s-wan-n-puum", english: "Suvarnabhumi Airport" },
                { thai: "", roman: "dtng bpai tng s-nam-bin lang-na sng cha-moong", english: "Must arrive at airport two hours early" }
            ],
            "": [
                { thai: "", roman: "bpai hang", english: "Go to the mall" },
                { thai: "", roman: "hang yi mak", english: "The mall is very big" },
                { thai: "", roman: "dn hang", english: "Walk around the mall" },
                { thai: "", roman: "hang nai grung-typ mii ae yen mak", english: "Malls in Bangkok have very cold AC" }
            ],
            "": [
                { thai: "", roman: "dtk sung", english: "Tall building" },
                { thai: "", roman: "dtk ni", english: "This building" },
                { thai: "", roman: "tam-ngaan dtk ni", english: "Which building do you work in?" },
                { thai: "", roman: "dtk m-ha-n-kn bpen dtk ti sung ti-st nai grung-typ", english: "MahaNakhon is the tallest building in Bangkok" }
            ],
            
            // === MORE ADJECTIVES ===
            "": [
                { thai: "", roman: "ngai mak", english: "Very easy" },
                { thai: "", roman: "mi ngai", english: "Not easy" },
                { thai: "", roman: "ngai gwa ti kt", english: "Easier than expected" },
                { thai: "", roman: "paa-sa tai mi ngai dte g mi yak gn bpai", english: "Thai isn't easy but it's not too hard either" }
            ],
            "": [
                { thai: "", roman: "yak mak", english: "Very difficult" },
                { thai: "", roman: "mi yak", english: "Not difficult" },
                { thai: "", roman: "yak gwa ti kt", english: "Harder than expected" },
                { thai: "", roman: "gaan k-sang paa-sa tai yak sm-rp kon dtang-chat", english: "Thai pronunciation is difficult for foreigners" }
            ],
            "": [
                { thai: "", roman: "rew mak", english: "Very fast" },
                { thai: "", roman: "put rew", english: "Speak fast" },
                { thai: "", roman: "maa rew gwa ti kt", english: "Came faster than expected" },
                { thai: "", roman: "kon tai put rew mak jon fang mi tan", english: "Thai people speak so fast I can't catch it" }
            ],
            "": [
                { thai: "", roman: "cha mak", english: "Very slow" },
                { thai: "", roman: "put cha cha", english: "Speak slowly" },
                { thai: "", roman: "maa cha", english: "Come late" },
                { thai: "", roman: "chay put cha cha ni dai mi krp", english: "Could you please speak more slowly?" }
            ],
            "": [
                { thai: "", roman: "s-at mak", english: "Very clean" },
                { thai: "", roman: "mi s-at", english: "Not clean" },
                { thai: "", roman: "tam hi s-at", english: "Make it clean" },
                { thai: "", roman: "hng-nam s-at mak na bpr-tp-jai", english: "The bathroom is so clean, impressive" }
            ],
            "": [
                { thai: "", roman: "sk-g-bprk mak", english: "Very dirty" },
                { thai: "", roman: "sa sk-g-bprk", english: "Dirty shirt" },
                { thai: "", roman: "ya tam hi sk-g-bprk", english: "Don't make it dirty" },
                { thai: "", roman: "m sk-g-bprk dtng lang gn gin kao", english: "Dirty hands must wash before eating" }
            ],
            "": [
                { thai: "", roman: "ngap mak", english: "Very quiet" },
                { thai: "", roman: "ngap ni", english: "Be quiet please" },
                { thai: "", roman: "ti-ni ngap dii", english: "It's nicely quiet here" },
                { thai: "", roman: "hng-s-mt dtng ngap", english: "The library must be quiet" }
            ],
            "": [
                { thai: "", roman: "dang mak", english: "Very loud" },
                { thai: "", roman: "put dang dang", english: "Speak loudly" },
                { thai: "", roman: "sang dang", english: "Loud noise" },
                { thai: "", roman: "tam-mai bpt pleeng dang yang ni", english: "Why is the music so loud?" }
            ],
            "": [
                { thai: "", roman: "nk mak", english: "Very heavy" },
                { thai: "", roman: "mi nk", english: "Not heavy" },
                { thai: "", roman: "gr-bpo nk", english: "Heavy bag" },
                { thai: "", roman: "kng nk gn bpai yk mi wi", english: "The stuff is too heavy, can't lift it" }
            ],
            "": [
                { thai: "", roman: "bao mak", english: "Very light" },
                { thai: "", roman: "bao gwa ti kt", english: "Lighter than expected" },
                { thai: "", roman: "put bao bao", english: "Speak softly" },
                { thai: "", roman: "gr-bpo bao dii yk s-baai", english: "Light bag, easy to carry" }
            ],
            
            // === COMMUNICATION & SOCIAL ===
            "": [
                { thai: "", roman: "too ha", english: "Call (someone)" },
                { thai: "", roman: "too glp", english: "Call back" },
                { thai: "", roman: "too maa tam-mai", english: "Why did you call?" },
                { thai: "", roman: "chn j too glp tii-lng dai mi", english: "Can I call back later?" }
            ],
            "": [
                { thai: "", roman: "sng k-kwaam", english: "Send a message" },
                { thai: "", roman: "sng ii-meo", english: "Send email" },
                { thai: "", roman: "sng kng", english: "Send things/deliver" },
                { thai: "", roman: "chay sng fai maa hi ni dai mi", english: "Can you send the file to me?" }
            ],
            "": [
                { thai: "", roman: "rp sai", english: "Answer the phone" },
                { thai: "", roman: "rp kng", english: "Receive things" },
                { thai: "", roman: "rp lew", english: "Already received" },
                { thai: "", roman: "yang mi dai rp k-kwaam", english: "Haven't received the message yet" }
            ],
            "": [
                { thai: "", roman: "tam -rai", english: "Ask what?" },
                { thai: "", roman: "k tam ni", english: "May I ask something?" },
                { thai: "", roman: "tam taang", english: "Ask for directions" },
                { thai: "", roman: "mi gla tam pr aai", english: "Don't dare ask because I'm shy" }
            ],
            "": [
                { thai: "", roman: "dtp kam-tam", english: "Answer the question" },
                { thai: "", roman: "dtp lew", english: "Already answered" },
                { thai: "", roman: "mi dtp", english: "No answer" },
                { thai: "", roman: "tam-mai mi dtp k-kwaam", english: "Why didn't you reply to the message?" }
            ],
            "": [
                { thai: "", roman: "bk -rai", english: "Tell what?" },
                { thai: "", roman: "bk lew", english: "Already told" },
                { thai: "", roman: "bk gn", english: "Tell me first" },
                { thai: "", roman: "tam-mai mi bk dtng-dte rek", english: "Why didn't you tell me from the start?" }
            ],
            "": [
                { thai: "", roman: "-t-baai ni", english: "Please explain" },
                { thai: "", roman: "-t-baai dai mi", english: "Can you explain?" },
                { thai: "", roman: "-t-baai ik tii", english: "Explain again" },
                { thai: "", roman: "chay -t-baai hi ngai gwa ni dai mi", english: "Can you explain more simply?" }
            ],
            "": [
                { thai: "", roman: "ne-nam dtua", english: "Introduce yourself" },
                { thai: "", roman: "ne-nam ran", english: "Recommend a restaurant" },
                { thai: "", roman: "k ne-nam", english: "Let me recommend" },
                { thai: "", roman: "chay ne-nam aa-han -ri -ri ni dai mi", english: "Can you recommend some delicious food?" }
            ],
            "": [
                { thai: "", roman: "chn krp", english: "Please (go ahead) / Welcome" },
                { thai: "", roman: "chn nng", english: "Please sit" },
                { thai: "", roman: "chn taang ni", english: "This way please" },
                { thai: "", roman: "chn ko maa kang-nai li krp", english: "Please come inside" }
            ],
            "": [
                { thai: "", roman: "yin-dii krp", english: "You're welcome / With pleasure" },
                { thai: "", roman: "yin-dii ti dai ru-jk", english: "Nice to meet you" },
                { thai: "", roman: "yin-dii chay", english: "Happy to help" },
                { thai: "", roman: "yin-dii dtn-rp su bpr-tet tai", english: "Welcome to Thailand" }
            ],
            
            // === MORE COMMON WORDS ===
            "": [
                { thai: "", roman: "jing r", english: "Really?" },
                { thai: "", roman: "put jing", english: "Speak the truth" },
                { thai: "", roman: "rang jing", english: "True story" },
                { thai: "", roman: "mi yak cha wa bpen rang jing", english: "Don't want to believe it's true" }
            ],
            "": [
                { thai: "", roman: "pt lew", english: "It's wrong" },
                { thai: "", roman: "tam pt", english: "Made a mistake" },
                { thai: "", roman: "pt taang", english: "Wrong way" },
                { thai: " ", roman: "k-tot chn pt eeng", english: "Sorry, it's my fault" }
            ],
            "": [
                { thai: "", roman: "tuk dtng", english: "Correct" },
                { thai: "", roman: "tuk lew", english: "That's right" },
                { thai: "", roman: "kam-dtp tuk", english: "The answer is correct" },
                { thai: " ", roman: "tuk dtng lew krp gng mak", english: "That's correct, very good!" }
            ],
            "": [
                { thai: "", roman: "sm-kan mak", english: "Very important" },
                { thai: "", roman: "mi sm-kan", english: "Not important" },
                { thai: "", roman: "rang sm-kan", english: "Important matter" },
                { thai: "", roman: "sk-k-pap sm-kan ti-st", english: "Health is most important" }
            ],
            "": [
                { thai: "", roman: "p-set mak", english: "Very special" },
                { thai: "", roman: "wan p-set", english: "Special day" },
                { thai: "", roman: "mi mii -rai p-set", english: "Nothing special" },
                { thai: "", roman: "wan-ni bpen wan p-set kng rao", english: "Today is our special day" }
            ],
            "": [
                { thai: "", roman: "kon tam-m-daa", english: "Ordinary person" },
                { thai: "", roman: "tam-m-daa mak", english: "Very ordinary" },
                { thai: " ", roman: "mi mii -rai p-set ke tam-m-daa", english: "Nothing special, just ordinary" },
                { thai: "", roman: "aa-han ran ni tam-m-daa mi dai -ri mak", english: "This restaurant's food is ordinary, not very delicious" }
            ],
            "": [
                { thai: "", roman: "bplek mak", english: "Very strange" },
                { thai: "", roman: "mi bplek", english: "Not strange" },
                { thai: "", roman: "ru-sk bplek bplek", english: "Feel strange" },
                { thai: "", roman: "bplek-jai ti ko mi maa", english: "Surprised that he didn't come" }
            ],
            "": [
                { thai: "", roman: "man gan", english: "Same / Me too" },
                { thai: "", roman: "man dm", english: "Same as before" },
                { thai: "", roman: "na-dtaa man p", english: "Looks like father" },
                { thai: "", roman: "aa-han tai mi man aa-han jiin", english: "Thai food is not like Chinese food" }
            ],
            "": [
                { thai: "", roman: "dtang gan", english: "Different" },
                { thai: "", roman: "dtang-chat", english: "Foreigner" },
                { thai: "", roman: "dtang-jang-wt", english: "Other provinces" },
                { thai: "", roman: "wt-t-n-tam tai dtang jak dt-wan-dtk mak", english: "Thai culture is very different from Western" }
            ],
            "": [
                { thai: "", roman: "kon diao gan", english: "The same person" },
                { thai: "", roman: "ti diao gan", english: "Same place" },
                { thai: "", roman: "wee-laa diao gan", english: "Same time" },
                { thai: "", roman: "rao tam-ngaan b-r-st diao gan", english: "We work at the same company" }
            ],
            
            // === MORE VERBS ===
            "": [
                { thai: "", roman: "lng duu", english: "Try and see" },
                { thai: "", roman: "lng gin ni", english: "Try eating a bit" },
                { thai: "", roman: "lng si duu", english: "Try it on" },
                { thai: "", roman: "lng tam duu gn lew ki tam", english: "Try doing it first, then ask" }
            ],
            "": [
                { thai: "", roman: "bplan jai", english: "Change your mind" },
                { thai: "", roman: "bplan sa", english: "Change clothes" },
                { thai: "", roman: "bplan-bplaeng", english: "Change/transform" },
                { thai: "", roman: "s-pap aa-gat bplan-bplaeng bi mak", english: "The weather changes very often" }
            ],
            "": [
                { thai: "", roman: "ge bpan-ha", english: "Solve a problem" },
                { thai: "", roman: "ge-ki", english: "Fix/correct" },
                { thai: "", roman: "ge dtua", english: "Make excuses" },
                { thai: "", roman: "dtng ha taang ge bpan-ha ni hi dai", english: "Must find a way to solve this problem" }
            ],
            "": [
                { thai: "", roman: "lak an ni", english: "Choose which one?" },
                { thai: "", roman: "lak mi tuk", english: "Can't choose" },
                { thai: "", roman: "lak lew", english: "Already chosen" },
                { thai: "", roman: "mii y mak lak mi tuk li", english: "There's so much, can't choose at all" }
            ],
            "": [
                { thai: "", roman: "rm lew", english: "Already started" },
                { thai: "", roman: "rm mi", english: "Start again" },
                { thai: "", roman: "rm dtn", english: "Begin" },
                { thai: "", roman: "rao rm rian paa-sa tai ma bpii ti lew", english: "We started learning Thai last year" }
            ],
            "": [
                { thai: "", roman: "jp lew", english: "Finished" },
                { thai: "", roman: "jp gaan-sk-sa", english: "Graduate" },
                { thai: "", roman: "nng jp lew", english: "The movie ended" },
                { thai: "", roman: "rian jp lew j tam -rai dt", english: "After graduating, what will you do next?" }
            ],
            "": [
                { thai: "", roman: "p-yaa-yaam mak", english: "Try hard" },
                { thai: "", roman: "p-yaa-yaam dt bpai", english: "Keep trying" },
                { thai: "", roman: "ya lk p-yaa-yaam", english: "Don't stop trying" },
                { thai: "", roman: "ta p-yaa-yaam mak p g dtng sm-rt", english: "If you try hard enough, you'll succeed" }
            ],
            "": [
                { thai: "", roman: "tam sm-rt", english: "Succeed" },
                { thai: "", roman: "yang mi sm-rt", english: "Not successful yet" },
                { thai: "", roman: "kwaam sm-rt", english: "Success" },
                { thai: "", roman: "kwaam sm-rt maa jak kwaam p-yaa-yaam", english: "Success comes from effort" }
            ],
            "": [
                { thai: "", roman: "lm-leo ik lew", english: "Failed again" },
                { thai: "", roman: "mi glua lm-leo", english: "Not afraid of failure" },
                { thai: "", roman: "lm-leo mi chi jt-jp", english: "Failure is not the end" }
            ],
            "": [
                { thai: "", roman: "jam dai", english: "Remember" },
                { thai: "", roman: "jam mi dai", english: "Can't remember" },
                { thai: "", roman: "jam wi", english: "Remember this" },
                { thai: "", roman: "chn jam ch ko mi dai", english: "I can't remember his name" }
            ],
            "": [
                { thai: "", roman: "lm lew", english: "Forgot already" },
                { thai: "", roman: "ya lm", english: "Don't forget" },
                { thai: "", roman: "lm gun-jae", english: "Forgot the keys" },
                { thai: "", roman: "chn lm kng wi ti ran aa-han", english: "I forgot my stuff at the restaurant" }
            ],
            "": [
                { thai: "", roman: "cha mi", english: "Do you believe?" },
                { thai: "", roman: "mi cha", english: "Don't believe" },
                { thai: "", roman: "cha chn t", english: "Believe me" },
                { thai: "", roman: "mi yak cha wa bpen rang jing", english: "Don't want to believe it's true" }
            ],
            "": [
                { thai: "", roman: "wng wa", english: "Hope that" },
                { thai: "", roman: "mii kwaam-wng", english: "Have hope" },
                { thai: "", roman: "mt wng", english: "Hopeless" },
                { thai: "", roman: "chn wng wa j dai j gan ik", english: "I hope we'll meet again" }
            ],
            "": [
                { thai: "", roman: "mi dtng gang-won", english: "Don't worry" },
                { thai: "", roman: "gang-won mak", english: "Very worried" },
                { thai: "", roman: "gang-won rang -rai", english: "Worried about what?" },
                { thai: "", roman: "me gang-won rang luk dt-lt wee-laa", english: "Mom worries about her children all the time" }
            ],
            "": [
                { thai: "", roman: "dtt-sn-jai lew", english: "Already decided" },
                { thai: "", roman: "dtt-sn-jai mi dai", english: "Can't decide" },
                { thai: "", roman: "yak ti j dtt-sn-jai", english: "Hard to decide" },
                { thai: "", roman: "dtng dtt-sn-jai paai-nai wan-ni", english: "Must decide by today" }
            ],
            "": [
                { thai: "", roman: "mi ym", english: "Refuse / Won't accept" },
                { thai: "", roman: "ym pe", english: "Give up / Surrender" },
                { thai: "", roman: "mi ym pe", english: "Won't give up" },
                { thai: "", roman: "ta mi ym pe g j mi pe", english: "If you don't give up, you won't lose" }
            ],
            "": [
                { thai: "", roman: "pe lew", english: "Lost already" },
                { thai: "", roman: "mi yak pe", english: "Don't want to lose" },
                { thai: "", roman: "pe aa-han", english: "Allergic to food" },
                { thai: "", roman: "tiim tai pe wat-naam", english: "Thai team lost to Vietnam" }
            ],
            "": [
                { thai: "", roman: "ch-n lew", english: "Won already" },
                { thai: "", roman: "yak ch-n", english: "Want to win" },
                { thai: "", roman: "krai ch-n", english: "Who won?" },
                { thai: "", roman: "tiim tai ch-n sam dt sun", english: "Thai team won 3-0" }
            ],
            
            // === RELATIONSHIP WORDS ===
            "": [
                { thai: "", roman: "sa-mii kng chn", english: "My husband" },
                { thai: "", roman: "sa-mii tam-ngaan -rai", english: "What does your husband do?" },
                { thai: "", roman: "sa-mii jai-dii", english: "Husband is kind" },
                { thai: "", roman: "sa-mii le pan-r-yaa dtng chay gan", english: "Husband and wife must help each other" }
            ],
            "": [
                { thai: "", roman: "pan-r-yaa kng pm", english: "My wife" },
                { thai: "", roman: "pan-r-yaa say mak", english: "Wife is very beautiful" },
                { thai: "", roman: "paa pan-r-yaa maa day", english: "Bring your wife too" }
            ],
            "": [
                { thai: "", roman: "dteng-ngaan lew", english: "Already married" },
                { thai: "", roman: "yang mi dteng-ngaan", english: "Not married yet" },
                { thai: "", roman: "j dteng-ngaan ma-ri", english: "When will you get married?" },
                { thai: "", roman: "ko dteng-ngaan gan ma ha bpii ti lew", english: "They got married five years ago" }
            ],
            "": [
                { thai: "", roman: "lk gan", english: "Break up" },
                { thai: "", roman: "lk ngaan", english: "Finish work" },
                { thai: "", roman: "lk tam", english: "Stop doing" },
                { thai: "", roman: "lk ngaan gi moong", english: "What time do you finish work?" }
            ],
            "": [
                { thai: "", roman: "ya gan", english: "Divorce" },
                { thai: "", roman: "ya lew", english: "Already divorced" },
                { thai: "", roman: "mi yak ya", english: "Don't want to divorce" }
            ],
            "": [
                { thai: "", roman: "j gan", english: "Meet each other" },
                { thai: "", roman: "j gan ti-ni", english: "Where shall we meet?" },
                { thai: "", roman: "dii-jai ti dai j", english: "Happy to meet you" },
                { thai: "", roman: "wi j gan mi n", english: "See you again later" }
            ],
            "": [
                { thai: "", roman: "nt gan wi", english: "Made an appointment" },
                { thai: "", roman: "nt j gan", english: "Arrange to meet" },
                { thai: "", roman: "nt m", english: "Doctor appointment" },
                { thai: "", roman: "nt gan gi moong", english: "What time shall we meet?" }
            ],
            
            // === THAI CULTURE WORDS ===
            "": [
                { thai: "", roman: "wi pr", english: "Pay respect to Buddha" },
                { thai: "", roman: "wi kruu", english: "Pay respect to teacher" },
                { thai: "", roman: "s-wt-dii prm wi", english: "Say hello with a wai" },
                { thai: "", roman: "kon tai wi pa s-daeng kwaam kao-rp", english: "Thai people wai to show respect" }
            ],
            "": [
                { thai: "", roman: "tam bun", english: "Make merit" },
                { thai: "", roman: "dai bun", english: "Gain merit" },
                { thai: "", roman: "bun mak", english: "Lots of merit" },
                { thai: "", roman: "kon tai chp bpai tam bun ti wt dtn chao", english: "Thai people like to make merit at temple in the morning" }
            ],
            "": [
                { thai: "", roman: "bpen gam", english: "It's karma" },
                { thai: "", roman: "gam go", english: "Past karma" },
                { thai: " ", roman: "tam dii dai dii tam cha dai cha", english: "Do good get good, do bad get bad" }
            ],
            "": [
                { thai: "", roman: "pr-pt-t-rup", english: "Buddha image" },
                { thai: "", roman: "t-wai pr", english: "Offer to monks" },
                { thai: "", roman: "pr tet", english: "Monk preaches" },
                { thai: "", roman: "pr k bin-t-bat dtn chao", english: "Monks go for alms in the morning" }
            ],
            "": [
                { thai: "", roman: "kao-rp pu-yi", english: "Respect elders" },
                { thai: "", roman: "dtng kao-rp", english: "Must respect" },
                { thai: "", roman: "hi kwaam kao-rp", english: "Give respect" },
                { thai: "", roman: "wt-t-n-tam tai dtng kao-rp pu-yi", english: "Thai culture requires respecting elders" }
            ],
            "": [
                { thai: "", roman: "put s-pap", english: "Speak politely" },
                { thai: "", roman: "bpen kon s-pap", english: "Be a polite person" },
                { thai: "", roman: "s-pap-b-rt", english: "Gentleman" },
                { thai: "", roman: "paa-sa tai mii kam s-pap sm-rp chi gp pu-yi", english: "Thai has polite words for use with elders" }
            ],
            "": [
                { thai: "", roman: "aai mak", english: "Very shy/embarrassed" },
                { thai: "", roman: "mi dtng aai", english: "Don't be shy" },
                { thai: "", roman: "aai ti tam pt", english: "Embarrassed for making a mistake" },
                { thai: "", roman: "ko aai pr put paa-sa tai pt", english: "He's embarrassed because he spoke Thai wrong" }
            ],
            "": [
                { thai: "", roman: "greeng-jai mak", english: "Very considerate/hesitant" },
                { thai: "", roman: "mi dtng greeng-jai", english: "Don't be shy/hesitant" },
                { thai: "", roman: "greeng-jai ti j k", english: "Hesitant to ask" },
                { thai: "", roman: "kon tai greeng-jai gan mak", english: "Thai people are very considerate of each other" }
            ],
            "": [
                { thai: "", roman: "s-nk mak", english: "Very fun" },
                { thai: "", roman: "s-nk mi", english: "Is it fun?" },
                { thai: "", roman: "k hi s-nk", english: "Have fun!" },
                { thai: "", roman: "rian paa-sa tai s-nk mak", english: "Learning Thai is very fun" }
            ],
            "": [
                { thai: "", roman: "ba mak", english: "Very bored" },
                { thai: "", roman: "ba lew", english: "Bored already" },
                { thai: "", roman: "mi ba", english: "Not bored" },
                { thai: "", roman: "nng tam-ngaan tng wan ba mak", english: "Sitting working all day is so boring" }
            ],
            
            // === ADDITIONAL USEFUL WORDS ===
            "": [
                { thai: "", roman: "dtng-jai rian", english: "Study intently" },
                { thai: "", roman: "dtng-jai tam", english: "Do it intentionally" },
                { thai: "", roman: "mi dai dtng-jai", english: "Didn't mean to" },
                { thai: "", roman: "ta dtng-jai rian g dtng gng kn", english: "If you study with focus, you'll improve" }
            ],
            "": [
                { thai: "", roman: "r-wang day", english: "Be careful" },
                { thai: "", roman: "r-wang rt", english: "Watch out for cars" },
                { thai: "", roman: "dtng r-wang", english: "Must be careful" },
                { thai: " ", roman: "r-wang ha n pee-daan dtm", english: "Watch your head, low ceiling" }
            ],
            "": [
                { thai: "", roman: "bplt-pai dii", english: "Safe and sound" },
                { thai: "", roman: "dn-taang bplt-pai", english: "Safe travels" },
                { thai: "", roman: "ti-ni bplt-pai", english: "It's safe here" },
                { thai: "", roman: "bpr-tet tai bplt-pai sm-rp nk-tng-tao", english: "Thailand is safe for tourists" }
            ],
            "": [
                { thai: "", roman: "an-dt-raai mak", english: "Very dangerous" },
                { thai: "", roman: "mi an-dt-raai", english: "Not dangerous" },
                { thai: " ", roman: "r-wang an-dt-raai", english: "Careful, danger" },
                { thai: "", roman: "kp rt rew an-dt-raai mak", english: "Driving fast is very dangerous" }
            ],
            "": [
                { thai: "", roman: "ra sm-pao", english: "Junk boat" },
                { thai: "", roman: "rup sm-pao tng", english: "Golden junk image" }
            ],
            "": [
                { thai: "", roman: "fk put", english: "Practice speaking" },
                { thai: "", roman: "fk tk wan", english: "Practice every day" },
                { thai: "", roman: "dtng fk bi bi", english: "Must practice often" },
                { thai: "", roman: "paa-sa dtng fk tk wan tng j gng", english: "Language must be practiced daily to be good" }
            ],
            "": [
                { thai: "", roman: "gng mak", english: "Very good/skilled" },
                { thai: "", roman: "gng kn", english: "Getting better" },
                { thai: "", roman: "put tai gng", english: "Speak Thai well" },
                { thai: "", roman: "kun gng mak ti rian paa-sa tai dai rew", english: "You're so good at learning Thai quickly" }
            ],
            "": [
                { thai: "", roman: "ye mak", english: "Very bad" },
                { thai: "", roman: "s-pap ye", english: "Bad condition" },
                { thai: "", roman: "ru-sk ye", english: "Feel bad" },
                { thai: "", roman: "wan-ni aa-rom ye pr nn mi p", english: "In a bad mood today because I didn't sleep enough" }
            ],
            "": [
                { thai: "", roman: "yam mak", english: "Excellent" },
                { thai: "", roman: "bpai yam", english: "Go visit" },
                { thai: "", roman: "yam kon bpay", english: "Visit a sick person" },
                { thai: "", roman: "tam dai yam mak li krp", english: "You did an excellent job!" }
            ],
            "": [
                { thai: "", roman: "na sa-daai mak", english: "What a pity" },
                { thai: "", roman: "na sa-daai ti mi dai bpai", english: "It's a shame I couldn't go" },
                { thai: "", roman: "na sa-daai jang", english: "What a pity!" }
            ],
            "": [
                { thai: "", roman: "tng wan", english: "All day" },
                { thai: "", roman: "tng kn", english: "All night" },
                { thai: "", roman: "tng mt", english: "All of it" },
                { thai: "", roman: "chn tam-ngaan tng wan jon nay", english: "I worked all day until tired" }
            ],
            "": [
                { thai: "", roman: "bpr-maan sp naa-tii", english: "About ten minutes" },
                { thai: "", roman: "bpr-maan ni", english: "About this much" },
                { thai: "", roman: "bpr-maan gi moong", english: "Around what time?" },
                { thai: "", roman: "jak ti-ni bpai bpr-maan krng cha-moong", english: "From here it's about half an hour" }
            ],
            "": [
                { thai: "", roman: "yang-ni nng cha-moong", english: "At least one hour" },
                { thai: "", roman: "yang-ni g lng", english: "At least try" },
                { thai: "", roman: "dtng rian yang-ni nng bpii", english: "Must study for at least one year" }
            ],
            "": [
                { thai: "", roman: "yang-mak sam wan", english: "At most three days" },
                { thai: "", roman: "r dai yang-mak nng cha-moong", english: "Can wait at most one hour" }
            ],
            
            // === MORE ANIMALS ===
            "": [
                { thai: "", roman: "ling dtua ni na-rk", english: "This monkey is cute" },
                { thai: "", roman: "ling chp gin glay", english: "Monkeys like to eat bananas" },
                { thai: "", roman: "ti lp-b-rii mii ling y mak", english: "Lopburi has a lot of monkeys" }
            ],
            "": [
                { thai: "", roman: "glua nguu", english: "Afraid of snakes" },
                { thai: "", roman: "nguu ho", english: "Cobra" },
                { thai: "", roman: "r-wang nguu nai bpa", english: "Watch out for snakes in the forest" }
            ],
            "": [
                { thai: "", roman: "wua gin ya", english: "The cow eats grass" },
                { thai: "", roman: "na wua", english: "Beef" },
                { thai: "", roman: "nai chon-n-bt mii wua y", english: "In the countryside there are many cows" }
            ],
            "": [
                { thai: "", roman: "yung gt", english: "Mosquito bite" },
                { thai: "", roman: "yung y mak", english: "So many mosquitoes" },
                { thai: "", roman: "taa yaa gan yung", english: "Apply mosquito repellent" },
                { thai: "", roman: "dtn r-duu fn yung y mak", english: "During rainy season there are many mosquitoes" }
            ],
            "": [
                { thai: "", roman: "mt gt", english: "Ant bite" },
                { thai: "", roman: "mt y", english: "Many ants" },
                { thai: "", roman: "mt daeng", english: "Red ant" }
            ],
            
            // === CONJUNCTIONS ===
            "": [
                { thai: "", roman: "-ri dte-wa paeng", english: "Delicious but expensive" },
                { thai: "", roman: "yak bpai dte-wa mi mii wee-laa", english: "Want to go but don't have time" },
                { thai: "", roman: "chp dte-wa s mi wi", english: "Like it but can't afford it" }
            ],
            "": [
                { thai: "", roman: "mi bpai pr-wa bpay", english: "Not going because I'm sick" },
                { thai: "", roman: "pr-wa fn dtk", english: "Because it's raining" },
                { thai: "", roman: "maa sai pr-wa rt dtt", english: "Late because of traffic" }
            ],
            "": [
                { thai: "", roman: "dang-nn jng mi bpai", english: "Therefore not going" },
                { thai: " ", roman: "fn dtk dang-nn dtng yu ban", english: "It's raining, therefore must stay home" }
            ],
            "": [
                { thai: "", roman: "lng-jak gin kao", english: "After eating" },
                { thai: "", roman: "lng-jak rian jp", english: "After graduating" },
                { thai: "", roman: "lng-jak nn", english: "After that" }
            ],
            "": [
                { thai: "", roman: "gn-ti j bpai", english: "Before going" },
                { thai: "", roman: "gn-ti j nn", english: "Before sleeping" },
                { thai: "", roman: "gn-ti j dtt-sn-jai", english: "Before deciding" }
            ],
            
            // === PREPOSITIONS ===
            "": [
                { thai: "", roman: "nai ban", english: "In the house" },
                { thai: "", roman: "nai gr-bpo", english: "In the bag" },
                { thai: "", roman: "gun-jae yu nai gr-bpo", english: "The keys are in the bag" }
            ],
            "": [
                { thai: "", roman: "kang nk", english: "Outside" },
                { thai: "", roman: "nk ban", english: "Outside the house" },
                { thai: "", roman: "r yu kang nk", english: "Wait outside" }
            ],
            "": [
                { thai: "", roman: "kang kang", english: "Beside / Next to" },
                { thai: "", roman: "yu kang kang", english: "Be beside" },
                { thai: "", roman: "nng kang kang gan", english: "Sit next to each other" },
                { thai: "", roman: "ban chn yu kang kang ran see-wen", english: "My house is next to 7-Eleven" }
            ],
            "": [
                { thai: "", roman: "r-wang taang", english: "On the way" },
                { thai: "", roman: "r-wang sng kon", english: "Between two people" },
                { thai: "", roman: "r-wang bpr-chum", english: "During the meeting" }
            ],
            
            // === MORE ADVERBS ===
            "": [
                { thai: "", roman: "ik krng", english: "Again" },
                { thai: "", roman: "ik ni", english: "A bit more" },
                { thai: "", roman: "tam ik krng dai mi", english: "Can you do it again?" }
            ],
            "": [
                { thai: "", roman: "tam s-m", english: "Always do" },
                { thai: "", roman: "maa s-m", english: "Always come" },
                { thai: "", roman: "ko maa dtrong wee-laa s-m", english: "He always comes on time" }
            ],
            "": [
                { thai: "", roman: "baang-krng g dii", english: "Sometimes it's good" },
                { thai: "", roman: "baang-krng lm", english: "Sometimes forget" },
                { thai: "", roman: "baang-krng g nay", english: "Sometimes I'm tired" }
            ],
            "": [
                { thai: "", roman: "tep mi dai nn", english: "Hardly slept" },
                { thai: "", roman: "tep mi mii wee-laa", english: "Hardly any time" },
                { thai: "", roman: "nay tep dtaai", english: "Extremely tired" }
            ],
            "": [
                { thai: "", roman: "mi ru li", english: "Don't know at all" },
                { thai: "", roman: "mi hn li", english: "Didn't see at all" },
                { thai: "", roman: "bpai li", english: "Just go" },
                { thai: "", roman: "dii mak li", english: "Really very good" }
            ],
            "": [
                { thai: "", roman: "kn-kang yak", english: "Quite difficult" },
                { thai: "", roman: "kn-kang paeng", english: "Quite expensive" },
                { thai: "", roman: "kn-kang glai", english: "Quite far" },
                { thai: "", roman: "paa-sa tai kn-kang yak sm-rp chn", english: "Thai is quite difficult for me" }
            ],
            "": [
                { thai: "", roman: "gap tng", english: "Almost there" },
                { thai: "", roman: "gap st", english: "Almost done" },
                { thai: "", roman: "gap lm", english: "Almost forgot" },
                { thai: "", roman: "gap plat rt-fai", english: "Almost missed the train" }
            ],
            "": [
                { thai: "", roman: "-ri jing jing", english: "Really delicious" },
                { thai: "", roman: "kp-kun jing jing", english: "Really thank you" },
                { thai: "", roman: "nay jing jing", english: "Really tired" },
                { thai: "", roman: "rk kun jing jing n", english: "I really love you" }
            ],
            "": [
                { thai: "", roman: "maa tan-tii", english: "Come immediately" },
                { thai: "", roman: "tam tan-tii", english: "Do it immediately" },
                { thai: "", roman: "ru tan-tii", english: "Knew immediately" },
                { thai: "", roman: "hn lew ru tan-tii wa pt", english: "Saw it and knew immediately it was wrong" }
            ],
            
            // === MORE NUMBERS ===
            "": [
                { thai: "", roman: "si kon", english: "Four people" },
                { thai: "", roman: "si moong yen", english: "4 PM" },
                { thai: "", roman: "hng si", english: "Room four" },
                { thai: "", roman: "r si ha naa-tii n", english: "Wait four or five minutes" }
            ],
            "": [
                { thai: "", roman: "ha bat", english: "Five baht" },
                { thai: "", roman: "ha moong chao", english: "5 AM (11 AM)" },
                { thai: "", roman: "dtii ha", english: "5 AM" },
                { thai: "", roman: "tam-ngaan wan l ha wan", english: "Work five days a week" }
            ],
            "": [
                { thai: "", roman: "hk moong", english: "6 o'clock" },
                { thai: "", roman: "hk ri bat", english: "600 baht" },
                { thai: "", roman: "lk ngaan hk moong", english: "Finish work at 6" }
            ],
            "": [
                { thai: "", roman: "jt wan", english: "Seven days" },
                { thai: "", roman: "aa-tt l jt wan", english: "Seven days a week" },
                { thai: "", roman: "dtn jt moong", english: "Wake up at 7 AM (1 PM)" }
            ],
            "": [
                { thai: "", roman: "bpet moong chao", english: "8 AM" },
                { thai: "", roman: "sng tm", english: "8 PM" },
                { thai: "", roman: "nn bpet cha-moong", english: "Sleep eight hours" }
            ],
            "": [
                { thai: "", roman: "gao moong", english: "9 AM (3 PM)" },
                { thai: "", roman: "gao-sp bp-sen", english: "Ninety percent" },
                { thai: "", roman: "sam tm", english: "9 PM" }
            ],
            "": [
                { thai: "", roman: "sun bat", english: "Zero baht" },
                { thai: "", roman: "rm jak sun", english: "Start from zero" },
                { thai: "", roman: "ha sun sun", english: "Five hundred" }
            ],
            "": [
                { thai: "", roman: "nng lan bat", english: "One million baht" },
                { thai: "", roman: "lan kon", english: "Million people" },
                { thai: "", roman: "grung-typ mii kon lai lan kon", english: "Bangkok has several million people" }
            ],
            "": [
                { thai: "", roman: "krng cha-moong", english: "Half an hour" },
                { thai: "", roman: "sam moong krng", english: "3:30" },
                { thai: "", roman: "gin bpai krng nng", english: "Ate half" },
                { thai: "", roman: "r ik krng cha-moong dai mi", english: "Can you wait another half hour?" }
            ],
            
            // === MORE TIME EXPRESSIONS ===
            "": [
                { thai: "", roman: "prng-ni bpai ni", english: "Where are you going tomorrow?" },
                { thai: "", roman: "j gan prng-ni", english: "See you tomorrow" },
                { thai: "", roman: "prng-ni wang mi", english: "Are you free tomorrow?" },
                { thai: "", roman: "prng-ni dtng dtn chao", english: "Tomorrow I have to wake up early" }
            ],
            "": [
                { thai: "", roman: "ma-waan bpai ni", english: "Where did you go yesterday?" },
                { thai: "", roman: "ma-waan nay mak", english: "Yesterday was very tiring" },
                { thai: "", roman: "j gan ma-waan", english: "Met yesterday" },
                { thai: "", roman: "ma-waan fn dtk tng wan", english: "Yesterday it rained all day" }
            ],
            "": [
                { thai: "", roman: "aa-tt na", english: "Next week" },
                { thai: "", roman: "aa-tt ti lew", english: "Last week" },
                { thai: "", roman: "wan aa-tt", english: "Sunday" },
                { thai: "", roman: "tam-ngaan ha wan dt aa-tt", english: "Work five days per week" }
            ],
            "": [
                { thai: "", roman: "dtn chao", english: "In the morning" },
                { thai: "", roman: "dtn-ni", english: "Now / Right now" },
                { thai: "", roman: "dtn yen", english: "In the evening" },
                { thai: "", roman: "dtn-ni tam -rai yu", english: "What are you doing now?" }
            ],
            "": [
                { thai: "", roman: "wi tii-lng", english: "Later / Save it for later" },
                { thai: "", roman: "ki kui tii-lng", english: "Talk later" },
                { thai: "", roman: "tam tii-lng dai", english: "Can do it later" },
                { thai: "", roman: "rang ni wi kui tii-lng n", english: "Let's talk about this later" }
            ],
            "": [
                { thai: "", roman: "maa dao-ni", english: "Come right now" },
                { thai: "", roman: "tam dao-ni li", english: "Do it right now" },
                { thai: "", roman: "dtng-gaan dao-ni", english: "Need it right now" }
            ],
            
            // === MORE PLACES ===
            "": [
                { thai: "", roman: "bpai ran aa-han", english: "Go to a restaurant" },
                { thai: "", roman: "ran aa-han yu ni", english: "Where is the restaurant?" },
                { thai: "", roman: "ran aa-han tai -ri", english: "Thai restaurants are delicious" },
                { thai: "", roman: "ran aa-han ni bpt tng tang-kn", english: "This restaurant is open until midnight" }
            ],
            "": [
                { thai: "", roman: "pk roong-raem", english: "Stay at a hotel" },
                { thai: "", roman: "jng roong-raem", english: "Book a hotel" },
                { thai: "", roman: "roong-raem ha daao", english: "Five-star hotel" },
                { thai: "", roman: "roong-raem yu gli t-lee mi", english: "Is the hotel near the sea?" }
            ],
            "": [
                { thai: "", roman: "hng-nam yu ni", english: "Where is the bathroom?" },
                { thai: "", roman: "k bpai hng-nam", english: "May I go to the bathroom?" },
                { thai: "", roman: "hng-nam sa-taa-r-n", english: "Public restroom" },
                { thai: "", roman: "hng-nam s-at mak", english: "The bathroom is very clean" }
            ],
            "": [
                { thai: "", roman: "san sa-taa-r-n", english: "Public park" },
                { thai: "", roman: "bpai dn ln nai san", english: "Go for a walk in the park" },
                { thai: "", roman: "san say mak", english: "The garden is very beautiful" },
                { thai: "", roman: "san lum-p-nii bpen san ti yi nai grung-typ", english: "Lumpini Park is a big park in Bangkok" }
            ],
            "": [
                { thai: "", roman: "bpai chaai-hat", english: "Go to the beach" },
                { thai: "", roman: "nn ln ti chaai-hat", english: "Relax at the beach" },
                { thai: "", roman: "chaai-hat say mak", english: "The beach is very beautiful" },
                { thai: "", roman: "chaai-hat pt-t-yaa gli grung-typ", english: "Pattaya beach is close to Bangkok" }
            ],
            "": [
                { thai: "", roman: "bpai tao g", english: "Go visit an island" },
                { thai: "", roman: "g say mak", english: "The island is very beautiful" },
                { thai: "", roman: "g puu-gt", english: "Phuket island" },
                { thai: "", roman: "g s-mt bpen g ti gli grung-typ ti-st", english: "Koh Samet is the closest island to Bangkok" }
            ],
            
            // === MORE FOOD & DRINK ===
            "": [
                { thai: "", roman: "aa-han -ri", english: "Delicious food" },
                { thai: "", roman: "aa-han chao", english: "Breakfast" },
                { thai: "", roman: "aa-han yen", english: "Dinner" },
                { thai: "", roman: "aa-han tai pt dte -ri mak", english: "Thai food is spicy but very delicious" }
            ],
            "": [
                { thai: "", roman: "krang-dm yen", english: "Cold drink" },
                { thai: "", roman: "k krang-dm ni", english: "I'd like a drink please" },
                { thai: "", roman: "krang-dm -rai dii", english: "What drink would be good?" }
            ],
            "": [
                { thai: "", roman: "si nam-keng", english: "Add ice" },
                { thai: "", roman: "mi si nam-keng", english: "No ice" },
                { thai: "", roman: "nam-keng y y", english: "Lots of ice" },
                { thai: "", roman: "k nam-keng pm dai mi", english: "Can I have more ice?" }
            ],
            "": [
                { thai: "", roman: "si nam-dtaan", english: "Add sugar" },
                { thai: "", roman: "mi si nam-dtaan", english: "No sugar" },
                { thai: "", roman: "nam-dtaan ni", english: "Less sugar" },
                { thai: "", roman: "wan ni mi si nam-dtaan", english: "Less sweet, no sugar" }
            ],
            "": [
                { thai: "", roman: "k-nm tai", english: "Thai dessert" },
                { thai: "", roman: "chp gin k-nm", english: "Like to eat sweets" },
                { thai: "", roman: "k-nm wan", english: "Sweet snack" },
                { thai: "", roman: "k-nm tai tam jak m-prao le nam-dtaan", english: "Thai desserts are made from coconut and sugar" }
            ],
            "": [
                { thai: "", roman: "dm nom", english: "Drink milk" },
                { thai: "", roman: "nom st", english: "Fresh milk" },
                { thai: "", roman: "nom yen", english: "Iced milk" },
                { thai: "", roman: "gaa-fae si nom ni", english: "Coffee with a bit of milk" }
            ],
            "": [
                { thai: "", roman: "dm lo", english: "Drink alcohol" },
                { thai: "", roman: "mi dm lo", english: "Don't drink alcohol" },
                { thai: "", roman: "lo tai", english: "Thai alcohol" },
                { thai: "", roman: "kp rt lng dm lo an-dt-raai mak", english: "Driving after drinking is very dangerous" }
            ],
            
            // === TECHNOLOGY ===
            "": [
                { thai: "", roman: "chi km-piu-dt", english: "Use a computer" },
                { thai: "", roman: "km-piu-dt sa", english: "Computer is broken" },
                { thai: "", roman: "s km-piu-dt mi", english: "Buy a new computer" },
                { thai: "", roman: "tam-ngaan gp km-piu-dt tng wan", english: "Work with computer all day" }
            ],
            "": [
                { thai: "", roman: "chi in-t-nt", english: "Use the internet" },
                { thai: "", roman: "in-t-nt cha", english: "Internet is slow" },
                { thai: "", roman: "mi mii in-t-nt", english: "No internet" },
                { thai: "", roman: "ti-ni mii wai-fai mi", english: "Is there wifi here?" }
            ],
            "": [
                { thai: "", roman: "lot ep", english: "Download an app" },
                { thai: "", roman: "ep ni dii", english: "This app is good" },
                { thai: "", roman: "chi ep -rai", english: "What app do you use?" },
                { thai: "", roman: "ep rian paa-sa tai mii y mak", english: "There are many apps for learning Thai" }
            ],
            "": [
                { thai: "", roman: "tai rup", english: "Take a photo" },
                { thai: "", roman: "rup say", english: "Beautiful photo" },
                { thai: "", roman: "sng rup hi ni", english: "Send me the photo" },
                { thai: "", roman: "tai rup hi ni dai mi", english: "Can you take a photo for me?" }
            ],
            "": [
                { thai: "", roman: "duu w-dii-oo", english: "Watch a video" },
                { thai: "", roman: "tai w-dii-oo", english: "Record a video" },
                { thai: "", roman: "w-dii-oo sn paa-sa tai", english: "Thai language teaching video" }
            ],
            
            // === MORE DESCRIPTIVE WORDS ===
            "": [
                { thai: "", roman: "dtem lew", english: "Full already" },
                { thai: "", roman: "ti jt rt dtem", english: "Parking is full" },
                { thai: "", roman: "m dtem ti", english: "Completely full (eaten)" },
                { thai: "", roman: "hng dtem mt lew", english: "All rooms are full" }
            ],
            "": [
                { thai: "", roman: "wang mi", english: "Are you free?" },
                { thai: "", roman: "mi wang", english: "Not free / Busy" },
                { thai: "", roman: "mii hng wang mi", english: "Is there a free room?" },
                { thai: "", roman: "wan-ni wang tng wan", english: "Today I'm free all day" }
            ],
            "": [
                { thai: "", roman: "prm lew", english: "Ready" },
                { thai: "", roman: "yang mi prm", english: "Not ready yet" },
                { thai: "", roman: "dtriiam prm", english: "Prepare / Get ready" },
                { thai: "", roman: "prm j bpai r yang", english: "Ready to go yet?" }
            ],
            "": [
                { thai: "", roman: "s-dak mi", english: "Is it convenient?" },
                { thai: "", roman: "s-dak mak", english: "Very convenient" },
                { thai: "", roman: "mi s-dak", english: "Not convenient" },
                { thai: "", roman: "rt-fai-fa s-dak mak sm-rp dn-taang", english: "The BTS is very convenient for travel" }
            ],
            "": [
                { thai: "", roman: "m sm", english: "Suitable / Appropriate" },
                { thai: "", roman: "mi m", english: "Not suitable" },
                { thai: "", roman: "m gp kun", english: "Suits you" },
                { thai: "", roman: "sa dtua ni m gp kun mak", english: "This shirt really suits you" }
            ],
            "": [
                { thai: "", roman: "ne-jai mi", english: "Are you sure?" },
                { thai: "", roman: "ne-jai lew", english: "I'm sure" },
                { thai: "", roman: "mi ne-jai", english: "Not sure" },
                { thai: "", roman: "ne-jai n wa tuk-dtng", english: "Sure that it's correct?" }
            ],
            "": [
                { thai: "", roman: "na-j dii", english: "Should be good" },
                { thai: "", roman: "na-j dai", english: "Should be able to" },
                { thai: "", roman: "na-j maa", english: "Should come" },
                { thai: "", roman: "na-j tng lew", english: "Should have arrived by now" }
            ],
            "": [
                { thai: "", roman: "at-j bpai", english: "Might go" },
                { thai: "", roman: "at-j dai", english: "Might be able to" },
                { thai: "", roman: "at-j fn dtk", english: "It might rain" },
                { thai: "", roman: "prng-ni at-j mi wang", english: "Tomorrow I might not be free" }
            ],
            
            // === MORE COMMON EXPRESSIONS ===
            "": [
                { thai: "", roman: "raa-kaa to-ri", english: "How much?" },
                { thai: "", roman: "aa-y to-ri", english: "How old?" },
                { thai: "", roman: "naan to-ri", english: "How long?" },
                { thai: "", roman: "jak ti-ni bpai chi wee-laa to-ri", english: "How long does it take from here?" }
            ],
            "": [
                { thai: "", roman: "gi bat to-rai", english: "How many baht?" },
                { thai: "", roman: "to-rai g dai", english: "Any amount is fine" }
            ],
            "": [
                { thai: "", roman: "tam-mai mi bpai", english: "Why not go?" },
                { thai: "", roman: "tam-mai maa sai", english: "Why are you late?" },
                { thai: "", roman: "tam-mai l", english: "Why? (casual)" },
                { thai: "", roman: "tam-mai tng lak rian paa-sa tai", english: "Why did you choose to learn Thai?" }
            ],
            "": [
                { thai: "", roman: "tam yang-rai", english: "How to do?" },
                { thai: "", roman: "bpai yang-rai", english: "How to get there?" },
                { thai: "", roman: "bpen yang-rai bang", english: "How is it? / How are things?" },
                { thai: "", roman: "put paa-sa tai yang-rai", english: "How do you say it in Thai?" }
            ],
            "": [
                { thai: "", roman: "tam yang-ngai", english: "How to do? (casual)" },
                { thai: "", roman: "bpai yang-ngai", english: "How to go? (casual)" },
                { thai: "", roman: "bpen yang-ngai bang", english: "How's it going?" },
                { thai: "", roman: "aa-han bpen yang-ngai", english: "How's the food?" }
            ],
            "": [
                { thai: "", roman: "yu ni", english: "Where is it?" },
                { thai: "", roman: "bpai ni", english: "Where are you going?" },
                { thai: "", roman: "maa jak ni", english: "Where are you from?" },
                { thai: "", roman: "ran aa-han -ri -ri yu ni", english: "Where are the good restaurants?" }
            ],
            "": [
                { thai: "", roman: "krai maa", english: "Who came?" },
                { thai: "", roman: "kun bpen krai", english: "Who are you?" },
                { thai: "", roman: "krai bk", english: "Who said?" },
                { thai: "", roman: "krai g dai", english: "Anyone / Whoever" }
            ],
            "": [
                { thai: "", roman: "maa ma-ri", english: "When did you come?" },
                { thai: "", roman: "j bpai ma-ri", english: "When will you go?" },
                { thai: "", roman: "st ma-ri", english: "When will it be done?" },
                { thai: "", roman: "glp maa mang tai ma-ri ik", english: "When will you come back to Thailand?" }
            ],
            
            // === MORE VERBS ===
            "": [
                { thai: "", roman: "yu ni", english: "Where are you? / Where is it?" },
                { thai: "", roman: "yu ban", english: "At home" },
                { thai: "", roman: "yu ti-ni", english: "Here / Stay here" },
                { thai: "", roman: "dtn-ni yu ti-ni", english: "Where are you now?" }
            ],
            "": [
                { thai: "", roman: "mii mi", english: "Do you have? / Is there?" },
                { thai: "", roman: "mi mii", english: "Don't have / There isn't" },
                { thai: "", roman: "mii -rai", english: "What's wrong? / What is there?" },
                { thai: "", roman: "ran ni mii aa-han mang-s-w-rt mi", english: "Does this restaurant have vegetarian food?" }
            ],
            "": [
                { thai: "", roman: "ao an ni", english: "I'll take this one" },
                { thai: "", roman: "mi ao", english: "Don't want it" },
                { thai: "", roman: "ao -rai", english: "What do you want?" },
                { thai: "", roman: "ao nam bplo gew nng", english: "I'll have one glass of water" }
            ],
            "": [
                { thai: "", roman: "hi ni", english: "Give me please" },
                { thai: "", roman: "hi ko", english: "Give to him/her" },
                { thai: "", roman: "hi chn", english: "Give me" },
                { thai: "", roman: "chay hi kam ne-nam ni", english: "Please give me some advice" }
            ],
            "": [
                { thai: "", roman: "hn mi", english: "Do you see?" },
                { thai: "", roman: "mi hn", english: "Don't see" },
                { thai: "", roman: "hn lew", english: "I see it now" },
                { thai: "", roman: "hn day", english: "Agree" }
            ],
            "": [
                { thai: "", roman: "j gan", english: "Meet" },
                { thai: "", roman: "mi j", english: "Didn't meet / Can't find" },
                { thai: "", roman: "j lew", english: "Found it" },
                { thai: "", roman: "dii-jai ti dai j", english: "Nice to meet you" }
            ],
            "": [
                { thai: "", roman: "paa bpai", english: "Take (someone) to" },
                { thai: "", roman: "paa maa", english: "Bring (someone)" },
                { thai: "", roman: "paa tao", english: "Take on a trip" },
                { thai: "", roman: "paa bpai gin kao dai mi", english: "Can you take me to eat?" }
            ],
            "": [
                { thai: "", roman: "ne-nam ni", english: "Please recommend" },
                { thai: "", roman: "ne-nam -rai dii", english: "What do you recommend?" },
                { thai: "", roman: "ne-nam ran aa-han", english: "Recommend a restaurant" },
                { thai: "", roman: "chay ne-nam ti-tao ni", english: "Please recommend places to visit" }
            ],
            "": [
                { thai: "", roman: "jng dt", english: "Reserve a table" },
                { thai: "", roman: "jng hng", english: "Book a room" },
                { thai: "", roman: "jng dta", english: "Book a ticket" },
                { thai: "", roman: "jng wi lew", english: "Already booked" }
            ],
            "": [
                { thai: "", roman: "chk bin", english: "Check (the bill)" },
                { thai: "", roman: "chk raa-kaa", english: "Check the price" },
                { thai: "", roman: "chk hng", english: "Check the room" },
                { thai: "", roman: "k chk bin day krp", english: "Can I have the bill please?" }
            ],
            "": [
                { thai: "", roman: "jai ngn", english: "Pay money" },
                { thai: "", roman: "jai bt", english: "Pay by card" },
                { thai: "", roman: "jai to-ri", english: "How much to pay?" },
                { thai: "", roman: "jai yek dai mi", english: "Can we pay separately?" }
            ],
            "": [
                { thai: "", roman: "lek ngn", english: "Exchange money" },
                { thai: "", roman: "lek ti-ni", english: "Where to exchange?" },
                { thai: "", roman: "lek bpen bat", english: "Exchange to baht" },
                { thai: "", roman: "lek ngn ti s-nam-bin paeng gwa", english: "Exchanging at the airport is more expensive" }
            ],
            
            // === TRANSPORTATION ===
            "": [
                { thai: "", roman: "nng rt-mee", english: "Take the bus" },
                { thai: "", roman: "rt-mee maa lew", english: "The bus is here" },
                { thai: "", roman: "rt-mee sai ni", english: "Which bus line?" },
                { thai: "", roman: "rt-mee nai grung-typ tuk mak", english: "Buses in Bangkok are very cheap" }
            ],
            "": [
                { thai: "", roman: "rak tek-si", english: "Call a taxi" },
                { thai: "", roman: "tek-si wang", english: "Available taxi" },
                { thai: "", roman: "tek-si to-ri", english: "How much for the taxi?" },
                { thai: "", roman: "tek-si mi gt m-dt", english: "The taxi didn't use the meter" }
            ],
            "": [
                { thai: "", roman: "nng rt-fai-fa", english: "Take the BTS" },
                { thai: "", roman: "s-ta-nii rt-fai-fa", english: "BTS station" },
                { thai: "", roman: "rt-fai-fa rew gwa rt-mee", english: "BTS is faster than the bus" },
                { thai: "", roman: "rt-fai-fa s-dak mak nai grung-typ", english: "The BTS is very convenient in Bangkok" }
            ],
            "": [
                { thai: "", roman: "ki m-dt-sai", english: "Ride a motorcycle" },
                { thai: "", roman: "m-dt-sai rp-jang", english: "Motorcycle taxi" },
                { thai: "", roman: "nng m-dt-sai rew gwa", english: "Taking a motorcycle is faster" },
                { thai: "", roman: "si mak-gan-nk dtn ki m-dt-sai", english: "Wear a helmet when riding a motorcycle" }
            ],
            "": [
                { thai: "", roman: "nng ra", english: "Take a boat" },
                { thai: "", roman: "ra kam fak", english: "Ferry boat" },
                { thai: "", roman: "ra dan", english: "Express boat" },
                { thai: "", roman: "nng ra nai me-nam jo-pr-yaa s-nk mak", english: "Taking a boat on the Chao Phraya is very fun" }
            ],
            "": [
                { thai: "", roman: "s dta", english: "Buy a ticket" },
                { thai: "", roman: "dta to-ri", english: "How much is the ticket?" },
                { thai: "", roman: "dta krang-bin", english: "Plane ticket" },
                { thai: "", roman: "jng dta lang-na tuk gwa", english: "Booking tickets in advance is cheaper" }
            ],
            
            // === REQUESTS & POLITENESS ===
            "": [
                { thai: "", roman: "k ni", english: "May I have / Please" },
                { thai: "", roman: "k-tot", english: "Sorry / Excuse me" },
                { thai: "", roman: "k tam ni", english: "May I ask?" },
                { thai: "", roman: "k nam bplo nng gew", english: "May I have a glass of water?" }
            ],
            "": [
                { thai: "", roman: "g-r-naa r sk-kru", english: "Please wait a moment" },
                { thai: "", roman: "g-r-naa put cha cha", english: "Please speak slowly" },
                { thai: "", roman: "g-r-naa nng r", english: "Please have a seat and wait" }
            ],
            "": [
                { thai: "", roman: "bprot r-wang", english: "Please be careful" },
                { thai: "", roman: "bprot ya", english: "Please don't" },
                { thai: "", roman: "bprot bpt too-r-sp", english: "Please turn off your phone" }
            ],
            "": [
                { thai: "", roman: "chay ni", english: "Help please" },
                { thai: "", roman: "r ni", english: "Wait a bit" },
                { thai: "", roman: "k ni", english: "May I have please" },
                { thai: "", roman: "put ik tii ni dai mi", english: "Can you say that again please?" }
            ],
            "": [
                { thai: "", roman: "kp-kun day", english: "Thank you too" },
                { thai: "", roman: "chn day", english: "Me too" },
                { thai: "", roman: "ao maa day", english: "Bring it too" },
                { thai: "", roman: "chay bk ko day n", english: "Please tell him/her too" }
            ],
            
            // === MORE USEFUL ADJECTIVES ===
            "": [
                { thai: "", roman: "man dm", english: "Same as before" },
                { thai: "", roman: "ti dm", english: "Same place" },
                { thai: "", roman: "wee-laa dm", english: "Same time" },
                { thai: "", roman: "sng man dm", english: "Order the same as before" }
            ],
            "": [
                { thai: "", roman: "kng mi", english: "New thing" },
                { thai: "", roman: "ban mi", english: "New house" },
                { thai: "", roman: "rm mi", english: "Start again" },
                { thai: "", roman: "mii -rai mi bang", english: "What's new?" }
            ],
            "": [
                { thai: "", roman: "kng go", english: "Old thing" },
                { thai: "", roman: "pan go", english: "Old friend" },
                { thai: "", roman: "rt go", english: "Old car" },
                { thai: "", roman: "grung-typ mii wt go-ge y mak", english: "Bangkok has many ancient temples" }
            ],
            "": [
                { thai: "", roman: "pk st", english: "Fresh vegetables" },
                { thai: "", roman: "aa-han st", english: "Fresh food" },
                { thai: "", roman: "bplaa st", english: "Fresh fish" },
                { thai: "", roman: "dt-lat st mii kng st tk wan", english: "The fresh market has fresh goods every day" }
            ],
            "": [
                { thai: "", roman: "pn-l-mai sk", english: "Ripe fruit" },
                { thai: "", roman: "m-mang sk", english: "Ripe mango" },
                { thai: "", roman: "yang mi sk", english: "Not ripe yet" },
                { thai: "", roman: "k na sk sk", english: "I'd like my meat well done" }
            ],
            "": [
                { thai: "", roman: "yang dp", english: "Still raw" },
                { thai: "", roman: "bplaa dp", english: "Raw fish" },
                { thai: "", roman: "gin dp", english: "Eat raw" },
                { thai: "", roman: "kon tai mi ki gin na dp", english: "Thai people don't often eat raw meat" }
            ],
            "": [
                { thai: "", roman: "baang kon", english: "Some people" },
                { thai: "", roman: "baang krng", english: "Sometimes" },
                { thai: "", roman: "baang tii", english: "Sometimes / Maybe" },
                { thai: "", roman: "baang kon chp pt baang kon mi chp", english: "Some people like spicy, some don't" }
            ],
            "": [
                { thai: "", roman: "tk kon", english: "Everyone" },
                { thai: "", roman: "tk wan", english: "Every day" },
                { thai: "", roman: "tk yang", english: "Everything" },
                { thai: "", roman: "tk kon dtng rian paa-sa ang-grt", english: "Everyone has to learn English" }
            ],
            "": [
                { thai: "", roman: "lai kon", english: "Many people" },
                { thai: "", roman: "lai krng", english: "Many times" },
                { thai: "", roman: "lai yang", english: "Many things" },
                { thai: "", roman: "chn bpai mang tai maa lai krng lew", english: "I've been to Thailand many times" }
            ],
            
            // === FEELINGS & SENSATIONS ===
            "": [
                { thai: "", roman: "hu kao", english: "Hungry" },
                { thai: "", roman: "hu mak", english: "Very hungry" },
                { thai: "", roman: "mi hu", english: "Not hungry" },
                { thai: "", roman: "hu nam", english: "Thirsty" }
            ],
            "": [
                { thai: "", roman: "m lew", english: "Full already" },
                { thai: "", roman: "m mak", english: "Very full" },
                { thai: "", roman: "yang mi m", english: "Not full yet" },
                { thai: "", roman: "gin jon m mak", english: "Ate until very full" }
            ],
            "": [
                { thai: "", roman: "ngang nn", english: "Sleepy" },
                { thai: "", roman: "ngang mak", english: "Very sleepy" },
                { thai: "", roman: "mi ngang", english: "Not sleepy" },
                { thai: "", roman: "ngang mak pr nn dk", english: "Very sleepy because I stayed up late" }
            ],
            "": [
                { thai: "", roman: "mao lew", english: "Drunk already" },
                { thai: "", roman: "mi mao", english: "Not drunk" },
                { thai: "", roman: "mao rt", english: "Carsick" },
                { thai: "", roman: "mao ra", english: "Seasick" }
            ],
            "": [
                { thai: "", roman: "jp dtrong ni", english: "Where does it hurt?" },
                { thai: "", roman: "jp mak", english: "It hurts a lot" },
                { thai: "", roman: "mi jp", english: "It doesn't hurt" },
                { thai: "", roman: "jp ha", english: "Head hurts" }
            ],
            "": [
                { thai: "", roman: "bpat ha", english: "Headache" },
                { thai: "", roman: "bpat tng", english: "Stomachache" },
                { thai: "", roman: "bpat lng", english: "Backache" },
                { thai: "", roman: "bpat ha pr tam-ngaan nk", english: "Headache because of working hard" }
            ],
            
            // === MORE BODY PARTS ===
            "": [
                { thai: "", roman: "dtt pm", english: "Cut hair" },
                { thai: "", roman: "pm yaao", english: "Long hair" },
                { thai: "", roman: "pm sn", english: "Short hair" },
                { thai: "", roman: "bpai dtt pm ti-ni", english: "Where do you get your hair cut?" }
            ],
            "": [
                { thai: "", roman: "bpraeng fan", english: "Brush teeth" },
                { thai: "", roman: "bpat fan", english: "Toothache" },
                { thai: "", roman: "m fan", english: "Dentist" },
                { thai: "", roman: "dtng bpraeng fan wan l sng krng", english: "Must brush teeth twice a day" }
            ],
            "": [
                { thai: "", roman: "jp k", english: "Sore throat" },
                { thai: "", roman: "k heng", english: "Dry throat" },
                { thai: "", roman: "bpat k", english: "Neck pain" },
                { thai: "", roman: "jp k pr bpen wt", english: "Sore throat because of a cold" }
            ],
            "": [
                { thai: "", roman: "bpat li", english: "Shoulder pain" },
                { thai: "", roman: "li dtng", english: "Stiff shoulders" },
                { thai: "", roman: "nat li", english: "Massage shoulders" }
            ],
            "": [
                { thai: "", roman: "jp ken", english: "Arm hurts" },
                { thai: "", roman: "ken kwa", english: "Right arm" },
                { thai: "", roman: "ken sai", english: "Left arm" }
            ],
            "": [
                { thai: "", roman: "ka jp", english: "Leg hurts" },
                { thai: "", roman: "ka kwa", english: "Right leg" },
                { thai: "", roman: "bpat ka", english: "Leg pain" },
                { thai: "", roman: "dn mak jon ka jp", english: "Walked so much that my legs hurt" }
            ],
            
            // === SEASONS & CLIMATE ===
            "": [
                { thai: "", roman: "r-duu rn", english: "Hot season / Summer" },
                { thai: "", roman: "r-duu fn", english: "Rainy season" },
                { thai: "", roman: "r-duu nao", english: "Cold season / Winter" },
                { thai: "", roman: "mang tai mii sam r-duu", english: "Thailand has three seasons" }
            ],
            "": [
                { thai: "", roman: "na rn", english: "Hot season" },
                { thai: "", roman: "na fn", english: "Rainy season" },
                { thai: "", roman: "na nao", english: "Cool season" },
                { thai: "", roman: "na fn fn dtk gap tk wan", english: "In rainy season it rains almost every day" }
            ],
            "": [
                { thai: "", roman: "paa-y ko", english: "Storm coming" },
                { thai: "", roman: "paa-y raeng", english: "Strong storm" },
                { thai: "", roman: "r-wang paa-y", english: "Watch out for storm" }
            ],
            "": [
                { thai: "", roman: "nam tam", english: "Flood" },
                { thai: "", roman: "nam tam t-nn", english: "Road is flooded" },
                { thai: "", roman: "r-duu fn at mii nam tam", english: "Rainy season may have floods" }
            ],
        };
        
        // Generate example sentence - check custom first, then template
        // Sentence carousel state
        let currentSentenceIndex = 0;
        let currentSentences = [];
        
        async function generateExampleSentence() {
            try {
                if (cards.length === 0) return;
                
                const card = cards[currentIndex];
                const thaiWord = card.thai;
                
                sentenceExample.classList.add('show');
                
                // Check for custom sentences
                if (customSentences[thaiWord] && customSentences[thaiWord].length > 0) {
                    currentSentences = customSentences[thaiWord].map(s => {
                        let thai = s.thai;
                        // Highlight the word if not already highlighted
                        if (!thai.includes('sentence-word-highlight')) {
                            thai = thai.replace(
                                new RegExp(`(${thaiWord})`, 'g'), 
                                '<span class="sentence-word-highlight">$1</span>'
                            );
                        }
                        return { ...s, thai };
                    });
                    currentSentenceIndex = 0;
                    renderSentenceCarousel();
                } else {
                    // No sentences available
                    currentSentences = [];
                    document.getElementById('sentenceCarouselInner').innerHTML = 
                        '<div class="sentence-slide"><div class="sentence-unavailable">No example sentences available for this word yet.</div></div>';
                    document.getElementById('sentenceDots').innerHTML = '';
                    document.getElementById('sentencePrevBtn').style.display = 'none';
                    document.getElementById('sentenceNextBtn').style.display = 'none';
                }
                
                sentenceBtn.disabled = false;
                sentenceBtn.textContent = ' Example';
            } catch (err) {
                console.error('Error:', err);
            }
        }
        
        function renderSentenceCarousel() {
            const inner = document.getElementById('sentenceCarouselInner');
            const dots = document.getElementById('sentenceDots');
            const prevBtn = document.getElementById('sentencePrevBtn');
            const nextBtn = document.getElementById('sentenceNextBtn');
            
            // Build slides
            inner.innerHTML = currentSentences.map(s => `
                <div class="sentence-slide">
                    <div class="sentence-thai">${s.thai}</div>
                    <div class="sentence-roman">${s.roman}</div>
                    <div class="sentence-english">${s.english}</div>
                </div>
            `).join('');
            
            // Build dots
            dots.innerHTML = currentSentences.map((_, i) => 
                `<div class="sentence-dot ${i === currentSentenceIndex ? 'active' : ''}" data-index="${i}"></div>`
            ).join('');
            
            // Add dot click handlers
            dots.querySelectorAll('.sentence-dot').forEach(dot => {
                dot.addEventListener('click', () => {
                    currentSentenceIndex = parseInt(dot.dataset.index);
                    updateSentenceCarousel();
                });
            });
            
            // Show/hide nav buttons based on count
            if (currentSentences.length <= 1) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
            } else {
                prevBtn.style.display = 'flex';
                nextBtn.style.display = 'flex';
            }
            
            updateSentenceCarousel();
        }
        
        function updateSentenceCarousel() {
            const inner = document.getElementById('sentenceCarouselInner');
            const dots = document.getElementById('sentenceDots');
            const prevBtn = document.getElementById('sentencePrevBtn');
            const nextBtn = document.getElementById('sentenceNextBtn');
            
            inner.style.transform = `translateX(-${currentSentenceIndex * 100}%)`;
            
            // Update dots
            dots.querySelectorAll('.sentence-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSentenceIndex);
            });
            
            // Update button states
            prevBtn.disabled = currentSentenceIndex === 0;
            nextBtn.disabled = currentSentenceIndex >= currentSentences.length - 1;
            
            // Update current sentence for TTS
            if (currentSentences[currentSentenceIndex]) {
                currentSentenceThai = currentSentences[currentSentenceIndex].thai.replace(/<[^>]*>/g, '');
            }
        }
        
        function prevSentence() {
            if (currentSentenceIndex > 0) {
                currentSentenceIndex--;
                updateSentenceCarousel();
            }
        }
        
        function nextSentence() {
            if (currentSentenceIndex < currentSentences.length - 1) {
                currentSentenceIndex++;
                updateSentenceCarousel();
            }
        }
        
        // Hide sentence example when changing cards
        function hideSentenceExample() {
            sentenceExample.classList.remove('show');
            currentSentences = [];
            currentSentenceIndex = 0;
        }


        let eventListenersSetup = false;
        
        function setupEventListeners() {
            if (eventListenersSetup) return;
            eventListenersSetup = true;
            
            // Grammar navigation
            document.getElementById('grammarBackBtn').addEventListener('click', closeGrammarLesson);
            document.getElementById('lessonPrevBtn').addEventListener('click', prevLessonStep);
            document.getElementById('lessonNextBtn').addEventListener('click', nextLessonStep);
            
            // Practice navigation
            document.getElementById('practiceBackBtn').addEventListener('click', closePractice);
            
            flashcard.addEventListener('click', () => { if (!isSwiping) flipCard(); });
            flashcard.addEventListener('touchstart', handleTouchStart, { passive: false });
            flashcard.addEventListener('touchmove', handleTouchMove, { passive: false });
            flashcard.addEventListener('touchend', handleTouchEnd);

            flipBtn.addEventListener('click', flipCard);
            prevBtn.addEventListener('click', prevCard);
            nextBtn.addEventListener('click', nextCard);
            sentenceBtn.addEventListener('click', generateExampleSentence);
            document.getElementById('sentenceSpeakBtn').addEventListener('click', speakSentence);
            document.getElementById('sentencePrevBtn').addEventListener('click', prevSentence);
            document.getElementById('sentenceNextBtn').addEventListener('click', nextSentence);

            document.getElementById('closeSettings').addEventListener('click', () => settingsModal.classList.remove('open'));
            document.getElementById('closeStats').addEventListener('click', () => statsModal.classList.remove('open'));

            document.getElementById('startFreshBtn').addEventListener('click', () => { resumeModal.classList.remove('open'); startFresh(); });
            document.getElementById('resumeSessionBtn').addEventListener('click', () => { resumeModal.classList.remove('open'); resumeSession(); });
            
            // Completion modal handlers
            document.getElementById('closeCompletion').addEventListener('click', () => document.getElementById('completionModal').classList.remove('open'));
            document.getElementById('restartListBtn').addEventListener('click', () => {
                document.getElementById('completionModal').classList.remove('open');
                startFresh();
            });
            document.getElementById('reviewHardestBtn').addEventListener('click', () => {
                document.getElementById('completionModal').classList.remove('open');
                sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
                listSelector.value = HARDEST_LIST;
                switchList(HARDEST_LIST);
            });

            csvFileInput.addEventListener('change', handleFileUpload);
            listSelector.addEventListener('change', (e) => switchList(parseInt(e.target.value)));
            document.getElementById('exportBtn').addEventListener('click', exportProgress);
            document.getElementById('resetBtn').addEventListener('click', resetProgress);

            modeBtns.forEach(btn => btn.addEventListener('click', () => switchMode(btn.dataset.mode)));
            document.addEventListener('keydown', handleKeyboard);
            
            // Favorite button
            document.getElementById('favoriteBtn').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleFavorite();
            });
            
            // Audio button
            document.getElementById('audioBtn').addEventListener('click', (e) => {
                e.stopPropagation();
                speakThai();
            });

            document.addEventListener('touchend', (e) => {
                const now = Date.now();
                if (now - lastTouchEnd < 300) e.preventDefault();
                lastTouchEnd = now;
            }, false);

            window.addEventListener('click', (e) => {
                if (e.target === settingsModal) settingsModal.classList.remove('open');
                if (e.target === statsModal) statsModal.classList.remove('open');
                // Don't allow closing resume modal by clicking outside - user must choose
                if (e.target.id === 'completionModal') e.target.classList.remove('open');
            });
        }

        function handleTouchStart(e) {
            if (e.touches.length > 1) return;
            touchStartX = currentX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            isSwiping = false;
        }

        function handleTouchMove(e) {
            if (!touchStartX) return;
            currentX = e.touches[0].clientX;
            const diffX = currentX - touchStartX;
            const diffY = e.touches[0].clientY - touchStartY;

            if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 10) {
                e.preventDefault();
                isSwiping = true;
                flashcard.classList.add('swiping');
                flashcard.style.transform = "translateX(" + diffX + "px) rotateY(" + (isFlipped ? 180 : 0) + "deg)";

                const intensity = Math.min(Math.abs(diffX) / 100, 1);

                if (diffX > 30) {
                    swipeRight.classList.add('visible');
                    swipeBarRight.classList.add('visible');
                    swipeBarRight.style.opacity = intensity;
                    swipeLeft.classList.remove('visible');
                    swipeBarLeft.classList.remove('visible');
                } else if (diffX < -30) {
                    swipeLeft.classList.add('visible');
                    swipeBarLeft.classList.add('visible');
                    swipeBarLeft.style.opacity = intensity;
                    swipeRight.classList.remove('visible');
                    swipeBarRight.classList.remove('visible');
                } else {
                    swipeLeft.classList.remove('visible');
                    swipeRight.classList.remove('visible');
                    swipeBarLeft.classList.remove('visible');
                    swipeBarRight.classList.remove('visible');
                }
            }
        }

        function handleTouchEnd() {
            if (!touchStartX) return;
            const diffX = currentX - touchStartX;

            swipeLeft.classList.remove('visible');
            swipeRight.classList.remove('visible');
            swipeBarLeft.classList.remove('visible');
            swipeBarRight.classList.remove('visible');
            swipeBarLeft.style.opacity = '';
            swipeBarRight.style.opacity = '';
            flashcard.classList.remove('swiping');
            
            // Clear inline transform style - let CSS class handle the flip state
            flashcard.style.transform = '';

            if (Math.abs(diffX) > 100) {
                // If card is flipped, first unflip it instantly before moving to next
                if (isFlipped) {
                    flashcard.style.transition = 'none';
                    flashcard.classList.remove('flipped');
                    isFlipped = false;
                    // Force reflow
                    flashcard.offsetHeight;
                    flashcard.style.transition = '';
                }
                diffX > 0 ? markCorrect() : markIncorrect();
            }

            touchStartX = currentX = 0;
            setTimeout(() => { isSwiping = false; }, 100);
        }

        function handleKeyboard(e) {
            if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); flipCard(); }
            else if (e.key === 'ArrowRight') { e.preventDefault(); markCorrect(); }
            else if (e.key === 'ArrowLeft') { e.preventDefault(); markIncorrect(); }
        }

        function initializeCards() {
            if (currentMode === 'review') {
                // Filter to cards that are NOT yet learned
                cards = vocabulary.filter(c => {
                    const key = getCardKey(c);
                    const globalStats = getCardStats();
                    const stat = globalStats[key];
                    return !stat || !stat.consecutiveCorrect || stat.consecutiveCorrect < LEARNING_THRESHOLD;
                });
                if (cards.length === 0) {
                    showToast('All cards in this list are learned!');
                    currentMode = 'all';
                    modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === 'all'));
                    cards = [...vocabulary];
                }
                // Shuffle unlearned cards
                cards.sort(() => Math.random() - 0.5);
            } else {
                // Apply smart review sorting if enabled, then shuffle within priority groups
                let cardList = [...vocabulary];
                if (smartReviewMode) {
                    cardList = getCardsForSmartReview(cardList);
                } else {
                    cardList.sort(() => Math.random() - 0.5);
                }
                cards = cardList;
            }
            currentIndex = 0;
            // Sync modeState
            modeState[currentMode].cards = [...cards];
            modeState[currentMode].currentIndex = currentIndex;
            saveSessionState();
        }
        
        function initializeCardsPreservePosition(oldCard) {
            // Save current state before switching
            const oldMode = currentMode === 'review' ? 'all' : 'review'; // The mode we're coming FROM
            
            if (currentMode === 'review') {
                // Filter to cards that are NOT yet learned (consecutiveCorrect < LEARNING_THRESHOLD)
                const unlearnedCards = vocabulary.filter(c => {
                    const key = getCardKey(c);
                    const globalStats = getCardStats();
                    const stat = globalStats[key];
                    return !stat || !stat.consecutiveCorrect || stat.consecutiveCorrect < LEARNING_THRESHOLD;
                });
                
                if (unlearnedCards.length === 0) {
                    showToast('All cards in this list are learned!');
                    currentMode = 'all';
                    modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === 'all'));
                    return;
                }
                
                // Save "all" mode state before switching
                modeState.all.cards = [...cards];
                modeState.all.currentIndex = currentIndex;
                
                // Always shuffle unlearned cards fresh when entering review mode
                cards = unlearnedCards.sort(() => Math.random() - 0.5);
                currentIndex = 0;
                
                modeState.review.cards = [...cards];
                modeState.review.currentIndex = currentIndex;
            } else {
                // Switching to "All Cards"
                // Save review mode state before switching
                modeState.review.cards = [...cards];
                modeState.review.currentIndex = currentIndex;
                
                // Restore "all" mode state if we have it
                if (modeState.all.cards.length > 0) {
                    cards = modeState.all.cards;
                    currentIndex = modeState.all.currentIndex;
                } else {
                    // First time or need to initialize
                    let cardList = [...vocabulary];
                    if (smartReviewMode) {
                        cardList = getCardsForSmartReview(cardList);
                    } else {
                        cardList.sort(() => Math.random() - 0.5);
                    }
                    cards = cardList;
                    currentIndex = 0;
                }
                modeState.all.cards = [...cards];
                modeState.all.currentIndex = currentIndex;
            }
            
            saveSessionState();
        }

        function getListProgress(idx) {
            const list = vocabularyLists[idx];
            let learned = 0, reviewed = 0, totalCorrect = 0, totalIncorrect = 0;
            const globalStats = getCardStats();
            list.words.forEach(c => {
                const key = getCardKey(c);
                const s = globalStats[key];
                if (s) {
                    reviewed++;
                    totalCorrect += s.correct || 0;
                    totalIncorrect += s.incorrect || 0;
                    if (s.consecutiveCorrect >= LEARNING_THRESHOLD) learned++;
                }
            });
            return { total: list.words.length, learned, reviewed, learnedPercent: Math.round((learned / list.words.length) * 100), totalCorrect, totalIncorrect };
        }

        function updateCard() {
            if (!cards.length) { 
                // Show friendly empty state based on current list/mode
                let icon, title, text;
                
                if (currentListIndex === FAVORITES_LIST) {
                    icon = '';
                    title = 'No Favorites Yet';
                    text = 'Tap the  on any card to add it to your favorites.';
                } else if (currentListIndex === HARDEST_LIST) {
                    icon = '';
                    title = 'No Hard Cards';
                    text = "You haven't gotten any cards wrong yet. Keep practicing!";
                } else if (currentMode === 'review') {
                    icon = '';
                    title = 'Nothing to Review';
                    text = "You haven't marked any cards as incorrect. Great job!";
                } else {
                    icon = '';
                    title = 'No Cards';
                    text = 'This list is empty.';
                }
                
                frontText.innerHTML = '<div class="empty-state">' +
                    '<div class="empty-state-icon">' + icon + '</div>' +
                    '<div class="empty-state-title">' + title + '</div>' +
                    '<div class="empty-state-text">' + text + '</div>' +
                '</div>';
                backText.innerHTML = frontText.innerHTML;
                frontRomanization.textContent = '';
                backRomanization.textContent = '';
                masteryIndicator.style.display = 'none';
                
                cardCounter.textContent = 'Card 0 of 0';
                progressPercent.textContent = '0%';
                progressFill.style.width = '0%';
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                
                return; 
            }
            const card = cards[currentIndex];
            frontText.textContent = showThaiFront ? card.thai : card.english;
            backText.textContent = showThaiFront ? card.english : card.thai;
            applyFontSize(frontText);
            applyFontSize(backText);
            
            // Update romanization
            const thaiRoman = getRomanization(card.thai);
            if (showRomanization && thaiRoman) {
                frontRomanization.textContent = showThaiFront ? thaiRoman : '';
                backRomanization.textContent = showThaiFront ? '' : thaiRoman;
                frontRomanization.style.display = showThaiFront ? 'block' : 'none';
                backRomanization.style.display = showThaiFront ? 'none' : 'block';
            } else {
                frontRomanization.style.display = 'none';
                backRomanization.style.display = 'none';
            }
            
            // Update mastery indicator
            const mastery = getMasteryStatus(card);
            masteryIndicator.textContent = mastery.label;
            masteryIndicator.className = 'mastery-indicator ' + mastery.class;
            masteryIndicator.style.display = 'block';

            const progress = ((currentIndex + 1) / cards.length) * 100;
            cardCounter.textContent = "Card " + (currentIndex + 1) + " of " + cards.length;
            progressPercent.textContent = Math.round(progress) + "%";
            progressFill.style.width = progress + "%";
            updateMilestones(progress);
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === cards.length - 1;
            
            // Update favorite button
            const isFav = favorites.has(getCardKey(card));
            const favBtn = document.getElementById('favoriteBtn');
            favBtn.textContent = isFav ? '' : '';
            favBtn.classList.toggle('active', isFav);
            
            updateScoreDisplay();
            
            // Auto-play audio if enabled and showing Thai first
            // Only auto-play if this was a deliberate card change (not initial load or mode switch)
            if (autoPlayAudio && showThaiFront && cards.length > 0 && window.shouldAutoPlay) {
                window.shouldAutoPlay = false; // Reset flag
                const textToSpeak = card.thai;
                // Cancel any pending speech first
                if (pendingSpeechTimeout) {
                    clearTimeout(pendingSpeechTimeout);
                }
                pendingSpeechTimeout = setTimeout(() => {
                    pendingSpeechTimeout = null;
                    speakThai(textToSpeak);
                }, 400);
            }
        }

        function applyFontSize(el) {
            const len = el.textContent.length;
            el.className = 'card-text' + (len > 40 ? ' xtiny' : len > 25 ? ' tiny' : len > 18 ? ' small' : len > 10 ? ' medium' : '');
        }

        function flipCard() { isFlipped = !isFlipped; flashcard.classList.toggle('flipped'); }
        
        function nextCard() { 
            if (currentIndex < cards.length - 1) { 
                // First flip back if needed (without animation)
                if (isFlipped) { 
                    flashcard.style.transition = 'none';
                    flashcard.classList.remove('flipped'); 
                    isFlipped = false;
                    // Force reflow then restore transition
                    flashcard.offsetHeight;
                    flashcard.style.transition = '';
                } 
                currentIndex++; 
                // Sync modeState
                modeState[currentMode].currentIndex = currentIndex;
                hideSentenceExample();
                window.shouldAutoPlay = true; // Enable auto-play for this card change
                updateCard(); 
                saveSessionState(); 
            } 
        }
        
        function prevCard() { 
            if (currentIndex > 0) { 
                if (isFlipped) { 
                    flashcard.style.transition = 'none';
                    flashcard.classList.remove('flipped'); 
                    isFlipped = false;
                    flashcard.offsetHeight;
                    flashcard.style.transition = '';
                } 
                currentIndex--; 
                // Sync modeState
                modeState[currentMode].currentIndex = currentIndex;
                hideSentenceExample();
                window.shouldAutoPlay = true; // Enable auto-play for this card change
                updateCard(); 
                saveSessionState(); 
            } 
        }
        function shuffleCards() { 
            sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
            hideSentenceExample();
            initializeCards(); 
            if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; } 
            updateCard(); 
            showToast('Cards shuffled!'); 
        }
        function toggleLanguage() { 
            showThaiFront = !showThaiFront; 
            localStorage.setItem('thaiFlashcardsThaiFront', showThaiFront);
            // Sync options panel buttons
            document.querySelectorAll('.option-toggle-btn[data-direction]').forEach(btn => {
                btn.classList.toggle('active', 
                    (btn.dataset.direction === 'thai' && showThaiFront) ||
                    (btn.dataset.direction === 'english' && !showThaiFront)
                );
            });
            if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; } 
            updateCard(); 
            saveProgress(); 
        }
        
        function toggleFavorite() {
            if (!cards.length) return;
            const card = cards[currentIndex];
            const key = getCardKey(card);
            
            if (favorites.has(key)) {
                favorites.delete(key);
                showToast('Removed from favorites');
            } else {
                favorites.add(key);
                showToast('Added to favorites ');
            }
            
            updateCard();
            updateListSelector();
            saveProgress();
        }
        
        // Track pending speech timeout
        let pendingSpeechTimeout = null;
        let thaiVoice = null;
        
        // Pre-load Thai voice
        function loadThaiVoice() {
            const voices = speechSynthesis.getVoices();
            thaiVoice = voices.find(v => v.lang === 'th-TH') || 
                        voices.find(v => v.lang.startsWith('th'));
        }
        
        // Load voices when available
        if ('speechSynthesis' in window) {
            loadThaiVoice();
            speechSynthesis.onvoiceschanged = loadThaiVoice;
        }
        
        function speakThai(textToSpeak) {
            // Get text immediately if not provided
            const thaiText = textToSpeak || (cards.length > 0 ? cards[currentIndex].thai : null);
            if (!thaiText) return;
            
            if (!('speechSynthesis' in window)) return;
            
            // Cancel any pending speech timeout
            if (pendingSpeechTimeout) {
                clearTimeout(pendingSpeechTimeout);
                pendingSpeechTimeout = null;
            }
            
            // Cancel ongoing speech
            speechSynthesis.cancel();
            
            // Try to reload voice if not found
            if (!thaiVoice) {
                loadThaiVoice();
            }
            
            // Don't play if no Thai voice - would sound wrong
            if (!thaiVoice) {
                showToast('Thai voice not available');
                return;
            }
            
            const utterance = new SpeechSynthesisUtterance(thaiText);
            utterance.lang = 'th-TH';
            utterance.rate = 0.8;
            utterance.voice = thaiVoice;
            
            const audioBtn = document.getElementById('audioBtn');
            
            utterance.onstart = () => {
                if (audioBtn) audioBtn.classList.add('speaking');
            };
            
            utterance.onend = () => {
                if (audioBtn) audioBtn.classList.remove('speaking');
            };
            
            utterance.onerror = () => {
                if (audioBtn) audioBtn.classList.remove('speaking');
            };
            
            speechSynthesis.speak(utterance);
        }
        
        // Store current sentence Thai text for speaking
        let currentSentenceThai = '';
        
        function speakSentence() {
            if (!currentSentenceThai) return;
            
            if (!('speechSynthesis' in window)) return;
            
            speechSynthesis.cancel();
            
            // Try to reload voice if not found
            if (!thaiVoice) {
                loadThaiVoice();
            }
            
            // Don't play if no Thai voice
            if (!thaiVoice) {
                showToast('Thai voice not available');
                return;
            }
            
            const utterance = new SpeechSynthesisUtterance(currentSentenceThai);
            utterance.lang = 'th-TH';
            utterance.rate = 0.75;
            utterance.voice = thaiVoice;
            
            const speakBtn = document.getElementById('sentenceSpeakBtn');
            
            utterance.onstart = () => {
                if (speakBtn) speakBtn.textContent = '';
            };
            
            utterance.onend = () => {
                if (speakBtn) speakBtn.textContent = '';
            };
            
            utterance.onerror = () => {
                if (speakBtn) speakBtn.textContent = '';
            };
            
            speechSynthesis.speak(utterance);
        }

        // Sound effects using Web Audio API
        let audioContext = null;
        let audioUnlocked = false;
        
        function unlockAudio() {
            if (audioUnlocked && audioContext && audioContext.state === 'running') return;
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        audioUnlocked = true;
                    });
                } else {
                    audioUnlocked = true;
                }
                // Create a silent buffer to unlock on iOS
                const buffer = audioContext.createBuffer(1, 1, 22050);
                const source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.connect(audioContext.destination);
                source.start(0);
            } catch (e) {
                console.log('Audio unlock failed:', e);
            }
        }
        
        // Unlock audio on any user interaction (not just once)
        document.addEventListener('click', unlockAudio);
        document.addEventListener('touchstart', unlockAudio);
        
        function playTone(frequency, duration, type = 'sine', volume = 0.15) {
            unlockAudio(); // Try to unlock every time we play
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // Resume AudioContext if suspended (browser autoplay policy)
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                // Soft attack and longer, gentler release
                const now = audioContext.currentTime;
                gainNode.gain.setValueAtTime(0, now);
                gainNode.gain.linearRampToValueAtTime(volume, now + 0.02); // Quick fade in
                gainNode.gain.setValueAtTime(volume, now + duration * 0.3); // Hold
                gainNode.gain.exponentialRampToValueAtTime(0.001, now + duration); // Gentle fade out
                
                oscillator.start(now);
                oscillator.stop(now + duration);
            } catch (e) {
                // Audio not supported, silently fail
                console.log('playTone failed:', e);
            }
        }
        
        function playCorrectSound() {
            playTone(523, 0.25, 'sine', 0.12); // C5 - louder
            setTimeout(() => playTone(659, 0.3, 'sine', 0.12), 80); // E5
        }
        
        function playIncorrectSound() {
            playTone(180, 0.35, 'sine', 0.15); // Lower tone, louder
        }
        
        function markCorrect() {
            if (!cards.length) return;
            const card = cards[currentIndex];
            const key = getCardKey(card);
            
            // Flash animation and sound
            flashcard.classList.add('success-flash');
            setTimeout(() => flashcard.classList.remove('success-flash'), 400);
            playCorrectSound();
            
            // Find which list this card belongs to and update stats there
            const originalListIdx = findCardOriginalList(card);
            const stats = getListStats(originalListIdx);
            
            if (!stats[key]) stats[key] = { correct: 0, incorrect: 0, consecutiveCorrect: 0, lastReviewed: null };
            
            // Calculate XP based on difficulty (consecutive correct = easier)
            let xpReward = XP_REWARDS.flashcardMedium;
            if (stats[key].consecutiveCorrect === 0) {
                xpReward = XP_REWARDS.flashcardHard; // First time correct = hard
            } else if (stats[key].consecutiveCorrect >= 2) {
                xpReward = XP_REWARDS.flashcardEasy; // Already got it right multiple times = easy
            }
            awardXP(xpReward);
            
            stats[key].correct++;
            stats[key].consecutiveCorrect++;
            stats[key].lastReviewed = new Date().toISOString();
            sessionStats.correct++;
            
            // If card just became learned and we're in review mode, remove it from deck
            if (stats[key].consecutiveCorrect === LEARNING_THRESHOLD) {
                showToast(' Word learned!', 'success');
                awardXP(XP_REWARDS.flashcardNewWord, 'Word Mastered!'); // Bonus XP for mastering
                if (currentMode === 'review') {
                    // Remove this card from the review deck
                    cards.splice(currentIndex, 1);
                    // Adjust index if we removed the last card
                    if (currentIndex >= cards.length && cards.length > 0) {
                        currentIndex = cards.length - 1;
                    }
                    if (cards.length === 0) {
                        showToast(' All cards learned!', 'success');
                        showCompletionModal();
                        return;
                    }
                    updateCard();
                    updateScoreDisplay();
                    saveProgress();
                    return;
                }
            }
            
            updateScoreDisplay();
            saveProgress();
            
            if (currentIndex < cards.length - 1) {
                nextCard();
            } else {
                showCompletionModal();
            }
        }

        function markIncorrect() {
            if (!cards.length) return;
            const card = cards[currentIndex];
            const key = getCardKey(card);
            
            // Flash animation and sound
            flashcard.classList.add('error-flash');
            setTimeout(() => flashcard.classList.remove('error-flash'), 400);
            playIncorrectSound();
            
            // Find which list this card belongs to and update stats there
            const originalListIdx = findCardOriginalList(card);
            const stats = getListStats(originalListIdx);
            
            if (!stats[key]) stats[key] = { correct: 0, incorrect: 0, consecutiveCorrect: 0, lastReviewed: null };
            stats[key].incorrect++;
            stats[key].consecutiveCorrect = 0;
            stats[key].lastReviewed = new Date().toISOString();
            sessionStats.incorrect++;
            updateScoreDisplay();
            saveProgress();
            
            if (currentIndex < cards.length - 1) {
                nextCard();
            } else {
                showCompletionModal();
            }
        }
        
        function findCardOriginalList(card) {
            const key = getCardKey(card);
            // Always search themedLists (the canonical source) for card stats
            for (let i = 0; i < themedLists.length; i++) {
                if (themedLists[i].words.some(c => getCardKey(c) === key)) {
                    return i;
                }
            }
            return 0; // Default to first list if not found
        }
        
        function showCompletionModal() {
            sessionState.inProgress = false;
            saveSessionState();
            
            const total = sessionStats.correct + sessionStats.incorrect;
            const accuracy = total > 0 ? Math.round((sessionStats.correct / total) * 100) : 0;
            
            document.getElementById('completionTotal').textContent = total;
            document.getElementById('completionCorrect').textContent = sessionStats.correct;
            document.getElementById('completionIncorrect').textContent = sessionStats.incorrect;
            document.getElementById('completionAccuracy').textContent = accuracy + "%";
            
            document.getElementById('completionModal').classList.add('open');
        }

        function updateScoreDisplay() {
            // Show session stats (not all-time stats)
            correctScore.textContent = sessionStats.correct;
            incorrectScore.textContent = sessionStats.incorrect;
            
            // Update list progress display
            if (currentListIndex >= 0) {
                const p = getListProgress(currentListIndex);
                listProgressDisplay.textContent = p.learned + " of " + p.total + " learned (" + p.learnedPercent + "%)";
            } else if (currentListIndex === FAVORITES_LIST) {
                listProgressDisplay.textContent = favorites.size + " favorites";
            } else if (currentListIndex === HARDEST_LIST) {
                listProgressDisplay.textContent = cards.length + " hardest cards";
            }
        }

        function switchMode(mode) {
            currentMode = mode;
            modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === mode));
            // Don't reset position - keep current index if possible
            const oldIndex = currentIndex;
            const oldCard = cards[currentIndex];
            initializeCardsPreservePosition(oldCard);
            if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
            updateCard();
            saveProgress();
        }

        function switchList(idx) {
            const oldCard = cards.length > 0 ? cards[currentIndex] : null;
            currentListIndex = idx;
            
            // Reset session stats for new list
            sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
            correctScore.textContent = '0';
            incorrectScore.textContent = '0';
            
            // Reset mode-specific state when switching lists
            modeState = {
                all: { cards: [], currentIndex: 0 },
                review: { cards: [], currentIndex: 0 }
            };
            
            // Reset to "All Cards" mode
            currentMode = 'all';
            modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === 'all'));
            
            if (idx === FAVORITES_LIST) {
                vocabulary = getFavoriteCards();
                if (vocabulary.length === 0) {
                    // Don't redirect, just show empty state
                    cards = [];
                    currentIndex = 0;
                    if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
                    updateCard();
                    saveProgress();
                    return;
                }
            } else if (idx === HARDEST_LIST) {
                const hardest = getHardestCards();
                vocabulary = hardest.map(h => h.card);
                if (vocabulary.length === 0) {
                    // Don't redirect, just show empty state
                    cards = [];
                    currentIndex = 0;
                    if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
                    updateCard();
                    saveProgress();
                    return;
                }
            } else if (idx === ALL_CARDS_LIST) {
                // Combine all words from all themed lists
                vocabulary = themedLists.reduce((all, list) => all.concat(list.words), []);
            } else {
                vocabulary = vocabularyLists[idx].words;
            }
            
            // Initialize fresh for new list
            initializeCards();
            modeState.all.cards = [...cards];
            modeState.all.currentIndex = currentIndex;
            if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
            updateCard();
            saveProgress();
        }

        function updateListSelector() {
            listSelector.innerHTML = '';
            
            // Add Favorites option
            const favOption = document.createElement('option');
            favOption.value = FAVORITES_LIST;
            favOption.textContent = " Favorites (" + favorites.size + " words)";
            listSelector.appendChild(favOption);
            
            // Add Hardest Cards option
            const hardOption = document.createElement('option');
            hardOption.value = HARDEST_LIST;
            const hardestCount = getHardestCards().length;
            hardOption.textContent = " Hardest Cards (" + hardestCount + " words)";
            listSelector.appendChild(hardOption);
            
            // Add All Cards option
            const allOption = document.createElement('option');
            allOption.value = ALL_CARDS_LIST;
            const totalWords = themedLists.reduce((sum, list) => sum + list.words.length, 0);
            allOption.textContent = " All Cards (" + totalWords + " words)";
            listSelector.appendChild(allOption);
            
            // Add separator
            const separator = document.createElement('option');
            separator.disabled = true;
            separator.textContent = '';
            listSelector.appendChild(separator);
            
            // Add vocabulary lists
            vocabularyLists.forEach((l, i) => {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = l.name + " (" + l.words.length + " words)";
                listSelector.appendChild(option);
            });
            
            listSelector.value = currentListIndex;
        }
        
        function getHardestCards() {
            // Get all cards with incorrect counts from global stats
            const allCardsWithStats = [];
            const globalStats = getCardStats();
            const seenKeys = new Set();
            
            themedLists.forEach((list, listIdx) => {
                list.words.forEach(card => {
                    const key = getCardKey(card);
                    if (seenKeys.has(key)) return; // Avoid duplicates
                    seenKeys.add(key);
                    
                    const stats = globalStats[key];
                    if (stats && stats.incorrect > 0) {
                        allCardsWithStats.push({
                            card,
                            incorrect: stats.incorrect,
                            listIdx
                        });
                    }
                });
            });
            
            // Sort by incorrect count (highest first) and take top 30
            allCardsWithStats.sort((a, b) => b.incorrect - a.incorrect);
            return allCardsWithStats.slice(0, 30);
        }
        
        function getFavoriteCards() {
            const favCards = [];
            vocabularyLists.forEach(list => {
                list.words.forEach(card => {
                    if (favorites.has(getCardKey(card))) {
                        favCards.push(card);
                    }
                });
            });
            return favCards;
        }

        function saveSessionState() {
            sessionState = { cardOrder: cards.map(getCardKey), currentIndex, listIndex: currentListIndex, mode: currentMode, inProgress: currentIndex < cards.length - 1 && cards.length > 0 };
            localStorage.setItem('thaiFlashcardsSession', JSON.stringify(sessionState));
        }

        function showResumeModal() {
            document.getElementById('resumeListName').textContent = vocabularyLists[sessionState.listIndex]?.name || 'Unknown';
            document.getElementById('resumeProgress').textContent = "Card " + (sessionState.currentIndex + 1) + " of " + sessionState.cardOrder.length;
            document.getElementById('resumeCorrect').textContent = sessionStats.correct;
            document.getElementById('resumeIncorrect').textContent = sessionStats.incorrect;
            resumeModal.classList.add('open');
        }

        function startFresh() {
            try {
                // Refresh vocabularyLists in case view mode changed
                vocabularyLists = getActiveVocabularyLists();
                sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
                initializeCards();
                if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
                updateCard();
                updateSessionScoreDisplay();
                showToast('Started fresh session!');
            } catch (err) {
                console.error('Start fresh error:', err);
            }
        }
        
        function updateSessionScoreDisplay() {
            correctScore.textContent = sessionStats.correct;
            incorrectScore.textContent = sessionStats.incorrect;
        }

        function resumeSession() {
            try {
                // Refresh vocabularyLists in case view mode changed
                vocabularyLists = getActiveVocabularyLists();
                
                if (sessionState.cardOrder && sessionState.cardOrder.length > 0) {
                    // Validate list index
                    if (sessionState.listIndex >= 0 && sessionState.listIndex < vocabularyLists.length) {
                        currentListIndex = sessionState.listIndex;
                    } else {
                        currentListIndex = 0;
                    }
                    
                    vocabulary = vocabularyLists[currentListIndex].words;
                    listSelector.value = currentListIndex;
                    currentMode = sessionState.mode || 'all';
                    modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === currentMode));
                    const map = new Map(vocabulary.map(c => [getCardKey(c), c]));
                    cards = sessionState.cardOrder.map(k => map.get(k)).filter(Boolean);
                    
                    if (cards.length === 0) {
                        startFresh();
                        return;
                    }
                    
                    currentIndex = Math.min(sessionState.currentIndex || 0, cards.length - 1);
                    if (isFlipped) { flashcard.classList.remove('flipped'); isFlipped = false; }
                    updateCard();
                    showToast('Session resumed!');
                } else {
                    startFresh();
                }
            } catch (err) {
                console.error('Resume error:', err);
                startFresh();
            }
        }

        function handleFileUpload(e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (ev) => {
                const lines = ev.target.result.split('\n').filter(l => l.trim());
                const newCards = [];
                for (let i = 1; i < lines.length; i++) {
                    const m = lines[i].match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g);
                    if (m?.length >= 2) {
                        const thai = m[0].replace(/^"|"$/g, '').trim();
                        const english = m[1].replace(/^"|"$/g, '').trim();
                        if (thai && english) newCards.push({ thai, english });
                    }
                }
                if (!newCards.length) { showToast('No valid cards found'); return; }
                const existing = new Set(vocabulary.map(c => c.thai.toLowerCase() + '|' + c.english.toLowerCase()));
                const unique = newCards.filter(c => !existing.has(c.thai.toLowerCase() + '|' + c.english.toLowerCase()));
                if (!unique.length) { showToast('All cards are duplicates'); csvFileInput.value = ''; return; }
                vocabulary.push(...unique);
                initializeCards();
                updateCard();
                saveProgress();
                showToast("Imported " + unique.length + " new cards!");
                csvFileInput.value = '';
            };
            reader.readAsText(file);
        }

        function updateStatsModal() {
            document.getElementById('sessionCorrect').textContent = sessionStats.correct;
            document.getElementById('sessionIncorrect').textContent = sessionStats.incorrect;
            var cp = getListProgress(currentListIndex);
            document.getElementById('currentListStats').innerHTML = 
                '<div class="list-stat-item">' +
                    '<div class="list-stat-header"><span class="list-stat-name">' + vocabularyLists[currentListIndex].name + '</span><span class="list-stat-percent">' + cp.learnedPercent + '%</span></div>' +
                    '<div class="list-stat-bar"><div class="list-stat-bar-fill" style="width:' + cp.learnedPercent + '%"></div></div>' +
                    '<div class="list-stat-details">' +
                        '<div class="stat-detail-item"><span class="stat-detail-value">' + cp.learned + '/' + cp.total + '</span><span>Learned</span></div>' +
                        '<div class="stat-detail-item"><span class="stat-detail-value">' + cp.reviewed + '</span><span>Reviewed</span></div>' +
                        '<div class="stat-detail-item"><span class="stat-detail-value score-correct">' + cp.totalCorrect + '</span><span>Correct</span></div>' +
                        '<div class="stat-detail-item"><span class="stat-detail-value score-incorrect">' + cp.totalIncorrect + '</span><span>Wrong</span></div>' +
                    '</div>' +
                '</div>';
            document.getElementById('allListsStats').innerHTML = vocabularyLists.map(function(l, i) {
                var p = getListProgress(i);
                return '<div class="list-stat-item">' +
                    '<div class="list-stat-header"><span class="list-stat-name">' + l.name + '</span><span class="list-stat-percent">' + p.learnedPercent + '%</span></div>' +
                    '<div class="list-stat-bar"><div class="list-stat-bar-fill" style="width:' + p.learnedPercent + '%"></div></div>' +
                    '<div class="list-stat-details">' +
                        '<div class="stat-detail-item"><span class="stat-detail-value">' + p.learned + '/' + p.total + '</span><span>Learned</span></div>' +
                        '<div class="stat-detail-item"><span class="stat-detail-value">' + p.reviewed + '</span><span>Reviewed</span></div>' +
                    '</div>' +
                '</div>';
            }).join('');
        }
        
        function showVocabList() {
            var vocabListModal = document.getElementById('vocabListModal');
            var container = document.getElementById('vocabListContainer');
            var filter = document.getElementById('vocabListFilter').value;
            
            // Get words to display
            var words = [];
            if (filter === 'current') {
                words = vocabulary.map(function(w) { return w; });
            } else {
                // All words from all themed lists
                themedLists.forEach(function(list) {
                    list.words.forEach(function(w) {
                        words.push(w);
                    });
                });
            }
            
            // Sort alphabetically by Thai
            words.sort(function(a, b) {
                return a.thai.localeCompare(b.thai, 'th');
            });
            
            // Build HTML
            var html = '';
            words.forEach(function(word) {
                var mastery = getMasteryStatus(word);
                var statusClass = mastery.status;
                var roman = getRomanization(word.thai) || '';
                
                html += '<div class="vocab-list-item">' +
                    '<div class="vocab-status ' + statusClass + '"></div>' +
                    '<div class="vocab-thai">' + word.thai + '</div>' +
                    '<div class="vocab-english">' + word.english + '</div>' +
                    (roman ? '<div class="vocab-roman">' + roman + '</div>' : '') +
                '</div>';
            });
            
            container.innerHTML = html;
            vocabListModal.classList.add('open');
        }

        function exportProgress() {
            try {
                var data = { 
                    version: 1, 
                    exportDate: new Date().toISOString(), 
                    cardStats: cardStats, 
                    sessionStats: sessionStats, 
                    currentListIndex: currentListIndex, 
                    showThaiFront: showThaiFront, 
                    currentMode: currentMode, 
                    favorites: Array.from(favorites) 
                };
                var blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                var url = URL.createObjectURL(blob);
                var a = document.createElement('a');
                a.href = url;
                a.download = 'thai-flashcards-progress-' + new Date().toISOString().split('T')[0] + '.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                showToast('Progress exported!');
            } catch (e) {
                console.error('Export failed:', e);
                showToast('Export failed: ' + e.message);
            }
        }

        function resetProgress() {
            // Show custom confirmation by changing button temporarily
            var resetBtn = document.getElementById('resetBtn');
            if (resetBtn.dataset.confirming === 'true') {
                // Second click - do the reset
                resetBtn.dataset.confirming = 'false';
                resetBtn.textContent = ' Reset All Progress';
                
                try {
                    // Clear all app localStorage keys
                    localStorage.removeItem('thaiFlashcardsProgress');
                    localStorage.removeItem('thaiFlashcardsSession');
                    localStorage.removeItem('thaiFlashcardsRomanization');
                    localStorage.removeItem('thaiFlashcardsSmartReview');
                    localStorage.removeItem('thaiFlashcardsThaiFront');
                    localStorage.removeItem('thaiFlashcardsViewMode');
                    localStorage.removeItem('thaiGrammarProgress');
                    
                    // Reset all in-memory state
                    cardStats = {};
                    sessionStats = { correct: 0, incorrect: 0, cardsReviewed: 0 };
                    sessionState = { cardOrder: [], currentIndex: 0, listIndex: 0, mode: 'all', inProgress: false };
                    favorites = new Set();
                    currentMode = 'all';
                    showRomanization = false;
                    smartReviewMode = false;
                    showThaiFront = true;
                    lessonProgress = {};
                    
                    // Reset UI
                    currentListIndex = 0;
                    vocabulary = vocabularyLists[0].words;
                    listSelector.value = 0;
                    updateListSelector();
                    modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === 'all'));
                    
                    // Reinitialize
                    initializeCards();
                    updateCard();
                    
                    // Close modal and show confirmation
                    settingsModal.classList.remove('open');
                    showToast('All progress reset!', 'success');
                    
                } catch (e) {
                    console.error('Reset failed:', e);
                    showToast('Reset failed: ' + e.message);
                }
            } else {
                // First click - ask for confirmation
                resetBtn.dataset.confirming = 'true';
                resetBtn.textContent = ' Click again to confirm reset';
                resetBtn.style.background = '#ef4444';
                resetBtn.style.color = 'white';
                
                // Reset button state after 3 seconds if not clicked
                setTimeout(function() {
                    if (resetBtn.dataset.confirming === 'true') {
                        resetBtn.dataset.confirming = 'false';
                        resetBtn.textContent = ' Reset All Progress';
                        resetBtn.style.background = '';
                        resetBtn.style.color = '';
                    }
                }, 3000);
            }
        }

        function saveProgress() {
            localStorage.setItem('thaiFlashcardsProgress', JSON.stringify({ 
                cardStats, 
                sessionStats, 
                currentListIndex, 
                showThaiFront, 
                currentMode, 
                favorites: Array.from(favorites),
                lastSaved: new Date().toISOString() 
            }));
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('thaiFlashcardsProgress');
                if (saved) {
                    const d = JSON.parse(saved);
                    cardStats = d.cardStats || {};
                    sessionStats = d.sessionStats || { correct: 0, incorrect: 0, cardsReviewed: 0 };
                    currentListIndex = d.currentListIndex || 0;
                    showThaiFront = d.showThaiFront !== undefined ? d.showThaiFront : true;
                    currentMode = d.currentMode || 'all';
                    favorites = new Set(d.favorites || []);
                    modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === currentMode));
                    
                    // Migrate old list-indexed stats to global stats
                    migrateOldStats();
                    saveProgress(); // Save migrated stats
                }
                const sess = localStorage.getItem('thaiFlashcardsSession');
                if (sess) sessionState = JSON.parse(sess);
            } catch (e) { console.error(e); }
        }

        function showToast(msg, variant = '') {
            toast.textContent = msg;
            toast.className = 'toast show' + (variant ? ' ' + variant : '');
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.className = 'toast', 300);
            }, 2000);
        }

        init();
    </script>
</body>
</html>
